<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


        <{include file = 'headMeta.html'}>

        <title>密码重置</title>

        <!--新 Bootstrap 核心 CSS 文件--> 
        <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" />
        <!--可选的Bootstrap主题文件（一般不用引入）--> 
        <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" />
        <!--jQuery文件。务必在bootstrap.min.js 之前引入--> 
        <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
        <!--最新的 Bootstrap 核心 JavaScript 文件--> 
        <script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

        <script src="//cdn.bootcss.com/jquery-validate/1.15.0/jquery.validate.min.js"></script>
        <script type="text/javascript" src="/js/libs/jquery.form.min.js"></script>

        <link rel="stylesheet" type="text/css" href="/css/common.css" />
        <!--<link rel="stylesheet" type="text/css" href="/css/global.css" />-->

        <style>
            .h50 {
                height: 50px;
            }
        </style>
    </head>
    <body>
        <!--header start-->
        <{include file = 'header.html'}>
        <!--header end-->

        <div class="h50">

        </div>


        <div class="wrap">
            <br />
            <br />
            <br />
            <br />

            <div class="form-group col-sm-12">
                <!--<label for="inputName" class="col-sm-4 control-label text-left">姓名</label>-->
                <div class="col-sm-12">
                    <h1>重置密码</h1>

                    <p>
                        <{$nickname}>，请输入账号<{$account}>的新密码   
                    </p>

                </div>
            </div>
            <div class="row">
                <form id="resetPassForm" name="resetPassForm" method="POST">
                    <input type="hidden" name="code" value="<{$code}>"/>
                    <input type="hidden" name="key" value="<{$key}>"/>
                    <input type="hidden" name="save" value="1"/>
                    <div class="form-group col-sm-12">
                        <!--<label for="inputName" class="col-sm-4 control-label text-left">姓名</label>-->
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="pass" name="pass" placeholder="输入密码" />
                        </div>
                    </div>
                    <div class="form-group col-sm-12">
                        <!--<label for="inputName" class="col-sm-4 control-label text-left">姓名</label>-->
                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="pass2" name="pass2" placeholder="确认密码" />
                        </div>
                    </div>
                    <div class="form-group col-sm-12">
                        <div class="col-sm-4">
                            <button type="submit" class="btn btn-primary" name="contact-button">提交</button>
                        </div>
                    </div>
                </form>
            </div>

        </div>



        <script type="text/javascript">
            $(document).ready(function () {
//                $("#resetPassForm").submit(function () {
//                    var ajax_option = {
//                        url: "/account/resetPassSave", //默认是form action
//                        type: "post",
//                        dataType: "json",
//                        beforeSerialize: function () {
//
//                        },
//                        beforeSubmit: function () {
//                            return $("#resetPassForm").valid();
//                        },
//                        success: function (resp) {//表单提交成功回调函数
//                            if (resp.state === 0) {
//                                var href = "/mazu/user";
//                                location.href = href;//location.href实现客户端页面的跳转
//                            } else if (resp.state === 101) {
//
//                            } else {
//                                alert("服务异常，请稍后再试！");
//                            }
//                        },
//                        error: function (err) {
//                            //                        alert("表单提交异常！" + err.msg);
//                        }
//                    };
//                    $('#resetPassForm').ajaxSubmit(ajax_option);
//                    return false;
//                });


                $('#resetPassForm').validate({
                    errorElement: 'span',
                    errorClass: 'help-block',
                    focusInvalid: false,
                    rules: {
                        pass: {
                            required: true
                        },
                        pass2: {
                            required: true,
                            equalTo: "#pass"
                        }
                    },
                    messages: {
                        pass: {
                            required: "请输入密码"
                        },
                        pass2: {
                            required: "请输入确认密码",
                            equalTo: "两次输入密码不一致"
                        }
                    },
                    highlight: function (element) {
                        $(element).closest('.form-group').addClass('has-error');
                    },
                    success: function (label) {
                        label.closest('.form-group').removeClass('has-error');
                        label.remove();
                    },
                    errorPlacement: function (error, element) {
                        element.parent('div').append(error);
                    },
                    submitHandler: function (form) {
                        form.submit();
                    }
                });

            });

        </script>
    </body>
</html>
