<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[MySQLÂ∞èÁü•ËØÜÁÇπÊùÇËÆ∞]]></title>
    <url>%2F2019%2F09%2F04%2FMySQL%E5%B0%8F%E7%9F%A5%E8%AF%86%E7%82%B9%E6%9D%82%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: Âú®‰ΩøÁî® MySQL ËøáÁ®ã‰∏≠ÔºåÊÄªÊòØ‰ºöÁî®Âà∞‰∏Ä‰∫õÊØîËæÉ‰∏çÂ∏∏Áî®Áü•ËØÜÁÇπÔºåËøô‰∫õÁü•ËØÜÁÇπÈÄöÂ∏∏‰∏ç‰ºöÂàªÊÑèÂ≠¶‰π†ÔºåËÄåÊòØÂΩìÊàêÂ∑•ÂÖ∑Á±ªÈöèÁî®ÈöèÊü•„ÄÇËøôÁØáÁ¨îËÆ∞ üìí ‰æøÊòØÂ∞ÜËá™Â∑±Âú®Âπ≥Êó∂Â∑•‰ΩúÂ≠¶‰π†ËøáÁ®ã‰∏≠ÈÅáÂà∞Ëøô‰∫õÁü•ËØÜÁÇπÂÅöÊ≠§ËÆ∞ÂΩïÔºå‰æø‰∫é‰ª•ÂêéÊü•ÈòÖÔºå‰ª•ÊèêÂçáÊïàÁéá„ÄÇ 1: Âø´ÈÄüüîú‰∏Ä‰∏™Ë°®Â≠òÂú®Â§öÂ∞ë‰∏™Êï∞ÊçÆÂ≠óÊÆµ 1234-- TABLE_SCHEMA ÂØπ‰∫éÊï∞ÊçÆË°®ÊâÄÂú®ÁöÑÊï∞ÊçÆÂ∫ìÂêç-- table_name ÂØπ‰∫éÊï∞ÊçÆË°®ÂêçÁß∞select count(*) from information_schema.COLUMNSwhere TABLE_SCHEMA = 'database_name' and table_name = 'table_name';]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL‰∏ª‰ªéÂ§çÂà∂]]></title>
    <url>%2F2019%2F09%2F01%2FMySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: MySQL‰∏ª‰ªéÂ§çÂà∂ËøáÁ®ãÈÄöÂ∏∏ÂàÜ‰∏∫‰∏âÊ≠•„ÄÇÂàÜÂà´ÊòØ‚Ä¶Á¨¨‰∏ÄÊ≠•ÔºåÁ¨¨‰∏§Ê≠•ÔºåÁ¨¨‰∏âÊ≠•‚Ä¶ ‰∏Ä: MySQL‰∏ª‰ªéÂ§çÂà∂Ê≠•È™§ 1: master Â∞ÜÊîπÂèò ËÆ∞ÂΩïÂà∞‰∫åËøõÂà∂Êñá‰ª∂Ôºàbinary logÔºâ„ÄÇËøô‰∫õËÆ∞ÂΩïÁöÑËøáÁ®ãÂè´‰∫åËøõÂà∂Êó•Âøó‰∫ã‰ª∂Ôºàbinary log eventÔºâ 2: slave Â∞Ü master ÁöÑ binary log event Êã∑Ë¥ùÂà∞ÂÆÉÁöÑ‰∏≠ÁªßÊó•ÂøóÔºàrelay logÔºâ 3: slave ÈáçÂÅö‰∏≠ÁªßÊó•Âøó‰∏≠ÁöÑ‰∫ã‰ª∂ÔºåÂ∞ÜÊîπÂèòÂ∫îÁî®Âà∞ slave Ëá™Â∑±ÁöÑÊï∞ÊçÆÂ∫ì‰∏≠„ÄÇMySQL Â§çÂà∂ÊòØ ÂºÇÊ≠•‰∏îÊòØ‰∏≤Ë°åÂåñ ÁöÑ ‰∫å: MySQL‰∏ª‰ªéÁöÑÂü∫Êú¨ÂéüÂàô 1: ÊØè‰∏™ slave Âè™Êúâ‰∏Ä‰∏™ mater„ÄÇ 2: ÊØè‰∏™ slave Âè™ËÉΩÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑÊúçÂä°Âô®id„ÄÇ 3: ÊØè‰∏™ master ÂèØ‰ª•ÊúâÂ§ö‰∏™ slave„ÄÇ MySQL‰∏ª‰ªéÂ§çÂà∂ÁöÑÊúÄÂ§ßÈóÆÈ¢òÊòØ ÁΩëÁªúÂª∂Ëøü ‰∏â: ‰∏Ä‰∏ª‰∏Ä‰ªéÂ∏∏ËßÅÈÖçÁΩÆ Master ÈÖçÁΩÆÊñá‰ª∂ 123456789101112131415161718192021222324252627-- 1: ÈÖçÁΩÆ‰∏ªÊúçÂä°Âô®ÂîØ‰∏Äidserver-id = 1-- 2: ÂêØÁî®‰∫åËøõÂà∂Êó•Âøólog_bin = /var/log/mysql/mysql-bin-master.log-- 3: ÂêØÁî®ÈîôËØØÊó•ÂøóËÆ∞ÂΩï„ÄêÂèØÈÄâ„Äëlog_err = /var/log/mysql/mysql-bin-master-err.log-- 4: ÈÖçÁΩÆÊ†πÁõÆÂΩï„ÄêÂèØÈÄâ„Äëbasedir = /usr/-- 5: ÈÖçÁΩÆ‰∏¥Êó∂ÁõÆÂΩï„ÄêÂèØÈÄâ„Äëtmpdir = /tmp/-- 6: ÈÖçÁΩÆÊï∞ÊçÆÁõÆÂΩï„ÄêÂèØÈÄâ„Äëdatadir = /var/lib/mysql-- 7: ‰∏ªÊú∫ËØªÂÜôÈÉΩÂèØ‰ª•„ÄêÂèØÈÄâ„Äëread-only = 1-- 8: ËÆæÁΩÆ‰∏çÈúÄË¶ÅÂ§çÂà∂ÁöÑÊï∞ÊçÆÂ∫ì„ÄêÂèØÈÄâ„Äëreplicate_ignore_db = dbName-- 9: ËÆæÁΩÆÈúÄË¶ÅÂ§çÂà∂ÁöÑÊï∞ÊçÆÂ∫ì„ÄêÂèØÈÄâ„Äëreplicate_do_db = dbName Slave ÈÖçÁΩÆÊñá‰ª∂ 12345-- 1: ÈÖçÁΩÆ‰ªéÊúçÂä°Âô®ÂîØ‰∏ÄidÔºåÂíå master ÁöÑ server-id ‰∏çËÉΩ‰∏ÄËá¥„ÄÇserver-id = 2-- 2: ÂêØÁî®‰∫åËøõÂà∂Êó•Âøó„ÄêÂèØÈÄâ„Äëlog_bin = /var/log/mysql/mysql-bin-master.log Master Áªô Slave ÊéàÊùÉ 123456789101112131415161718-- ‰ªéÊú∫Êï∞ÊçÆÂ∫ìipÔºåÂ¶ÇÊûú‰∏∫% ÂàôÊòØÊéàÊùÉÁªôÂÖ®ÈÉ®ipmysql&gt; grant replication slave on *.* to 's1'@'192.168.153.143' identified by '123456';-- Âà∑Êñ∞mysql&gt; flush privileges;-- Êü•ËØ¢ MasterÁä∂ÊÄÅmysql&gt; show master status;+-------------------------+----------+--------------+------------------+| File | Position | Binlog_Do_DB | Binlog_Ignore_DB |+-------------------------+----------+--------------+------------------+| mysql-bin-master.000003 | 752 | | |+-------------------------+----------+--------------+------------------+1 row in set (0.00 sec)-- File: mysql-bin-master.000002„Äê‰∫åËøõÂà∂Êó•ÂøóÊñá‰ª∂„Äë-- Position: 623„ÄêÊó•ÂøóÂ§çÂà∂ÁöÑ‰ΩçÁΩÆ„Äë slave‰ªéÊú∫ÈÖçÁΩÆÈúÄË¶ÅÂ§çÂà∂ÁöÑ‰∏ªÊú∫ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465-- ËÆæÁΩÆÈúÄË¶ÅÂ§çÂà∂‰∏ªÊú∫ÁöÑÈÖçÁΩÆ-- master_log_file Êù•Ëá™ master Êú∫Âô®‰∏≠ÊâßË°å show master status ÂêéÂæóÂà∞ File ÁöÑÂÄº-- master_log_pos Êù•Ëá™ master Êú∫Âô®‰∏≠ÊâßË°å show master status ÂêéÂæóÂà∞ Position ÁöÑÂÄºmysql&gt; change master tomaster_host = '192.168.153.160',master_user = 's1',master_password ='123456',master_log_file = 'mysql-bin-master.000005', master_log_pos = 4631;-- ÂêØÂä®‰ªéÊú∫mysql&gt; start slave; -- Êü•ËØ¢‰ªéÊú∫Áä∂ÊÄÅ-- Â¶ÇÊûúÂá∫Áé∞ Slave_IO_Running: Connecting ÔºåÈÖçÁΩÆmaster ÁöÑÈÖçÁΩÆÊñá‰ª∂ÈÄâÈ°π #bind-address = 127.0.0.1„ÄÇMariaDB [(none)]&gt; show slave status\G;*************************** 1. row *************************** Slave_IO_State: Waiting for master to send event Master_Host: 192.168.153.160 Master_User: s1 Master_Port: 3306 Connect_Retry: 60 Master_Log_File: mysql-bin-master.000005 Read_Master_Log_Pos: 625 Relay_Log_File: mysqld-relay-bin.000002 Relay_Log_Pos: 544 Relay_Master_Log_File: mysql-bin-master.000005 Slave_IO_Running: Yes Slave_SQL_Running: Yes Replicate_Do_DB: Replicate_Ignore_DB: Replicate_Do_Table: Replicate_Ignore_Table: Replicate_Wild_Do_Table: Replicate_Wild_Ignore_Table: Last_Errno: 0 Last_Error: Skip_Counter: 0 Exec_Master_Log_Pos: 625 Relay_Log_Space: 843 Until_Condition: None Until_Log_File: Until_Log_Pos: 0 Master_SSL_Allowed: No Master_SSL_CA_File: Master_SSL_CA_Path: Master_SSL_Cert: Master_SSL_Cipher: Master_SSL_Key: Seconds_Behind_Master: 0Master_SSL_Verify_Server_Cert: No Last_IO_Errno: 0 Last_IO_Error: Last_SQL_Errno: 0 Last_SQL_Error: Replicate_Ignore_Server_Ids: Master_Server_Id: 1 Master_SSL_Crl: Master_SSL_Crlpath: Using_Gtid: No Gtid_IO_Pos: Replicate_Do_Domain_Ids: Replicate_Ignore_Domain_Ids: Parallel_Mode: conservative1 row in set (0.00 sec) È™åËØÅ Âú®master Êñ∞Âª∫‰∏Ä‰∏™Â∫ìÂèäÂÖ∂Ë°®Âπ∂ÊèíÂÖ•‰∏Ä‰∫õÊï∞ÊçÆÔºåslave ‰∏ä‰πü‰ºöÂ≠òÂú®ÂØπÂ∫îÁöÑÊï∞ÊçÆüòú„ÄÇ ÂàáËÆ∞: ‰∏çË¶ÅÂú® slave ‰∏äÊâßË°å Â¢ûÂà†Êîπ Êìç‰Ωú„ÄÇ ÂÜôÂú®ÊúÄÂêé: ‰πãÂâçËá™Â∑±‰∏ÄÁõ¥ËßâÂæó MySQL‰∏ª‰ªéÂ§çÂà∂ ÂÆûÈ™å‰ºöÊØîËæÉÈöæÊêûÔºå‰∫ßÁîü‰∏Ä‰∫õÁïèÈöæÂøÉÈáåÔºå‰∏çÊï¢ÂéªÂ∞ùËØï„ÄÇËøôÂë®Êú´ÊåâÁÖß BÁ´ô ÁöÑÊïôÁ®ãÂÆûÁé∞‰∫Ü‰∏Ä‰∏ã„ÄÇÂõûÊÉ≥ÔºåËôΩÁÑ∂‰∏≠Èó¥ÈÅáÂà∞‰∫Ü‰∏Ä‰∫õÈóÆÈ¢òÔºå‰ΩÜÊòØÂùöÊåÅÂùöÊåÅÔºåÈóÆÈ¢òÁªàÁ©∂ËÉΩËß£ÂÜ≥ÁöÑ„ÄÇÂæàÂ§öÊó∂ÂÄôÔºåÂπ∂‰∏çÊòØÈóÆÈ¢òÊúâÂ§öÈöæÊúâÂ§öÊó†Ëß£ÔºåÊõ¥Â§öÁöÑÊòØÊàë‰ª¨ÂØπÂæÖÊú™Áü•ÁöÑÂøÉÊÄÅ„ÄÇGo ahead‚Ä¶ üòäÂèÇËÄÉ&amp;&amp;ÊÑüË∞¢üòä MySQLÈ´òÁ∫ß-‰∏ª‰ªéÂ§çÂà∂ MySQLÂèå‰∏ªÔºà‰∏ª‰∏ªÔºâÊû∂ÊûÑÊñπÊ°à]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÈ´òÁ∫ß‰πãÈîÅ]]></title>
    <url>%2F2019%2F08%2F31%2FMySQL%E9%AB%98%E7%BA%A7%E4%B9%8B%E9%94%81%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: ÈîÅüîêÊòØËÆ°ÁÆóÊú∫ÂçèË∞ÉÂ§ö‰∏™ËøõÁ®ãÊàñÁ∫øÁ®ã Âπ∂Âèë ËÆøÈóÆÊüê‰∏ÄËµÑÊ∫êÁöÑÊú∫Âà∂„ÄÇ Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÈô§‰∫Ü‰º†ÁªüÁöÑËÆ°ÁÆóËµÑÊ∫êÔºàCPU„ÄÅRAM„ÄÅI/O‚Ä¶ÔºâÁöÑ‰∫âÁî®Â§ñÔºåÊï∞ÊçÆ‰πüÊòØ‰∏ÄÁßçÂ§öÁî®Êà∑ÂÖ±‰∫´ÁöÑËµÑÊ∫ê„ÄÇÂ¶Ç‰Ωï‰øùËØÅÊï∞ÊçÆÂú®Âπ∂ÂèëÊù°‰ª∂‰∏ãËÆøÈóÆÁöÑ‰∏ÄËá¥ÊÄßÔºåÊúâÊïàÊÄßÊòØÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÂøÖÈ°ªËß£ÂÜ≥ÁöÑ‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇÈîÅüîêÂÜ≤Á™Å‰πüÊòØÂΩ±ÂìçÊï∞ÊçÆÂ∫ìÂπ∂ÂèëËÆøÈóÆÊÄßËÉΩÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÂõ†Á¥†„ÄÇ ‰∏Ä: ÈîÅÂÆöÂàÜÁ±ª ÊåâÁÖßÊìç‰Ωú: ËØªÈîÅÔºàÂÖ±‰∫´ÈîÅÔºâ Âíå ÂÜôÈîÅÔºàÊéí‰ªñÈîÅÔºâ ÂÖ±‰∫´ÈîÅ: ÁÆÄÁß∞SÈîÅÔºåÈ°æÂêçÊÄù‰πâÔºåÂÖ±‰∫´ÈîÅÂ∞±ÊòØÂ§ö‰∏™‰∫ãÂä°ÂØπ‰∫éÂêå‰∏ÄÊï∞ÊçÆÂèØ‰ª•ÂÖ±‰∫´‰∏ÄÊääÈîÅÔºåÈÉΩËÉΩËÆøÈóÆÂà∞Êï∞ÊçÆÔºå‰ΩÜÊòØÂè™ËÉΩËØª‰∏çËÉΩ‰øÆÊîπ„ÄÇ Êéí‰ªñÈîÅ: ÁÆÄÁß∞XÈîÅÔºåÈ°æÂêçÊÄù‰πâÔºåÊéí‰ªñÈîÅÂ∞±ÊòØ‰∏çËÉΩ‰∏éÂÖ∂‰ªñÊâÄÂπ∂Â≠òÔºåÂ¶Ç‰∏Ä‰∏™‰∫ãÂä°Ëé∑Âèñ‰∫Ü‰∏Ä‰∏™Êï∞ÊçÆË°åÁöÑÊéí‰ªñÈîÅÔºåÂÖ∂‰ªñ‰∫ãÂä°Â∞±‰∏çËÉΩÂÜçËé∑ÂèñËØ•Ë°åÁöÑÂÖ∂‰ªñÈîÅÔºåÂåÖÊã¨ÂÖ±‰∫´ÈîÅÂíåÊéí‰ªñÈîÅÔºå‰ΩÜÊòØËé∑ÂèñÊéí‰ªñÈîÅÁöÑ‰∫ãÂä°ÊòØÂèØ‰ª•ÂØπÊï∞ÊçÆÂ∞±Ë°åËØªÂèñÂíå‰øÆÊîπ„ÄÇ ÊåâÁÖßÁ≤íÂ∫¶: Ë°åÈîÅ | Ë°®ÈîÅ | È°µÈîÅ Ë°®ÈîÅÂÅèÂêë‰∫é MyISAM Â≠òÂÇ®ÂºïÊìéÔºåÂºÄÈîÄÂ∞èÔºåÂä†ÈîÅÂùóÔºõÊó†Ê≠ªÈîÅÔºõÈîÅÂÆöÁ≤íÂ∫¶Â§ßÔºåÂèëÁîüÈîÅüîêÂÜ≤Á™ÅÁöÑÊ¶ÇÁéáÊúÄÈ´òÔºåÂπ∂ÂèëÂ∫¶ÊúÄ‰Ωé„ÄÇ Ë°åÈîÅÂÄæÂêë‰∫é innoDB Â≠òÂÇ®ÂºïÊìéÔºåÂºÄÈîÄÂ§ßÔºåÂä†ÈîÅÊÖ¢Ôºå‰ºöÂá∫Áé∞Ê≠ªÈîÅÔºåÈîÅÂÆöÁ≤íÂ∫¶Â∞èÔºåÂèëÁîüÈîÅÂÜ≤Á™ÅÊ¶ÇÁéáÊúÄ‰ΩéÔºåÂπ∂ÂèëÂ∫¶ÊúÄÈ´ò„ÄÇ ‰∫å: ËØªÈîÅÔºàread lockÔºâÊï∞ÊçÆÂáÜÂ§á 12345678910-- Âª∫Ë°®create table mylock( id int PRIMARY key auto_increment, name varchar(20))Engine = MyISAM default character set utf8mb4;-- ÊèíÂÖ•Êï∞ÊçÆinsert into mylock(name)values("a"),("b"),("c"),("d"),("e"),("f"),("g"); Êü•ÁúãË°®‰∏äÂä†ËøáÁöÑÈîÅ 1mysql&gt; show open tables; ÊâãÂä®ÁªôË°®Âä†ÈîÅÂíåËß£ÈîÅ 12345-- Âä†ÈîÅmysql&gt; lock table tableName1 read(or write), tableName2 read(or write);-- Ëß£ÈîÅmysql&gt; unlock tables; session1 Áªô mylock Ë°®Â¢ûÂä†ËØªÈîÅ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586 -- Âä†ÈîÅ mysql&gt; lock table mylock read; Query OK, 0 rows affected (0.00 sec) -- Êü•ÁúãË°®ÁöÑÈîÅÁä∂ÊÄÅ mysql&gt; show open tables; +--------------------+------------------------------------------------------+--------+-------------+ | Database | Table | In_use | Name_locked | +--------------------+------------------------------------------------------+--------+-------------+ | runoob | mylock | 1 | 0 | +--------------------+------------------------------------------------------+--------+-------------+ -- Êü•ËØ¢ÈîÅÂÆöÁöÑË°® mysql&gt; select * from mylock; +----+------+ | id | name | +----+------+ | 1 | a1 | | 2 | b | | 3 | c | | 4 | d | | 5 | e | | 6 | f | | 7 | g | +----+------+ 7 rows in set (0.00 sec) -- Êü•ËØ¢Âà´ÁöÑË°® mysql&gt; select * from apps; -- ERROR 1100 (HY000): Table 'apps' was not locked with LOCK TABLES -- Â∞ùËØïÂéªÊõ¥Êñ∞ÈîÅÂÆöÁöÑ mylock Ë°® mysql&gt; update mylock set name = 'a11' where id=1; -- ERROR 1099 (HY000): Table 'mylock' was locked with a READ lock and can't be updated; ``` - Êñ∞ÂºÄ **session2** ```sql mysql&gt; select * from mylock; +----+------+ | id | name | +----+------+ | 1 | a1 | | 2 | b | | 3 | c | | 4 | d | | 5 | e | | 6 | f | | 7 | g | +----+------+ 7 rows in set (0.00 sec) mysql&gt; select * from apps; +----+------------+-------------------------+---------+ | id | app_name | url | country | +----+------------+-------------------------+---------+ | 1 | QQ APP | http://im.qq.com/ | CN | | 2 | ÂæÆÂçö APP | http://weibo.com/ | CN | | 3 | Ê∑òÂÆù APP | https://www.taobao.com/ | CN | +----+------------+-------------------------+---------+ 3 rows in set (0.01 sec) -- Êõ¥Êñ∞Ë°®mylock2 -- Ê≠§Êó∂ Êõ¥Êñ∞Êìç‰ΩúÂ§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅ„ÄÇÈúÄË¶Å session1 ÈáäÊîæËØªÈîÅ mysql&gt; update mylock set name='b2' where id=2; ¬∑¬∑¬∑ -- 1 min 11.73 sec Ë°®ÊòéÊõ¥Êñ∞Êìç‰ΩúÁ≠âÂæÖÊó∂Èó¥ mysql&gt; update mylock set name='b2' where id=2; -- Query OK, 1 row affected (1 min 11.73 sec) -- Rows matched: 1 Changed: 1 Warnings: 0 -- Êü•ËØ¢ mysql&gt; select * from mylock; +----+------+ | id | name | +----+------+ | 1 | a1 | | 2 | b2 | | 3 | c | | 4 | d | | 5 | e | | 6 | f | | 7 | g | +----+------+ 7 rows in set (0.01 sec) ‰∏â: ÂÜôÈîÅÔºàwrite lockÔºâ session1 ÁªôË°® mylock Âä†ÂÜôÈîÅ 1234567891011121314151617181920212223242526-- Âä†ÂÜôÈîÅmysql&gt; lock table mylock write;-- ËØªÂèñ mylockmysql&gt; select * from mylock;+----+------+| id | name |+----+------+| 1 | a1 || 2 | b2 || 3 | c || 4 | d || 5 | e || 6 | f || 7 | g |+----+------+7 rows in set (0.00 sec)-- ‰øÆÊîπË°® mylockmysql&gt; update mylock set name='c3' where id=3;-- Query OK, 1 row affected (0.00 sec)-- Rows matched: 1 Changed: 1 Warnings: 0-- ËØªÂèñÂà´ÁöÑÊï∞ÊçÆË°®mysql&gt; select * from apps;-- ERROR 1100 (HY000): Table 'apps' was not locked with LOCK TABLES session2 123456789101112131415161718192021222324252627282930-- Êü•ËØ¢Âà´ÁöÑÊï∞ÊçÆË°®mysql&gt; select * from apps;+----+------------+-------------------------+---------+| id | app_name | url | country |+----+------------+-------------------------+---------+| 1 | QQ APP | http://im.qq.com/ | CN || 2 | weibo app | http://weibo.com/ | CN || 3 | Ê∑òÂÆù APP | https://www.taobao.com/ | CN |+----+------------+-------------------------+---------+3 rows in set (0.00 sec)-- Êü•ËØ¢Âä†‰∫ÜËØªÈîÅÁöÑ mylock Ë°®----Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅmysql&gt; select * from mylock;...-- session1 ÈáäÊîæÈîÅmysql&gt; select * from mylock;+----+------+| id | name |+----+------+| 1 | a1 || 2 | b2 || 3 | c3 || 4 | d || 5 | e || 6 | f || 7 | g |+----+------+7 rows in set (3 min 14.11 sec) Âõõ: MyISAM ÂØπË°®Êìç‰ΩúÁöÑ‰∏§‰∏≠ÊÉÖÂÜµ 1: ÂØπ MyISAM Ë°®ÁöÑ ËØª Êìç‰ΩúÔºàÂä†ËØªÈîÅÔºâÔºå‰∏ç‰ºöÈòªÂ°û ÂÖ∂‰ªñËøõÁ®ãÂØπÂêå‰∏ÄË°®ÁöÑ ËØªËØ∑Ê±ÇÔºå‰ΩÜ‰ºöÈòªÂ°û ÂØπÂêå‰∏ÄË°®ÁöÑ ÂÜôËØ∑Ê±Ç„ÄÇÂè™ÊúâÂΩìËØªÈîÅÈáäÊîæÂêéÔºåÊâç‰ºöÊâßË°åÂÖ∂‰ªñËøõÁ®ãÁöÑÊìç‰Ωú„ÄÇ 2: ÂØπ MyISAM Ë°®ÁöÑ ÂÜô Êìç‰ΩúÔºàÂä†ÂÜôÈîÅÔºâÔºå‰ºöÈòªÂ°û ÂÖ∂‰ªñËøõÁ®ãÂØπÂêå‰∏ÄË°®ÁöÑ ËØªÂíåÂÜôËØ∑Ê±ÇÔºå„ÄÅÂè™ÊúâÂΩìÂÜôÈîÅÈáäÊîæÂêéÔºåÊâç‰ºöÊâßË°åÂÖ∂‰ªñËøõÁ®ãÁöÑËØªÂÜôÊìç‰Ωú„ÄÇ 3: MyISAM ÁöÑËØªÂÜôÈîÅË∞ÉÂ∫¶ÊòØ ÂÜô‰ºòÂÖàÔºå‰∏çÈÄÇÂêàÂÅö ÂÜô‰∏∫‰∏ª ÁöÑË°®ÂºïÊìé„ÄÇÂõ†‰∏∫Âä†ÂÜôÈîÅÂêéÔºåÂÖ∂‰ªñÁ∫øÁ®ãÊó†Ê≥ïÂú®ËøõË°å‰ªª‰ΩïÊìç‰ΩúÔºåÂ§ßÈáèÁöÑÊõ¥Êñ∞ÂíåÊèíÂÖ•‰ºö‰ΩøÂæóÂæàÈöæËé∑ÂæóÂà∞ÈîÅÔºå‰ªéËÄåÈÄ†ÊàêÈòªÂ°û„ÄÇ ‰∫î: Ë°®ÈîÅÂÆöÁöÑÂàÜÊûêÂèØ‰ª•ÈÄöËøáÊ£ÄÊü• table_locks_waited Âíå tables_locks_immediate Áä∂ÊÄÅÂèòÈáèÊù•ÂàÜÊûêÁ≥ªÁªü‰∏äÁöÑË°®ÈîÅÂÆö 12345678mysql&gt; show status like '%table_locks%';+-----------------------+-------+| Variable_name | Value |+-----------------------+-------+| Table_locks_immediate | 127 || Table_locks_waited | 0 |+-----------------------+-------+2 rows in set (0.00 sec) Table_locks_immediate: ‰∫ßÁîüË°®Á∫ßÈîÅÂÆöÁöÑÊ¨°Êï∞ÔºåË°®Á§∫ÂèØ‰ª•Á´ãÂç≥Ëé∑ÂèñÈîÅÁöÑÊü•ËØ¢Ê¨°Êï∞ÔºåÊØèÁ´ãÂç≥Ëé∑ÂèñÈîÅÂÄºÂä† 1 Table_locks_waited: Âá∫Áé∞Ë°®Á∫ßÈîÅÂÆö‰∫âÁî®ËÄåÂèëÁîüÁ≠âÂæÖÁöÑÊ¨°Êï∞Ôºà‰∏çËÉΩÁ´ãÂç≥Ëé∑ÂèñÂà∞ÈîÅÁöÑÊ¨°Êï∞ÔºåÊ≤°Á≠âÂæÖ‰∏ÄÊ¨°ÈîÅÂÄºÂä†‰∏ÄÔºâÔºåÊ≠§ÂÄºÈ´òÂàôËØ¥ÊòéÂ≠òÂú®ËæÉ‰∏∫‰∏•ÈáçÁöÑË°®Á∫ßÈîÅ‰∫âÁî®ÁöÑÊÉÖÂÜµ„ÄÇ ÂÖ≠: Ë°åÈîÅÊï∞ÊçÆÂáÜÂ§á 123456789101112131415161718192021-- Âª∫Ë°®create table innodblock( a int, b varchar(16))engine=innoDB default character set utf8mb4;-- Êï∞ÊçÆÊèíÂÖ•insert into innodblock values(1,"b2"),(3,'3'),(4,'4000'),(5,'5000'),(6,'6000'),(7,'7000'),(8,'8000'),(9,'9000'),(10,'10000');-- ÂàõÂª∫Á¥¢Âºïcreate index idx_innodblock_a on innodblock(a);create index idx_innodblock_b on innodblock(b); Á¥¢ÂºïÂ§±Êïà‰ºöÂØºËá¥Ë°åÈîÅÂèòË°®ÈîÅüîê 1234567891011121314-- session1 bÂ≠óÊÆµ‰∏∫varcharÁ±ªÂûãÔºåÊ≠§Êó∂‰ºöÁ¥¢ÂºïÂ§±Êïàmysql&gt; update innodblock set a=41 where b=4004;-- Query OK, 0 rows affected (0.00 sec)-- Rows matched: 1 Changed: 0 Warnings: 0-- session2-- Ê≠§Êó∂Áî±‰∫ésession1ÁöÑÊõ¥Êñ∞È¢ÑËÆ°ÂØºËá¥‰∫ÜÁ¥¢ÂºïÂ§±ÊïàÔºåË°åÈîÅËΩ¨Êç¢‰∏∫Ë°®ÈîÅÔºåÂ¶Çsession1‰∏çcommit, Âàôsession2‰ºöÊèêÁ§∫ÈîÅË∂ÖÊó∂mysql&gt; update innodblock set b="9111" where a=9;ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction-- session1 ÊâßË°åcommitmysql&gt; update innodblock set b="9111" where a=9;Query OK, 1 row affected (3.70 sec)Rows matched: 1 Changed: 1 Warnings: 0 ‰∏É: Èó¥ÈöôÈîÅüîêÂΩì‰ΩøÁî®ËåÉÂõ¥Êù°‰ª∂ËÄå‰∏çÊòØÁõ∏Á≠âÊù°‰ª∂Ê£ÄÁ¥¢Êï∞ÊçÆÔºåÂπ∂ËØ∑Ê±ÇÂÖ±‰∫´ÈîÅÊàñÊéíÂÆÉÈîÅÊó∂ÔºåInnoDB‰ºöÁªôÁ¨¶ÂêàÊù°‰ª∂ÁöÑÂ∑≤ÊúâÊï∞ÊçÆËÆ∞ÂΩïÁöÑÁ¥¢ÂºïÈ°πÂä†ÈîÅÔºõÂØπ‰∫éÈîÆÂÄºÂú®ËåÉÂõ¥ÂÜÖ‰ΩÜÊòØÂπ∂‰∏çÂ≠òÂú®ÁöÑËÆ∞ÂΩïÔºåÂè´ÂÅö ‚ÄúÈó¥Èöô‚Äù Èó¥ÈöôÈîÅÁöÑÂç±ÂÆ≥: Âõ†‰∏∫QueryÂú®ÊâßË°åËøáÁ®ã‰∏≠ÈÄöËøáËåÉÂõ¥Êü•ÊâæÁöÑËØùÔºå‰ºöÈîÅÂÆöÊï¥‰∏™ËåÉÂõ¥ÂÜÖÁöÑÁ¥¢ÂºïÂÄºÔºåÂç≥ÊòØÂÖ∂‰∏≠ÁöÑÊüê‰∫õÈîÆÂÄºÂπ∂‰∏çÂ≠òÂú®„ÄÇÈó¥ÈöôÈîÅÊúâ‰∏Ä‰∏™ÊØîËæÉËá¥ÂëΩÁöÑÂº±ÁÇπÔºåÂ∞±ÊòØÂΩìÈîÅÂÆö‰∏Ä‰∏™ËåÉÂõ¥ÂÄºÂêéÔºåÂç≥‰ΩøÊüê‰∫õ‰∏çÂ≠òÂú®ÁöÑÈîÆÂÄºËÆ∞ÂΩï‰πü‰ºöË¢´Êó†ËæúÈîÅÂÆöÔºå‰ªéËÄåÈÄ†ÊàêÂú®ÈîÅÂÆöÁöÑÊó∂ÂÄôÊó†Ê≥ï ÊèíÂÖ• ÈîÆÂÄºËåÉÂõ¥ÂÜÖÁöÑ‰ªª‰ΩïÊï∞ÊçÆ„ÄÇ 12345678910111213141516171819202122232425-- Âú®session2 ‰∏≠Êü•ËØ¢Ë°®ÁöÑËÆ∞ÂΩï„ÄÇmysql&gt; select * from innodblock;+------+-------+| a | b |+------+-------+| 1 | b2 || 3 | 3 || 4 | 4004 || 5 | 5000 || 6 | 6000 || 7 | 7000 || 8 | 8000 || 9 | 9112 || 10 | 10000 |+------+-------+9 rows in set (0.00 sec)-- Êñ∞Â¢û‰∏ÄÊù° a=2 ÁöÑËÆ∞ÂΩïÔºåÂêåÊó∂Âú®seession1 ÊâßË°åÊõ¥Êñ∞ a&gt;1 and a&lt;6 ÁöÑÊìç‰Ωúmysql&gt; insert into innodblock values(2,"2000");Query OK, 1 row affected (0.00 sec)-- session1 Êõ¥Êñ∞Êìç‰ΩúÔºåÊ≠§Êó∂Â¶ÇÊûúsession2ÁöÑÊèíÂÖ•Êìç‰ΩúÊ≤°ÊúâÊâßË°åcommitÊìç‰ΩúÔºåsession1 ÁöÑÊõ¥Êñ∞Â∞±‰ºöÂ§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÁü•ÈÅìsession1 commit„ÄÇmysql&gt; update innodblock set b='20190901' where a&gt;1 and a&lt;6;Query OK, 4 rows affected (20.04 sec)Rows matched: 4 Changed: 4 Warnings: 0 ÂÖ´: Â¶Ç‰ΩïÈîÅÂÆö‰∏ÄË°å1234567mysql&gt; begin;mysql&gt; select * from innodblock where a = 8 for update;mysql&gt; ÂÖ∂‰ªñSQLÊìç‰Ωúmysq&gt; commit; ‰πù: Êü•ËØ¢Ë°åÈîÅüîêÁä∂ÊÄÅ1234567891011mysql&gt; show status like '%row_lock%';+-------------------------------+--------+| Variable_name | Value |+-------------------------------+--------+| Innodb_row_lock_current_waits | 0 || Innodb_row_lock_time | 134849 || Innodb_row_lock_time_avg | 26969 || Innodb_row_lock_time_max | 51044 || Innodb_row_lock_waits | 5 |+-------------------------------+--------+5 rows in set (0.00 sec) Innodb_row_lock_current_waits: ÂΩìÂâçÊ≠£Âú®Á≠âÂæÖÈîÅÂÆöÁöÑÊï∞Èáè„ÄÇ Innodb_row_lock_time: ‰ªéÁ≥ªÁªüÂêØÂä®Âà∞Áé∞Âú®ÈîÅÂÆöÁ≠âÂæÖÁöÑÊÄªÊó∂Èïø„ÄÇ Innodb_row_lock_time_avg: Á≠âÂæÖÁöÑÂπ≥ÂùáÊó∂Èïø„ÄÇ Innodb_row_lock_waits: Á≥ªÁªüÂêØÂä®ÂêéÂà∞Áé∞Âú® Á≠âÂæÖÁöÑÊÄªÊ¨°Êï∞„ÄÇ 10: ÈîÅÁöÑ‰ºòÂåñÂª∫ËÆÆ Á´üÂèØËÉΩËÆ©ÊâÄÊúâÊï∞ÊçÆÊ£ÄÁ¥¢ÈÉΩÈÄöËøáÁ¥¢ÂºïÊù•ÂÆåÊàêÔºåÈÅøÂÖçË°åÈîÅÂçáÁ∫ß‰∏∫Ë°®ÈîÅ ÂêàÁêÜËÆæËÆ°Á¥¢ÂºïÔºåÂ∞ΩÈáèÁº©Â∞èÈîÅÁöÑËåÉÂõ¥ÔºàÈó¥ÈöôÈîÅÔºâ„ÄÇ Â∞ΩÂèØËÉΩÂáèÂ∞ëÊ£ÄÁ¥¢Êù°‰ª∂ÔºåÈÅøÂÖçÈó¥ÈöôÈîÅ„ÄÇ ÊéßÂà∂‰∫ãÂä°Â§ßÂ∞èÔºåÂáèÂ∞ëÈîÅÂÆöÁöÑËµÑÊ∫êÈáèÂíåÊó∂Èó¥ÈïøÂ∫¶„ÄÇ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL‰πã‰ΩøÁî®show-profilingËøõË°åsqlÂàÜÊûê]]></title>
    <url>%2F2019%2F08%2F31%2FMySQL%E4%B9%8B%E4%BD%BF%E7%94%A8show-profile%E8%BF%9B%E8%A1%8Csql%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: show profiling ÊòØMySQLÊèê‰æõÁöÑÂèØ‰ª•Áî®Êù•ÂàÜÊûê ÂΩìÂâç‰ºöËØù‰∏≠sqlËØ≠Âè• ÊâßË°åÊ∂àËÄóËµÑÊ∫êÊÉÖÂÜµÁöÑÂ∑•ÂÖ∑„ÄÇ 1: Êü•Áúã MySQL ÊúçÂä°Âô® profiling ÈÖçÁΩÆ‰ø°ÊÅØÂπ∂ÂºÄÂêØ 12345678910111213-- Êü•Áúãmysql&gt; show variables like '%profiling%';+------------------------+-------+| Variable_name | Value |+------------------------+-------+| have_profiling | YES || profiling | OFF || profiling_history_size | 15 |+------------------------+-------+3 rows in set (0.00 sec)-- ÂºÄÂêØmysql&gt; set profiling = on; 2: ‰ΩøÁî® show profiles Êü•ÁúãÊúÄËøëÊâßË°åSQLËØ≠Âè•ÁöÑËÄóÊó∂ÊÉÖÂÜµ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455mysql&gt; show profiles;+----------+------------+------------------------------------------------------------+| Query_ID | Duration | Query |+----------+------------+------------------------------------------------------------+| 22 | 1.33266500 | select * from employee where employee_name like 'axla%' || 23 | 1.34147675 | select * from employee where employee_name like 'axlx%' || 24 | 1.33172000 | select * from employee where employee_name like 'axl;%' || 25 | 1.33968575 | select * from employee where employee_name like 'axll%' || 26 | 1.30903325 | select * from employee where employee_name like 'axllz%' || 27 | 1.33119175 | select * from employee where employee_name like 'axllz0%' || 28 | 1.37719575 | select * from employee where employee_name like 'axllzo%' || 29 | 0.00008650 | show profiles for query 22 || 30 | 0.00017425 | show profiles cpu.block for query 22 || 31 | 0.00006300 | show profiles cpu,block io for query 22 || 32 | 0.00007200 | show profiles cpu for query 22 || 33 | 0.00006825 | show profiling cpu for query 22 || 34 | 0.00006525 | show profiles cpu for query 22 || 35 | 0.00007450 | show profiling cpu for query 22 || 36 | 6.57003650 | select * from employee |+----------+------------+------------------------------------------------------------+15 rows in set, 1 warning (0.05 sec)-- Êü•ÁúãÊüê‰∏ÄÊù°SQLËØ≠Âè•ÂÖ∑‰ΩìÊâßË°åËÄóÊó∂ÊÉÖÂÜµmysql&gt; show profile cpu,block io for query 36;+----------------------+----------+----------+------------+--------------+---------------+| Status | Duration | CPU_user | CPU_system | Block_ops_in | Block_ops_out |+----------------------+----------+----------+------------+--------------+---------------+| starting | 0.000090 | 0.000083 | 0.000007 | 0 | 0 || checking permissions | 0.000013 | 0.000010 | 0.000001 | 0 | 0 || Opening tables | 0.000019 | 0.000018 | 0.000002 | 0 | 0 || init | 0.000023 | 0.000020 | 0.000002 | 0 | 0 || System lock | 0.000010 | 0.000010 | 0.000001 | 0 | 0 || optimizing | 0.000005 | 0.000004 | 0.000000 | 0 | 0 || statistics | 0.000016 | 0.000015 | 0.000001 | 0 | 0 || preparing | 0.000046 | 0.000042 | 0.000004 | 0 | 0 || executing | 0.000005 | 0.000004 | 0.000001 | 0 | 0 || Sending data | 6.471989 | 5.454445 | 0.405826 | 132832 | 0 || end | 0.020849 | 0.000872 | 0.000079 | 984 | 0 || query end | 0.013094 | 0.000000 | 0.000795 | 1136 | 0 || closing tables | 0.001540 | 0.000000 | 0.000364 | 632 | 0 || freeing items | 0.002086 | 0.000000 | 0.000471 | 1008 | 0 || logging slow query | 0.056165 | 0.000000 | 0.005052 | 1568 | 8 || cleaning up | 0.004088 | 0.000000 | 0.000771 | 992 | 0 |+----------------------+----------+----------+------------+--------------+---------------+16 rows in set, 1 warning (0.07 sec)-- Â¶ÇÊûú‰∏äÈù¢ÁöÑstatus ‰∏≠Âá∫Áé∞‰ª•‰∏ãÂõõÁßçÊÉÖÂÜµË°®ÊòéÈúÄË¶Å‰ºòÂåñ‚ùåÔºå- 1Ôºöconverting HEAP to MyISAMÔºàÊü•ËØ¢ÁªìÊûúÂ§™Â§ßÔºåÂÜÖÂ≠ò‰∏çÂ§üÁî®ÔºåÈúÄË¶ÅÂæÄÁ£ÅÁõò‰∏äÊê¨ËøêÔºâ- 2Ôºöcreate tmp table (ÂàõÂª∫‰∏¥Êó∂Ë°®„ÄêÂÖàÊã∑Ë¥ùÊï∞ÊçÆÂà∞‰∏¥Êó∂Ë°®ÔºåÁî®ÂÆå‰∏¥Êó∂Ë°®Êï∞ÊçÆÂêéÂà†Èô§„Äë)- 3ÔºöCopying to tmp table to dis (ÊääÂÜÖÂ≠ò‰∏≠‰∏¥Êó∂Ë°®Â§çÂà∂Âà∞Á£ÅÁõòÔºåÂç±Èô©‚ùå)- 4Ôºölocked (ÈîÅÂÆö‰∫Üüîê) 3: show profile ÂêéÂèØË∑üÂèÇÊï∞Á±ªÂûã Á±ªÂûã ËØ¥Êòé all ÊòæÁ§∫ÊâÄÊúâÂºÄÈîÄ‰ø°ÊÅØ block io ÊòæÁ§∫ÂùóIOÂºÄÈîÄÁõ∏ÂÖ≥ context switch ‰∏ä‰∏ãÂçàÂàáÊç¢Áõ∏ÂÖ≥ÂºÄÈîÄ cpu ÊòæÁ§∫cpuÂºÄÈîÄ‰ø°ÊÅØ ipc ÊòæÁ§∫ÂèëÈÄÅÂíåÊé•Êî∂Áõ∏ÂÖ≥ÂºÄÈîÄ‰ø°ÊÅØ memory ÊòæÁ§∫ÂÜÖÂ≠òÁõ∏ÂÖ≥ÂºÄÈîÄ‰ø°ÊÅØ page fault ÊòæÁ§∫È°µÈù¢ÈîôËØØ‚ùéÁõ∏ÂÖ≥ÂºÄÈîÄ‰ø°ÊÅØ source ÊòæÁ§∫sourceÁõ∏ÂÖ≥ÂºÄÈîÄ‰ø°ÊÅØ swaps ÊòæÁ§∫‰∫§Êç¢Ê¨°Êï∞Áõ∏ÂÖ≥ÂºÄÈîÄ‰ø°ÊÅØ 4: ÂÖ®Â±ÄÊü•ËØ¢Êó•Âøó, ‚ùåÊ≥®ÊÑè‚ùåÔºöÔºà‰∏çÂèØÂú®Áîü‰∫ßÁéØÂ¢É‰ΩøÁî®Ôºâ 12345678mysql&gt; show variables like '%general%';+------------------+----------------------------+| Variable_name | Value |+------------------+----------------------------+| general_log | OFF || general_log_file | /var/lib/mysql/inscode.log |+------------------+----------------------------+2 rows in set (0.07 sec) Âú® my.cnf ‰∏≠ÂºÄÂêØÂÖ®Â±ÄÊó•Âøó 12general_log = 1general_log_file = /var/log/mysql/mysql-general-log.log Á¨îËÆ∞ËÆ∞ÂΩïÊù•Ê∫ê MySQLÈ´òÁ∫ß_2Áî®Show ProfileËøõË°åsqlÂàÜÊûê]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL‰ΩøÁî®ÂáΩÊï∞ÂíåÂ≠òÂÇ®ËøáÁ®ãÊâπÈáèÊèíÂÖ•Êï∞ÊçÆ]]></title>
    <url>%2F2019%2F08%2F30%2FMySQL%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E5%92%8C%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: Âú® MySQL ‰ºòÂåñÂ≠¶‰π†‰∏≠ÔºåÊàë‰ª¨ÈÄöÂ∏∏ÈúÄË¶Å‰ΩøÁî®Âà∞ÂçÅ‰∏áÈáèÁ∫ßÁîöËá≥ÊòØÁôæ‰∏áÈáèÁ∫ßÁöÑÊï∞ÊçÆË°®Êù•ÂéªÂØπÊØîÁ¥¢Âºï‰ºòÂåñÂâçÂêéÁöÑSQLÊÄßËÉΩË°®Áé∞„ÄÇÈÇ£‰πàÊÄé‰πàÂéªËé∑ÂèñÂà∞Êã•ÊúâËøô‰∏™Êï∞ÈáèÁ∫ßÁöÑÊï∞ÊçÆË°®Âë¢ÔºüÁ≠îÊ°à‰πã‰∏ÄÊòØ‰ΩøÁî®Â≠òÂÇ®ËøáÁ®ãÂæÄË°®‰∏≠ÊâπÈáèÂØºÂÖ•Êï∞ÊçÆ„ÄÇ‰∏ãÈù¢Êù•ÂÆû‰æãÊºîÁ§∫‰∏Ä‰∏™ÊâπÈáèÂØºÂÖ•Êï∞ÊçÆË°®ÁöÑÊ°à‰æãÔºåËÆ∞ÂΩïÂ∑≤Ë¢´Êó•ÂêéÊü•ÈòÖ„ÄÇ 1ÔºöÂàõÂª∫Êï∞ÊçÆÂ∫ìÂèäÊï∞ÊçÆË°® 12345678910111213141516171819202122-- ÂàõÂª∫Êï∞ÊçÆÂ∫ìcreate database data_demo default character set utf8mb4;--ÂàõÂª∫ÈÉ®Èó®Ë°®create table department( id int unsigned primary key auto_increment comment '‰∏ªÈîÆ', dept_no int unsigned not null default 0 comment 'ÈÉ®Èó®ÁºñÂè∑', dept_name varchar(20) not null default '' comment 'ÈÉ®Èó®ÂêçÁß∞', location varchar(13) not null default '' comment 'ÈÉ®Èó®‰ΩçÁΩÆ')engine = innodb default character set utf8mb4 comment 'ÈÉ®Èó®‰ø°ÊÅØË°®';-- ÂàõÂª∫ÂëòÂ∑•‰ø°ÊÅØË°®create table employee( id int unsigned primary key auto_increment comment '‰∏ªÈîÆ', employee_no int unsigned not null default 0 comment 'ÂëòÂ∑•ÁºñÂè∑', employee_name varchar(20) not null default '' comment 'ÂëòÂ∑•ÂêçÁß∞', job varchar(9) not null default '' comment 'Â∑•‰Ωú', manager int not null default 0 comment '‰∏äÁ∫ßÈ¢ÜÂØº', hiredate timestamp not null default CURRENT_TIMESTAMP comment 'ÂÖ•ËÅåÊó∂Èó¥', salary float(7,2) not null comment 'Ëñ™Ê∞¥', dept_no int unsigned not null default 0 comment 'ÈÉ®Èó®ÁºñÂè∑')engine = innodb default character set utf8mb4 comment 'ÂëòÂ∑•‰ø°ÊÅØË°®'; 2: ÂàõÂª∫ ÈöèÊú∫Â≠óÁ¨¶ÁîüÊàê ÂáΩÊï∞ 123456789101112delimiter $$create function rand_string(n int) returns varchar(255)begin declare chars_str varchar(100) default 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'; declare return_str varchar(255) default ''; declare i int default 0; while i &lt; n do set return_str = concat(return_str, substring(chars_str, floor(1 + rand() * 52), 1)); set i = i + 1; end while; return return_str;end $$ 3: ÂàõÂª∫ ÈöèÊú∫Êï∞ÂÄºÁîüÊàê ÂáΩÊï∞ 1234567delimiter $$create function rand_num() returns int(5)begin declare i int default 0; set i = floor(100 + rand() * 10); return i;end $$ Âà†Èô§ÂáΩÊï∞ÂëΩ‰ª§Ôºödrop function funcName; 4: ÂàõÂª∫ ÂëòÂ∑•Êï∞ÊçÆÊèíÂÖ• Â≠òÂÇ®ËøáÁ®ã 123456789101112delimiter $$create procedure insert_employee(in start int(10), in max_num int(10))begin declare i int default 0; set autocommit=0; repeat set i = i + 1; insert into employee(employee_no, employee_name, job, manager, hiredate, salary, dept_no) values((start+i), rand_string(6), 'saleman', 0001 ,curdate(), 24000,rand_num()); until i = max_num end repeat; commit;end $$ 4: ÂàõÂª∫ ÈÉ®Èó®Êï∞ÊçÆÊèíÂÖ• Â≠òÂÇ®ËøáÁ®ã 123456789101112delimiter $$create procedure insert_department(in start int(10), in max_num int(10))begin declare i int default 0; set autocommit=0; repeat set i = i + 1; insert into department(dept_no,dept_name,location) values((start+i),rand_string(10),rand_string(8)); until i = max_num end repeat; commit;end $$ Âà†Èô§Â≠òÂÇ®ËøáÁ®ãÂëΩ‰ª§Ôºödrop procedure procedureName; 5: Ë∞ÉÁî®Â≠òÂÇ®ËøáÁ®ãÊèíÂÖ•Êï∞ÊçÆ 12345delimiter ;-- ÈÉ®Èó®Âè∑‰ªé100ÂºÄÂßãÊèíÂÖ•10Êù°ËÆ∞ÂΩïcall insert_department(100,10);call insert_employee(1,5000000); 6: Êü•ÁúãÊï∞ÊçÆ 1234567891011121314151617181920212223242526-- ÈÉ®Èó®Ë°®mysql&gt; select * from department;+----+---------+------------+----------+| id | dept_no | dept_name | location |+----+---------+------------+----------+| 1 | 101 | VPoajUVSCi | kBdJmjhi || 2 | 102 | uylHDUPnUM | aOWpIyqk || 3 | 103 | cIjWdCCdKo | pHsPXqOY || 4 | 104 | yxRPzeVrVE | lqVFqNSZ || 5 | 105 | sPYywNAoUD | ihjzUcAx || 6 | 106 | KiKaZTxGOa | IrJwdcen || 7 | 107 | anqQeYEasK | vZLGZewV || 8 | 108 | pMQSSIMKop | JzuznRuy || 9 | 109 | lGBKWEgSXh | TYjaAyUZ || 10 | 110 | pDTLXGoyDw | yZFbrEWW |+----+---------+------------+----------+10 rows in set (0.02 sec)--ÂëòÂ∑•Ë°®mysql&gt; select count(*) from employee;+----------+| count(*) |+----------+| 5000000 |+----------+1 row in set (7.78 sec) 7: Êúâ‰∫ÜËøô‰∫õÊï∞ÊçÆÂêéÂ∞±Èòî‰ª•Êõ¥Âø´‰πêÁöÑÂ≠¶‰π†SQLÁõ∏ÂÖ≥Áü•ËØÜÁÇπ‰∫Üüòúüòúüòú]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL‰ºòÂåñ‰πãÊÖ¢Êü•ËØ¢Êó•Âøó]]></title>
    <url>%2F2019%2F08%2F28%2FMySQL%E4%BC%98%E5%8C%96%E4%B9%8B%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢Ôºö MySQL ÁöÑÊÖ¢Êü•ËØ¢Êó•ÂøóÊòØ MySQL Êèê‰æõÁöÑ‰∏ÄÁßçÊó•ÂøóËÆ∞ÂΩïÔºåÁî®‰∫éËÆ∞ÂΩïÂú® MySQL ‰∏≠ÂìçÂ∫îÊó∂Èó¥Ë∂ÖËøáÈòàÂÄºÁöÑËØ≠Âè•„ÄÇÂç≥ÊòØÊåá ‚òû Â¶ÇÊûúËøêË°åÊó∂Èó¥Ë∂ÖËøáÈÖçÁΩÆ long_query_time ÂÄºÁöÑ SQL ËØ≠Âè•ÔºåÂàô‰ºöË¢´ËÆ∞ÂΩïÂà∞ÊÖ¢Êü•ËØ¢Êó•Âøó‰∏≠„ÄÇ 1ÔºöÊü•Áúã MySQL ÊúçÂä°Âô®ÈªòËÆ§ÈÖçÁΩÆÁöÑ long_query_time ÂÄº 12345678910111213141516171819202122232425262728mysql&gt; show variables like 'long_query_time';+-----------------+-----------+| Variable_name | Value |+-----------------+-----------+| long_query_time | 10.000000 |+-----------------+-----------+1 row in set (0.00 sec)``` 2ÔºöÊü•ÁúãÂèäÂºÄÂêØ **ÊÖ¢Êü•ËØ¢** Êó•Âøó‰ø°ÊÅØ- MySQLÊúçÂä°Âô®ÈÖçÁΩÆÊñá‰ª∂ËØ¶ËßÅ [MySQL 5.7.21-1ÈÖçÁΩÆÊñá‰ª∂my.cnf](https://inscode.github.io/2019/08/15/MySQL-5-7-21-1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6my-cnf/)```SQL-- Êü•Áúãmysql&gt; show variables like '%slow_query%';+---------------------+---------------------------------+| Variable_name | Value |+---------------------+---------------------------------+| slow_query_log | OFF || slow_query_log_file | /var/lib/mysql/inscode-slow.log |+---------------------+---------------------------------+2 rows in set (0.00 sec)-- ‰øÆÊîπ slow_query_log Áõ∏ÂÖ≥ÈÖçÁΩÆÔºåÁÑ∂ÂêéÈáçÂêØ MySQLslow_query_log = 1slow_query_log_file = /var/log/mysql/mysql-slow.log 3ÔºöÊçïËé∑ÊÖ¢Êü•ËØ¢Êó•Âøó 123456789101112131415root@inscode:/var/log/mysql&gt; tail -f mysql-slow.log# Time: 2019-08-28T15:08:48.983829Z --SQLÊâßË°åÊó∂Èó¥# User@Host: root[root] @ localhost [] Id: 2 --ÊâßË°åsqlÁöÑË¥¶Êà∑ÂèäËøûÊé•‰ø°ÊÅØ-- sqlÊâßË°åÊó∂Èïø --ÈîÅüîêÊó∂Èïø --ËøîÂõûÁöÑËÆ∞ÂΩïÊï∞ --Êü•ËØ¢Ê£ÄÊü•ÁöÑË°åÊï∞Ôºà‰∏∫‰ªÄ‰πàËøô‰∏™ÂÄº‰ºöÂ§ß‰∫éËØ•Ë°®ÁöÑÊÄªËÆ∞ÂΩïÊï∞Âë¢Ôºüü§îü§îü§îÔºâ# Query_time: 0.288241 Lock_time: 0.000526 Rows_sent: 204846 Rows_examined: 504870SET timestamp=1567004928; --Êó∂Èó¥Êà≥ 2019-08-28 23:08:48-- Ë∂ÖËøáMySQLÊúçÂä°Âô® long_query_time Êó∂ÈïøÁöÑsqlËØ≠Âè•select * from employees where birth_date&gt;'1950' and first_name like '%e%' or last_name like '%a%' and hire_date&gt;'1986' order by birth_date desc, last_name asc, hire_date desc;# Time: 2019-08-28T15:08:56.678322Z# User@Host: root[root] @ localhost [] Id: 2# Query_time: 0.287522 Lock_time: 0.000226 Rows_sent: 204846 Rows_examined: 504870SET timestamp=1567004936;select * from employees where birth_date&gt;'1950' and first_name like '%e%' or last_name like '%a%' and hire_date&gt;'1986' order by birth_date desc, last_name asc; 4Ôºö mysqldumpslow ÁöÑ‰ΩøÁî® 12345678910111213141516171819202122232425262728root@inscode:/etc/mysql/mysql.conf.d&gt; mysqldumpslow --helpUsage: mysqldumpslow [ OPTS... ] [ LOGS... ]Parse and summarize the MySQL slow query log. Options are --verbose verbose --debug debug --help write this text to standard output -v verbose -d debug -s ORDER what to sort by (al, at, ar, c, l, r, t), &apos;at&apos; is default al: average lock time //ËØÑËÆ∫ÈîÅÂÆöÊó∂Èó¥ ar: average rows sent //ËØÑËÆ∫ËøîÂõûÊó∂Èó¥ at: average query time //Âπ≥ÂùáÊâßË°åÊó∂Èó¥ c: count //ËÆøÈóÆÊ¨°Êï∞ l: lock time //ÈîÅÂÆöÊó∂Èó¥ r: rows sent //ËøîÂõûÁöÑËÆ∞ÂΩïË°åÊï∞ t: query time //Êü•ËØ¢Êó∂Èó¥ -r reverse the sort order (largest last instead of first) -t NUM just show the top n queries -a don&apos;t abstract all numbers to N and strings to &apos;S&apos; -n NUM abstract numbers with at least n digits within names -g PATTERN grep: only consider stmts that include this string -h HOSTNAME hostname of db server for *-slow.log filename (can be wildcard), default is &apos;*&apos;, i.e. match all -i NAME name of server instance (if using mysql.server startup script) -l don&apos;t subtract lock time from total time Ëé∑Âèñ ËøîÂõûËÆ∞ÂΩïÁªìÊûúÈõÜÊúÄÂ§öÁöÑ10‰∏™sqlËØ≠Âè• 1mysqldumpslow -s r -t 10 /var/log/mysql/mysql-slow.log Ëé∑Âèñ ËÆøÈóÆÊ¨°Êï∞ÊúÄÂ§öÁöÑ10‰∏™sqlËØ≠Âè• 1mysqldumpslow -s c -t 10 /var/log/mysql/mysql-slow.log Ëé∑Âèñ ÊåâÁÖßÊó∂Èó¥ÊéíÂ∫èÁöÑÂâç10Êù°‰∏≠Âê´Êúâ ‚ÄúÂ∑¶ËøûÊé•‚Äù ÁöÑÊü•ËØ¢ËØ≠Âè• 123mysqldumpslow -s t -t 10 -g|"left join" /var/log/mysql/mysql-slow.log-- ‰ΩøÁî®more Èò≤Ê≠¢ ÁàÜÂ±èmysqldumpslow -s t -t 10 -g|"left join" /var/log/mysql/mysql-slow.log | more]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL‰ºòÂåñ‰πãorderBy‰ºòÂåñ]]></title>
    <url>%2F2019%2F08%2F27%2FMySQL%E4%BC%98%E5%8C%96%E4%B9%8BorderBy%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢Ôºöorder by Â≠óÂè•Â∫îËØ•Â∞ΩÈáè‰ΩøÁî® Index ÊñπÂºèÊéíÂ∫èÔºåÈÅøÂÖç‰ΩøÁî® Filesort ÊñπÂºèÊéíÂ∫è„ÄÇ 1Ôºö MySQLÊîØÊåÅ‰∏§ÁßçÊñπÂºèÁöÑÊéíÂ∫è: Filesort Âíå Index„ÄÇIndex ÊïàÁéáÈ´òÔºåÂõ†‰∏∫MySQLÊâ´ÊèèÊú¨Ë∫´Â∞±ËÉΩÂÆåÊàêÊéíÂ∫è„ÄÇFilesort ÊñπÂºèÊïàÁéáËæÉ‰ΩéÔºåÂõ†‰∏∫ÂÆÉÈúÄË¶ÅÁöÑÁ¥¢ÂºïÁöÑÂü∫Á°Ä‰∏äÂÜçÊ¨°ÊéíÂ∫è„ÄÇ 2Ôºö order by Êª°Ë∂≥‰∏§ÁßçÊÉÖÂÜµÊó∂‰ºö‰ΩøÁî® Index ÊñπÂºèÊéíÂ∫è ‰ΩøÁî® ORDER BY ËØ≠Âè•‰ΩøÁî® Á¥¢ÂºïÊúÄÂ∑¶ÂâçÂàó ‰ΩøÁî® Where Â≠óÂè•Âíå Order by Â≠óÂè•ÁöÑÊù°‰ª∂ÂàóÁªÑÂêàÊª°Ë∂≥ Á¥¢ÂºïÊúÄÂ∑¶ÂâçÂàó 1explain select * from tableA where age&gt;20 order by birth; 3ÔºöÂ¶ÇÊûú order by ÂêéÁöÑÂ≠óÊÆµÊ≤°ÊúâÂú®Á¥¢ÂºïÂàó‰∏äÔºå‰ºö‰∫ßÁîü Filesort„ÄÇFilesort Êúâ‰∏§ÁßçÁÆóÊ≥ïÔºöÂçïË∑ØÊéíÂ∫è Âíå ÂèåË∑ØÊéíÂ∫è„ÄÇ ÂèåË∑ØÊéíÂ∫èÔºöÊâ´ÊèèÁ£ÅÁõò‰∏§Ê¨°ÔºåÊúÄÁªàÂæóÂà∞Êï∞ÊçÆ„ÄÇ„Äê‰∏§Ê¨°I/O„Äë ‰ªéÁ£ÅÁõòÂèñÂá∫ÊéíÂ∫èÂ≠óÊÆµÔºåÂú®buffer‰∏≠ËøõË°åÊéíÂ∫èÔºåÂÜç‰ªéÁ£ÅÁõòÂèñÂÖ∂‰ªñÂ≠óÊÆµ„ÄÇ ÂçïË∑ØÊéíÂ∫èÔºö ‰ªéÁ£ÅÁõòËØªÂèñÊü•ËØ¢ÊâÄÈúÄË¶ÅÁöÑ ÊâÄÊúâÂàóÔºåÊåâÁÖß order by ÊåáÂÆöÁöÑÂàóÂú® buffer ÂØπÂÆÉ‰ª¨ËøõË°åÊéíÂ∫èÔºåÁÑ∂ÂêéÊâ´ÊèèÊéíÂ∫èÂêéÁöÑÂàóËøõË°åËæìÂá∫„ÄÇÂçïË∑ØÊéíÂ∫èÁöÑÊïàÁéáÊõ¥Âø´‰∏Ä‰∫õÔºåÂÆÉÈÅøÂÖç‰∫ÜÁ¨¨‰∫åÊ¨°ËØªÂèñÊï∞ÊçÆ„ÄÇÂπ∂‰∏îÊää ÈöèÊú∫IO ÂèòÊàê‰∫Ü È°∫Â∫èIO„ÄÇ‰ΩÜÊòØ‰ºöÂ∏¶Êù•‰ΩøÁî®Êõ¥Â§öÁöÑÁ©∫Èó¥ÔºåÂõ†‰∏∫‰ªñÊääÊØè‰∏ÄË°åÈÉΩ‰øùÂ≠òÂú®ÂÜÖÂ≠ò‰∏≠„ÄÇ ÂçïË∑ØÊéíÂ∫èÁÆóÊ≥ïÂ§±ÊïàÔºöÂèñÂá∫ÁöÑÊâÄÊúâÂàóÁöÑÂ§ßÂ∞èË∂ÖËøá‰∫Ü sort_buffer_size ÁöÑÂÆπÈáèÔºåÂØºËá¥ÂÆûÈôÖ‰∏äÊØèÊ¨°Âè™ËÉΩÊåâÁÖß sort_buffer_size ÁöÑÂ§ßÂ∞èÂèñÊï∞ÊçÆËøõË°åÊéíÂ∫èÔºåÊãçÂÆåÂ∫èÂêéÂÜçÂèñ sort_buffer_size ÂÆπÈáèÂ§ßÂ∞èÁöÑÊï∞ÊçÆÔºåÂú®ÊéíÂ∫è‚Ä¶.Â¶ÇÊ≠§ÂæÄÂ§çÔºå‰ªéËÄåÂ§öÊ¨° I/O ‰ºòÂåñÁ≠ñÁï•Ôºö„ÄêË∞ÉÊï¥ sort_buffer_size ÂèÇÊï∞ÁöÑÂÄº„Äë„ÄêË∞ÉÊï¥max_length_for_sort_data ÂèÇÊï∞ÁöÑÂÄº„Äë 4Ôºö‰ΩøÁî® order by ÁöÑ‰∏Ä‰∫õ‰ºòÂåñÁ≠ñÁï• 1Ôºöorder by Êó∂ select *ÊòØ‰∏çÂ§™Â•ΩÁöÑÂ∑•Á®ãÂÆûË∑µ„ÄÇÂ∫îËØ•Âè™Êü•ËØ¢ÈúÄË¶ÅÁöÑÂ≠óÊÆµ„ÄÇ ÂéüÂõ†1ÔºöÂΩìÊü•ËØ¢ÁöÑÂ≠êÂºπÂ§ßÂ∞èÊÄªÂíåÂ∞è‰∫é max_length_for_sort_data Âπ∂Ê≤°ÊéíÂ∫èÁöÑÂ≠óÊÆµ‰∏çÊòØ text || bolb Á±ªÂûãÊó∂Ôºå‰ºö‰ΩøÁî®ÂçïË∑ØÊéíÂ∫èÁÆóÊ≥ïÔºåÂê¶Âàô‰ºö‰ΩøÁî®Â§öË∑ØÊéíÂ∫èÁÆóÊ≥ï ÂéüÂõ†2Ôºö‰∏§ÁßçÊéíÂ∫èÁÆóÊ≥ïÁöÑÊï∞ÊçÆÈÉΩÊúâÂèØËÉΩË∂ÖËøá sort_buffer_size ÁöÑÂÆπÈáèÔºåË∂ÖÂá∫‰πãÂêéÔºå‰ºöÂàõÂª∫ tmp Êñá‰ª∂ËøõË°åÂêàÂπ∂Ôºå‰ªéËÄåÂØºËá¥Â§öÊ¨° I/0„ÄÇËÄå‰ΩøÁî®ÂçïË∑ØÊéíÂ∫èÁÆóÊ≥ïÂá∫Áé∞ÁöÑÊ¶ÇÁéáÊõ¥Â§ö‰∏Ä‰∫õÔºåÊâÄ‰ª•Ë¶ÅÂ¢ûÂä† sort_buffer_size ÂÄºÂ§ßÂ∞è„ÄÇ 2ÔºöÂ∞ùËØïÊèêÈ´ò sort_buffer_size ÂèÇÊï∞ÁöÑÂÄº 3ÔºöÂ∞ùËØïÊèêÈ´ò max_length_for_sort_data ÂèÇÊï∞ÁöÑÂÄº Êï∞ÊçÆÂáÜÂ§á 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758-- Âª∫Ë°®ËØ≠Âè•create table tableA( id int primary key not null auto_increment, age int, birth timestamp not null)default character set utf8mb4;-- Êï∞ÊçÆÊèíÂÖ•insert into tableA(age, birth) values(22, NOW());insert into tableA(age, birth) values(23, NOW());insert into tableA(age, birth) values(24, NOW());insert into tableA(age, birth) values(25, NOW());insert into tableA(age, birth) values(26, NOW());insert into tableA(age, birth) values(27, NOW());-- Âª∫Á´ãÁªÑÂêàÁ¥¢Âºïcreate index idx_ageBirth on tableA(age,birth);-- order byÊéíÂ∫èÂ≠óÊÆµÈ°∫Â∫èÂíåÁ¥¢ÂºïÂ≠óÊÆµÈ°∫Â∫è‰∏ÄËá¥Ôºå‰∏ç‰ºö‰∫ßÁîüÊñá‰ª∂ÊéíÂ∫èmysql&gt; explain select * from tableA where age&gt;20 order by age,birth;+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+--------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+--------------------------+| 1 | SIMPLE | tableA | NULL | index | idx_ageBirth | idx_ageBirth | 9 | NULL | 6 | 100.00 | Using where; Using index |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+--------------------------+-- order byÊéíÂ∫èÂ≠óÊÆµÈ°∫Â∫èÂíåÁ¥¢ÂºïÁöÑÈ°∫Â∫è‰∏ç‰∏ÄËá¥ÔºåÂõ†Ê≠§‰ºö‰∫ßÁîüÊñá‰ª∂ÊéíÂ∫è„ÄÇmysql&gt; explain select * from tableA where age&gt;20 order by birth;+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+| 1 | SIMPLE | tableA | NULL | index | idx_ageBirth | idx_ageBirth | 9 | NULL | 6 | 100.00 | Using where; Using index; Using filesort |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+-- order byÊéíÂ∫èÂ≠óÊÆµÈ°∫Â∫èÂíåÁ¥¢ÂºïÁöÑÈ°∫Â∫è‰∏ç‰∏ÄËá¥ÔºåÂõ†Ê≠§‰ºö‰∫ßÁîüÊñá‰ª∂ÊéíÂ∫è„ÄÇmysql&gt; explain select * from tableA where age&gt;20 order by birth,age;+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+| 1 | SIMPLE | tableA | NULL | index | idx_ageBirth | idx_ageBirth | 9 | NULL | 6 | 100.00 | Using where; Using index; Using filesort |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+-- order byÂêé‰∏çÊòØÂêåÂçáÂêåÈôçÈÉΩ‰ºö‰ΩøÁî®Âà∞Êñá‰ª∂ÊéíÂ∫è Filesort-- Á¥¢ÂºïÊòØÊéíÂ•ΩÂ∫èÁöÑÂø´ÈÄüÊü•ÊâæÊï∞ÊçÆÁªìÊûÑÔºå‰∏çÊåâÁÖßÂ∑≤ÁªèÊéíÂ∫èÁöÑËßÑÂàôÂéªËé∑ÂèñÊï∞ÊçÆ‰ºö‰∫ßÁîüÊñá‰ª∂ÂÜÖÊéíÂ∫èmysql&gt; explain select age,birth from tableA where birth&gt;"2019-08-27 21:52:08" order by age desc,birth asc;+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+| 1 | SIMPLE | tableA | NULL | index | NULL | idx_ageBirth | 9 | NULL | 6 | 33.33 | Using where; Using index; Using filesort |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+-- order byÂêé‰∏çÊòØÂêåÂçáÂêåÈôçÈÉΩ‰ºö‰ΩøÁî®Âà∞Êñá‰ª∂ÊéíÂ∫è Filesortmysql&gt; explain select age,birth from tableA where birth&gt;"2019-08-27 21:52:08" order by age asc,birth desc;+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+| 1 | SIMPLE | tableA | NULL | index | NULL | idx_ageBirth | 9 | NULL | 6 | 33.33 | Using where; Using index; Using filesort |+----+-------------+--------+------------+-------+---------------+--------------+---------+------+------+----------+------------------------------------------+ Group by ÁöÑ‰ºòÂåñÁ≠ñÁï•ÂíåÂéüÁêÜÂíå Order by Ë∂ãÂêåÔºåÂîØ‰∏ÄÁöÑ‰∏ÄÁÇπÊòØ where Êù°‰ª∂‰ºòÂÖàÁ∫ßÈ´ò‰∫é havingÔºåËÉΩÂÜôÂú® where ÈôêÂÆöÁöÑÊù°‰ª∂Â∞±‰∏çË¶ÅÂéª having ÈôêÂÆö„ÄÇ Á¨îËÆ∞Êù•Ëá™ MySQLÈ´òÁ∫ß_‰∏∫ÊéíÂ∫è‰ΩøÁî®Á¥¢ÂºïOrderBy]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL‰ºòÂåñ‰πãÂ∞èË°®È©±Âä®Â§ßË°®]]></title>
    <url>%2F2019%2F08%2F26%2FMySQL%E4%BC%98%E5%8C%96%E4%B9%8B%E5%B0%8F%E8%A1%A8%E9%A9%B1%E5%8A%A8%E5%A4%A7%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢ÔºöÂâçÈù¢Â≠¶‰π†‰∫ÜÈÄöËøá explain Êü•Áúã SQL ËØ≠Âè•ÁöÑÊâßË°åËÆ°ÂàíÔºåÁÑ∂ÂêéÂØπÂÖ∂ËøõË°åÂøÖË¶ÅÁöÑÁ¥¢Âºï‰ºòÂåñ„ÄÇÈÇ£‰πàÊàë‰ª¨ÂèàËØ•ÊÄé‰πàËé∑ÂèñÂà∞Ëøô‰∫õ SQL ËØ≠Âè•Âë¢ü§îü§îü§îÔºü Ëé∑ÂèñÊÖ¢SQLÁöÑÊñπÊ≥ï 1ÔºöÂºÄÂêØÊÖ¢Êü•ËØ¢Êó•ÂøóÔºåËÆæÁΩÆ Èòà(y√π)ÂÄºÔºåÊØîÂ¶ÇË∂ÖËøá 3 ÁßíÂ∞±ÂÆö‰πâ‰∏∫ÊÖ¢SQLÔºåÁÑ∂ÂêéËøõË°åËÆ∞ÂΩï 2ÔºöËßÇÂØü„ÄÇÂú®ÊåáÂÆöÁöÑÁéØÂ¢ÉÔºàÁîü‰∫ßÔºâËøêÂä®ÊåáÂÆöÊó∂Èó¥ÁöÑÂ∫îÁî®Á®ãÂ∫èÔºåÁúãÁúã‰∫ßÁîüÊÖ¢SQLÁöÑÊÉÖÂÜµ„ÄÇ 3Ôºö‰ΩøÁî® explain + ÊÖ¢SQL Êü•ÁúãSQLËØ≠Âè•ÁöÑÊâßË°åËÆ°ÂàíËøõË°åÂàÜÊûê„ÄÇ 4Ôºöshow profile Êü•ËØ¢ sql ËØ≠Âè•Âú®Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®‰∏≠ÁöÑÊâßË°åÁªÜËäÇÂíåÁîüÂëΩÂë®ÊúüÊÉÖÂÜµ„ÄÇ 5ÔºöMySQL Êï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÂèÇÊï∞Ë∞É‰ºòÔºàËøô‰∏™Âü∫Êú¨ÂíåÊàë‰ª¨Ê≤°ÊúâÂçäÊØõÈí±ÂÖ≥Á≥ªÔºâ ‰ºòÂåñÂéüÂàô‰πã Â∞èË°®È©±Âä®Â§ßË°® Âç≥ÊòØ‰ΩøÁî®Â∞èÁöÑÁªìÊûúÈõÜÈ©±Âä®Â§ßÁöÑÁªìÊûúÈõÜ„ÄÇ ÂΩì B Ë°®ÁöÑÊï∞ÊçÆÈõÜÂ∞è‰∫é A Ë°®ÁöÑÊï∞ÊçÆÈõÜÊó∂Ôºå‰ΩøÁî® in ‰ºò‰∫é exists„ÄÇ 12345678select * from A where id in(select id from B)-- Á≠â‰ª∑‰∫éfor select id from B for select * from A where A.id = B.id-- Â§ñÂ±Ç for Âæ™ÁéØÁöÑÊ¨°Êï∞Ë∂äÂ∞èË∂äÂ•Ω ÂΩì A Ë°®ÁöÑÊï∞ÊçÆÈõÜÂ∞è‰∫é B Ë°®ÁöÑÊï∞ÊçÆÈõÜÊó∂Ôºå‰ΩøÁî® exists ‰ºò‰∫é in„ÄÇ 123456select * from A where exists (select Â∏∏ÈáèÔºàeg:1) from B WHERE B.id = A.id);-- Á≠â‰ª∑‰∫éfor select id from A for select * from B where A.id = B.id ÂΩìÂ≠êÊü•ËØ¢ÈúÄË¶ÅÁî®Âà∞‰∏ªÊü•ËØ¢ÁöÑÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºå‰∏ªÊü•ËØ¢‰∏ÄÊ¨°Â∞±ÊâßË°å‰∏ÄÊ¨°Â≠êÊü•ËØ¢ in Âíå exists ÁöÑ‰∫íËΩ¨ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283-- Êï∞ÊçÆÂáÜÂ§ámysql&gt; select * from websites;-- 5 Êù°ËÆ∞ÂΩï+----+--------------+---------------------------+-------+---------+| id | name | url | alexa | country |+----+--------------+---------------------------+-------+---------+| 1 | Google | https://www.google.cm/ | 1 | USA || 2 | Ê∑òÂÆù | https://www.taobao.com/ | 13 | CN || 3 | ËèúÈ∏üÊïôÁ®ã | http://www.runoob.com/ | 4689 | CN || 4 | ÂæÆÂçö | http://weibo.com/ | 20 | CN || 5 | Facebook | https://www.facebook.com/ | 3 | USA |+----+--------------+---------------------------+-------+---------+5 rows in set (0.00 sec)mysql&gt; select * from access_log;-- 12 Êù°ËÆ∞ÂΩï+-----+---------+-------+------------+| aid | site_id | count | date |+-----+---------+-------+------------+| 1 | 1 | 45 | 2016-05-10 || 2 | 3 | 100 | 2016-05-13 || 3 | 1 | 230 | 2016-05-14 || 4 | 2 | 10 | 2016-05-14 || 5 | 5 | 205 | 2016-05-14 || 6 | 4 | 13 | 2016-05-15 || 7 | 3 | 220 | 2016-05-15 || 8 | 5 | 545 | 2016-05-16 || 9 | 3 | 201 | 2016-05-17 || 10 | 6 | 2011 | 2016-05-17 || 11 | 7 | 2012 | 2016-05-18 || 12 | 8 | 2013 | 2016-05-19 |+-----+---------+-------+------------+12 rows in set (0.00 sec)-- Êü•ËØ¢ÂèàÈÇ£‰∫õÁ´ôÁÇπË¢´ËÆøÈóÆËøá----‰ΩøÁî® inmysql&gt; select * from websites where id in (select site_id from access_log);+----+----------+---------------------------+-------+---------+| id | name | url | alexa | country |+----+----------+---------------------------+-------+---------+| 1 | Google | https://www.google.cm/ | 1 | USA || 2 | Ê∑òÂÆù | https://www.taobao.com/ | 13 | CN || 4 | ÂæÆÂçö | http://weibo.com/ | 20 | CN || 5 | Facebook | https://www.facebook.com/ | 3 | USA |+----+----------+---------------------------+-------+---------+4 rows in set (0.00 sec)----Êü•ÁúãÊâßË°åËÆ°Âàímysql&gt; explain select * from websites where id in (select site_id from access_log);+----+--------------+-------------+------------+--------+---------------+------------+---------+--------------------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+--------------+-------------+------------+--------+---------------+------------+---------+--------------------+------+----------+-------------+| 1 | SIMPLE | websites | NULL | ALL | PRIMARY | NULL | NULL | NULL | 5 | 100.00 | Using where || 1 | SIMPLE | &lt;subquery2&gt; | NULL | eq_ref | &lt;auto_key&gt; | &lt;auto_key&gt; | 4 | runoob.websites.id | 1 | 100.00 | NULL || 2 | MATERIALIZED | access_log | NULL | ALL | NULL | NULL | NULL | NULL | 12 | 100.00 | NULL |+----+--------------+-------------+------------+--------+---------------+------------+---------+--------------------+------+----------+-------------+3 rows in set, 1 warning (0.00 sec)------------------------------------------------------------------------------------------------------------------------------ ‰ΩøÁî® existsmysql&gt; select * from websites where exists (select 1 from access_log where websites.id=access_log.site_id);+----+----------+---------------------------+-------+---------+| id | name | url | alexa | country |+----+----------+---------------------------+-------+---------+| 1 | Google | https://www.google.cm/ | 1 | USA || 2 | Ê∑òÂÆù | https://www.taobao.com/ | 13 | CN || 4 | ÂæÆÂçö | http://weibo.com/ | 20 | CN || 5 | Facebook | https://www.facebook.com/ | 3 | USA |+----+----------+---------------------------+-------+---------+4 rows in set (0.00 sec)----Êü•ÁúãÊâßË°åËÆ°Âàímysql&gt; explain select * from websites where exists (select 1 from access_log where websites.id=access_log.site_id);+----+--------------------+------------+------------+------+---------------+------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+--------------------+------------+------------+------+---------------+------+---------+------+------+----------+-------------+| 1 | PRIMARY | websites | NULL | ALL | NULL | NULL | NULL | NULL | 5 | 100.00 | Using where || 2 | DEPENDENT SUBQUERY | access_log | NULL | ALL | NULL | NULL | NULL | NULL | 12 | 10.00 | Using where |+----+--------------------+------------+------------+------+---------------+------+---------+------+------+----------+-------------+2 rows in set, 2 warnings (0.01 sec) Ê†πÊçÆÂ∞èË°®È©±Âä®Â§ßË°®ÁöÑÂéüÂàôÔºå‰∏äÈù¢ÁöÑ‰∏§‰∏™ SQLËØ≠Âè• Á¨¨‰∫å‰∏™‰ΩøÁî® exists Êõ¥ÂêàÈÄÇ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL‰ºòÂåñ‰πãÁ¥¢Âºï‰ΩøÁî®ÂéüÂàô]]></title>
    <url>%2F2019%2F08%2F25%2FMySQL%E4%BC%98%E5%8C%96%E4%B9%8B%E7%B4%A2%E5%BC%95%E4%BD%BF%E7%94%A8%E5%8E%9F%E5%88%99%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: ÂâçÈù¢‰∫ÜËß£Âà∞Á¥¢ÂºïÊòØÂ∏ÆÂä© MySQL È´òÊïàËé∑ÂèñÊï∞ÊçÆÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÈÇ£‰πàÂú®‰∏Ä‰∏™Êï∞ÊçÆË°®Êü•ËØ¢Â∫îÁî®‰∏≠ÔºåÊàë‰ª¨ÊòØÂê¶Â∫îËØ•‰ΩøÁî®Á¥¢ÂºïÔºüËØ•ÊÄéÊ†∑‰ΩøÁî®Á¥¢ÂºïÔºü‰ªÄ‰πàÂú∫ÊôØ‰∏ãÁ¥¢Âºï‰ºöÂ§±ÊïàÔºü Êï∞ÊçÆÂáÜÂ§á 1234567891011121314151617181920-- Âª∫Ë°®ËØ≠Âè•create table staffs( id int PRIMARY key auto_increment, name varchar(24) not null default '' comment 'ÂßìÂêç', age int not null default 0 comment 'Âπ¥ÈæÑ', pos varchar(20) not null default '' comment 'ËÅå‰Ωç', add_time timestamp not null default current_timestamp comment 'ÂÖ•ËÅåÊó∂Èó¥')default character set utf8mb4 comment 'ÂëòÂ∑•ËÆ∞ÂΩïË°®';-- Êï∞ÊçÆÊèíÂÖ•insert into staffs(name, age, pos, add_time)values('z3', 22, 'manager', now()),('July', 23, 'dev', now()),('2000', 23, 'dev', now()),('tom', 2, 'pm', now()),('jerry', 2, 'pm', now());-- Âª∫Á´ãÁªÑÂêàÁ¥¢Âºïmysql&gt; create index idx_staffs_nameAgePos on staffs(name,age,pos); 1: Á¥¢Âºï‰ΩøÁî®ÂéüÂàô 1ÔºöÂÖ®ÂÄºÂåπÈÖçÊàëÊúÄÁà± 1234567-- ÁªÑÂêàÁ¥¢ÂºïÁöÑÊâÄÊúâÂ≠óÊÆµÂÖ®ÈÉ®‰ΩøÁî®Âà∞ÔºåÂÖ®ÂÄºÂåπÈÖçmysql&gt; explain select * from staffs where name='July' and age=23 and pos='dev';+----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------------+------+----------+-------+| 1 | SIMPLE | staffs | NULL | ref | idx_staffs_nameAgePos | idx_staffs_nameAgePos | 184 | const,const,const | 1 | 100.00 | NULL |+----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------------+------+----------+-------+ 2ÔºöÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô„ÄêÂ∏¶Â§¥Â§ßÂì•‰∏çÊòØÊ≠ªÔºå‰∏≠Èó¥ÂÖÑÂºüüë¨‰∏çËÉΩÊñ≠„Äë Â¶ÇÊûú‰ΩøÁî®‰∫ÜÁªÑÂêàÁ¥¢ÂºïÔºåË¶ÅÈÅµÂæ™ÊúÄÂ∑¶ÂâçÁºÄÂéüÂàôÔºåÊü•ËØ¢‰ªéÁ¥¢ÂºïÁöÑÊúÄÂ∑¶ÂâçÂàóÂºÄÂßãÂπ∂‰∏î‰∏çËÉΩË∑≥ËøáÁ¥¢Âºï‰∏≠ÁöÑÂàó„ÄÇ 3Ôºö‰∏çË¶ÅÂú®Á¥¢ÂºïÂàó‰∏äÂÅö‰ªª‰ΩïÊìç‰ΩúÔºàËÆ°ÁÆóÔºåÂáΩÊï∞Ôºå„ÄåÊâãÂä® | Ëá™Âä®„ÄçÁ±ªÂûãËΩ¨Êç¢ÔºâÔºå‰ºöÂØºËá¥Á¥¢ÂºïÂ§±ÊïàËÄåËΩ¨ÂêëÂÖ®Ë°®Êâ´Êèè„ÄêÁ¥¢ÂºïÂàó‰∏äÂ∞ëËÆ°ÁÆó„Äë 12345678-- ‰ΩøÁî®Âà∞‰∫Üleft()ÂáΩÊï∞mysql&gt; explain select * from staffs where left(name,4) = "July";+----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+| 1 | SIMPLE | staffs | NULL | ALL | NULL | NULL | NULL | NULL | 5 | 100.00 | Using where |+----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+1 row in set, 1 warning (0.00 sec) 4ÔºöÂ≠òÂÇ®ÂºïÊìé‰∏çËÉΩ‰ΩøÁî®Á¥¢Âºï‰∏≠ ËåÉÂõ¥Êù°‰ª∂(Â§ß‰∫éÔºåÂ∞è‰∫é‚Ä¶) Âè≥ËæπÁöÑÂàó„ÄêËåÉÂõ¥‰πãÂêéÂÖ®Â§±Êïà„Äë 12345678-- ÁªÑÂêàÁ¥¢Âºïname,ageÁöÑÈÉ®ÂàÜÁ¥¢ÂºïË¢´Áî®Âà∞mysql&gt; explain select * from staffs where name='July' and age&gt;20 and pos='dev';+----+-------------+--------+------------+-------+-----------------------+-----------------------+---------+------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+-----------------------+-----------------------+---------+------+------+----------+-----------------------+| 1 | SIMPLE | staffs | NULL | range | idx_staffs_nameAgePos | idx_staffs_nameAgePos | 102 | NULL | 1 | 20.00 | Using index condition |+----+-------------+--------+------------+-------+-----------------------+-----------------------+---------+------+------+----------+-----------------------+1 row in set, 1 warning (0.00 sec) 5ÔºöÂ∞ΩÈáè‰ΩøÁî®Ë¶ÜÁõñÁ¥¢Âºï(Êü•ËØ¢ÁöÑÂàóÊòØÁ¥¢ÂºïÁöÑ‰∏ÄÈÉ®ÂàÜ)ÔºåÂáèÂ∞ë select * ‰ΩøÁî® 1234567891011121314151617181920212223242526-- ÂÖ®Ë°®Êâ´Êèèmysql&gt; explain select * from staffs;+----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------+| 1 | SIMPLE | staffs | NULL | ALL | NULL | NULL | NULL | NULL | 5 | 100.00 | NULL |+----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------+1 row in set, 1 warning (0.00 sec)-- Extra ‰∏∫ Using index, ‰ΩøÁî®Âà∞‰∫ÜË¶ÜÁõñÁ¥¢Âºïmysql&gt; explain select name,age,pos from staffs;+----+-------------+--------+------------+-------+---------------+-----------------------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+---------------+-----------------------+---------+------+------+----------+-------------+| 1 | SIMPLE | staffs | NULL | index | NULL | idx_staffs_nameAgePos | 184 | NULL | 5 | 100.00 | Using index |+----+-------------+--------+------------+-------+---------------+-----------------------+---------+------+------+----------+-------------+1 row in set, 1 warning (0.00 sec)-- Ë¶ÜÁõñÁ¥¢Âºïmysql&gt; explain select name,age,pos from staffs where name='July' and age=22 and pos='dev';+----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------------+------+----------+-------------+| 1 | SIMPLE | staffs | NULL | ref | idx_staffs_nameAgePos | idx_staffs_nameAgePos | 184 | const,const,const | 1 | 100.00 | Using index |+----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------------------+------+----------+-------------+1 row in set, 1 warning (0.00 sec) 6ÔºöÂú®‰∏ç‰ΩøÁî®Ë¶ÜÁõñÁ¥¢ÂºïÁöÑÊÉÖÂÜµ‰∏ãÔºåMySQL Âú®‰ΩøÁî®‰∏çÁ≠â‰∫éËøêÁÆóÁ¨¶ÁöÑÊó∂ÂÄôÊó†Ê≥ï‰ΩøÁî®Á¥¢Âºï‰ºöÂØºËá¥ÂÖ®Ë°®Êâ´ÊèèÔºå 123456789101112131415-- ËøôÈáåÊü•ËØ¢ÁöÑÂàóÈÉΩÊòØÁ¥¢ÂºïÁöÑÂàóÔºåÂõ†Ê≠§Áî®Âà∞‰∫ÜË¶ÜÁõñÁ¥¢Âºïmysql&gt; explain select name,age,pos from staffs where name != 'July';+----+-------------+--------+------------+-------+-----------------------+-----------------------+---------+------+------+----------+--------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+-----------------------+-----------------------+---------+------+------+----------+--------------------------+| 1 | SIMPLE | staffs | NULL | range | idx_staffs_nameAgePos | idx_staffs_nameAgePos | 98 | NULL | 4 | 100.00 | Using where; Using index |+----+-------------+--------+------------+-------+-----------------------+-----------------------+---------+------+------+----------+--------------------------+-- ‰ΩøÁî®‰∫Ü‰∏çÁ≠âËøêÁÆóÔºå‰πüÊ≤°Êúâ‰ΩøÁî®Âà∞Ë¶ÜÁõñÁ¥¢ÂºïÔºåÂõ†Ê≠§‰ºöÂÖ®Ë°®Êâ´Êèèmysql&gt; explain select * from staffs where name != 'July';+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+| 1 | SIMPLE | staffs | NULL | ALL | idx_staffs_nameAgePos | NULL | NULL | NULL | 5 | 80.00 | Using where |+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+ 7Ôºöis null ÊàñËÄÖ is not null ‰πüÊó†Ê≥ï‰ΩøÁî®Á¥¢ÂºïÔºåÊâÄ‰ª•Âª∫Ë°®Êó∂‰ΩøÁî®ÈªòËÆ§ÂÄº 123456789101112131415161718-- type ‰∏∫ all, Extra ‰∏∫ Using wheremysql&gt; explain select * from staffs where name is not null;+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+| 1 | SIMPLE | staffs | NULL | ALL | idx_staffs_nameAgePos | NULL | NULL | NULL | 5 | 80.00 | Using where |+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+1 row in set, 1 warning (0.00 sec)-- type ‰∏∫ null, Extra ‰∏∫ Impossible WHERE-- null ËôΩÁÑ∂Êó†Ê≥ï‰ΩøÁî®Á¥¢Âºï‰ΩÜÊòØ is null ÈÄüÂ∫¶ÊòØÊúÄÂø´ÁöÑ‚ùìmysql&gt; explain select * from staffs where name is null;+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------------+| 1 | SIMPLE | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | Impossible WHERE |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------------+1 row in set, 1 warning (0.02 sec) 8Ôºölike ‰ª•ÈÄöÈÖçÁ¨¶ % ÂºÄÂ§¥Ôºàeg: like &#39;%abc&#39;ÔºâÁöÑSQLËØ≠Âè•Á¥¢ÂºïÂ§±Êïà‰ºöÂèòÊàêÂÖ®Ë°®Êâ´Êèè Ëß£ÂÜ≥ÊñπÊ°àÔºö‰ΩøÁî®Ë¶ÜÁõñÁ¥¢Âºï‰ª£ÊõøÂÖ®Ë°®Êâ´Êèè 123456789101112131415161718192021222324252627-- Á¥¢ÂºïÂ§±ÊïàÔºåÂÖ®Ë°®Êâ´Êèèmysql&gt; explain select * from staffs where name like '%July';+----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+| 1 | SIMPLE | staffs | NULL | ALL | NULL | NULL | NULL | NULL | 5 | 20.00 | Using where |+----+-------------+--------+------------+------+---------------+------+---------+------+------+----------+-------------+1 row in set, 1 warning (0.00 sec)-- ‰ΩøÁî®ÈÉ®ÂàÜÁ¥¢Âºïmysql&gt; explain select * from staffs where name like 'July%';+----+-------------+--------+------------+-------+-----------------------+-----------------------+---------+------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+-----------------------+-----------------------+---------+------+------+----------+-----------------------+| 1 | SIMPLE | staffs | NULL | range | idx_staffs_nameAgePos | idx_staffs_nameAgePos | 98 | NULL | 1 | 100.00 | Using index condition |+----+-------------+--------+------------+-------+-----------------------+-----------------------+---------+------+------+----------+-----------------------+1 row in set, 1 warning (0.00 sec)-- Á¥¢Âºï KEY `idx_test03_c1234` (`c1`,`c2`,`c3`,`c4`)-- Ê≠§Êó∂Áî®Âà∞‰∫ÜÁªÑÂêàÁ¥¢ÂºïÁöÑÂâç‰∏â‰∏™ÂàóÔºåc2 like 'a2%' ‰πüÊòØ‰∏ÄÁßçËåÉÂõ¥Ê†áËØÜmysql&gt; explain select * from test03 where c1='a1' and c2 like 'a2%' and c3='a3';+----+-------------+--------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+| 1 | SIMPLE | test03 | NULL | range | idx_test03_c1234 | idx_test03_c1234 | 123 | NULL | 1 | 16.67 | Using index condition |+----+-------------+--------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+1 row in set, 1 warning (0.01 sec) ÂÅáËÆæÁ¥¢Âºï‰∏∫ index(a,b,c); ËØ≠Âè•1Ôºöwhere a = 3 and b like ‚Äòaa%‚Äô and c=4 ËÉΩÁî®Âà∞Á¥¢Âºï a b cÔºõËØ≠Âè•2Ôºöwhere a = 3 and b like ‚Äòaa%bb%‚Äô and c=4 ‰πüËÉΩÁî®Âà∞Á¥¢Âºï a b cÔºõ 9ÔºöÂ≠óÁ¨¶‰∏≤‰∏çÂä†ÂçïÂºïÂè∑Á¥¢Âºï‰ºöÂ§±Êïà „ÄêÊï∞ÊçÆÁ±ªÂûãË¢´ÈöêÂºèËΩ¨Êç¢„Äë varchar Á±ªÂûã ‰ΩøÁî®Êó∂ÈúÄË¶ÅÂä†‰∏äÂçïÂºïÂè∑„ÄÇ 1234567891011121314151617-- Âä†‰∫Ü ÂçïÂºïÂè∑ÔºåÂíåÂª∫Ë°®Â≠óÊÆµÂÆö‰πâÁ±ªÂûã‰∏ÄËá¥mysql&gt; explain select * from staffs where name='2000';+----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------+------+----------+-------+| 1 | SIMPLE | staffs | NULL | ref | idx_staffs_nameAgePos | idx_staffs_nameAgePos | 98 | const | 1 | 100.00 | NULL |+----+-------------+--------+------------+------+-----------------------+-----------------------+---------+-------+------+----------+-------+1 row in set, 1 warning (0.00 sec)-- Âª∫Ë°®name Â≠óÊÆµÊòØÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºåÁé∞Âú®ÁöÑÊü•ËØ¢ÊòØÊï∞ÂÄºÁ±ªÂûãÔºåÁ¥¢ÂºïÂ§±Êïàmysql&gt; explain select * from staffs where name=2000;+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+| 1 | SIMPLE | staffs | NULL | ALL | idx_staffs_nameAgePos | NULL | NULL | NULL | 5 | 20.00 | Using where |+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+1 row in set, 3 warnings (0.00 sec) 10ÔºöÂ∞ΩÂèØËÉΩÂ∞ëÁî® orÔºåÁî®ÂÆÉÊù•ËøûÊé•Êó∂Á¥¢Âºï‰ºöÂ§±Êïà„ÄÇ 1234567-- ÂÖ®Ë°®Êâ´Êèèmysql&gt; explain select * from staffs where name="July" or name = 'tom';+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+| 1 | SIMPLE | staffs | NULL | ALL | idx_staffs_nameAgePos | NULL | NULL | NULL | 5 | 40.00 | Using where |+----+-------------+--------+------------+------+-----------------------+------+---------+------+------+----------+-------------+ 2: Á¥¢Âºï‰ΩøÁî®Á§∫‰æãÊï∞ÊçÆÂáÜÂ§á 12345678910111213141516171819202122-- Âª∫Ë°®create table test03( id int PRIMARY key auto_increment, c1 char(10), c2 char(10), c3 char(10), c4 char(10), c5 char(10));-- ÊèíÂÖ•Êï∞ÊçÆinsert into test03(c1,c2,c3,c4,c5)values('a1','a2','a3','a4','a5'),('b1','b2','b3','b4','b5'),('c1','c2','c3','c4','c5'),('d1','d2','d3','d4','d5'),('e1','e2','e3','e4','e5'),('f1','f2','f3','f4','f5');-- ÂàõÂª∫Á¥¢Âºïcreate index idx_test03_c1234 on test03(c1,c2,c3,c4); 1ÔºöÁ¥¢ÂºïÂÖ®ÂÄºÂåπÈÖç ‰æãÂ¶Ç‰∏Ä‰∏™Êï∞ÊçÆË°®Âª∫Á´ãÁöÑÁªÑÂêàÁ¥¢Âºï idx_table_c1c2c3c4, ÂΩìÊü•ËØ¢Êù°‰ª∂‰∏∫ where c3=&#39;c3&#39; and c2=&#39;c2&#39; and c4=&#39;c4&#39; and c1=&#39;c1&#39;; Êó∂Êü•ËØ¢‰ºòÂåñÂô®‰ºöËá™Âä®Ë∞ÉÊï¥Âíå‰ºòÂåñÔºåÊ≠§Êó∂Á≠â‰ª∑‰∫é where c1=&#39;c1&#39; and c2=&#39;c2&#39; and c4=&#39;c4&#39; and c3=&#39;c3&#39;;„ÄÇ‰ΩÜÊòØÊúÄ‰Ω≥ÂÆûË∑µÊòØÊåâÁÖßÁ¥¢ÂºïÂª∫Á´ãÁöÑÈ°∫Â∫èÊù•‰ΩøÁî®Ôºå‰ª•Ê≠§Êù•ÂáèÂ∞ëÂ∫ïÂ±Ç‰ºòÂåñÂô®ÁöÑÂ∑•‰ΩúÈáè„ÄÇ 123456mysql&gt; explain select * from test03 where c1='c2' and c2='c2' and c3='c3' and c4='c4';+----+-------------+--------+------------+------+------------------+------------------+---------+-------------------------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------------------+------+----------+-------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 164 | const,const,const,const | 1 | 100.00 | NULL |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------------------+------+----------+-------+ 1234567891011121314151617-- Ê≥®ÊÑèÁé∞Âú®ÁöÑÊü•ËØ¢Êù°‰ª∂where ÊòØ c1, c2, c4, c3mysql&gt; explain select * from test03 where c1='c1' and c2='c2' and c4='c4' and c3='c3';+----+-------------+--------+------------+------+------------------+------------------+---------+-------------------------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------------------+------+----------+-------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 164 | const,const,const,const | 1 | 100.00 | NULL |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------------------+------+----------+-------+1 row in set, 1 warning (0.00 sec)-- Ê≥®ÊÑèÁé∞Âú®ÁöÑÊü•ËØ¢Êù°‰ª∂where ÊòØ c3, c2, c4, c1mysql&gt; explain select * from test03 where c3='c3' and c2='c2' and c4='c4' and c1='c1';+----+-------------+--------+------------+------+------------------+------------------+---------+-------------------------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------------------+------+----------+-------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 164 | const,const,const,const | 1 | 100.00 | NULL |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------------------+------+----------+-------+1 row in set, 1 warning (0.03 sec) 2Ôºö‰ΩøÁî®Âà∞ËåÉÂõ¥ËøêÁÆóÁ¨¶Êó∂ 1234567891011121314151617-- ‰ΩøÁî®Âà∞ÁªÑÂêàÁ¥¢ÂºïÁöÑÂâç3‰∏™Á¥¢Âºï mysql&gt; explain select * from test03 where c1='c2' and c2='c2' and c3&gt;='c3' and c4='c4';+----+-------------+--------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+| 1 | SIMPLE | test03 | NULL | range | idx_test03_c1234 | idx_test03_c1234 | 164 | NULL | 1 | 16.67 | Using index condition |+----+-------------+--------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+1 row in set, 1 warning (0.01 sec)-- Áî®Âà∞‰∫ÜÂõõ‰∏™Á¥¢Âºïmysql&gt; explain select * from test03 where c1='c2' and c2='c2' and c3='c3' and c4&gt;='c4';+----+-------------+--------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+| 1 | SIMPLE | test03 | NULL | range | idx_test03_c1234 | idx_test03_c1234 | 164 | NULL | 1 | 100.00 | Using index condition |+----+-------------+--------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+1 row in set, 1 warning (0.01 sec) 3Ôºö‰ΩøÁî® order by Êó∂ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091-- ‰ΩøÁî®Âà∞ÁªÑÂêàÁ¥¢ÂºïÁöÑÂâç‰∏â‰∏™Ôºåc3ÁöÑ‰ΩúÁî®ÊòØÊéíÂ∫èÔºåÂè™ÊòØÊ≤°Êúâ‰∏ãÈù¢ÁöÑÊü•Êâæ‰∏≠mysql&gt; explain select * from test03 where c1='c2' and c2='c2' and c4='c4' order by c3;+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 82 | const,const | 1 | 16.67 | Using index condition |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+1 row in set, 1 warning (0.01 sec)-- Âíå‰∏ä‰∏Ä‰∏™ÊâßË°åËÆ°Âàí‰∏ÄËá¥mysql&gt; explain select * from test03 where c1='c2' and c2='c2' order by c3;+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 82 | const,const | 1 | 100.00 | Using index condition |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+1 row in set, 1 warning (0.01 sec)-- Ê≠§Êó∂Âè™‰ºö‰ΩøÁî®Âà∞‰∏§‰∏™Á¥¢ÂºïÔºåÁÑ∂ÂêéC4Êù°‰ª∂Ê≤°‰ΩøÁî®Âà∞Á¥¢ÂºïÔºå‰ΩøÁî®Âà∞‰∫ÜÊñá‰ª∂ÂÜÖÊéíÂ∫è Using filesortmysql&gt; explain select * from test03 where c1='c2' and c2='c2' order by c4;+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+---------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+---------------------------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 82 | const,const | 1 | 100.00 | Using index condition; Using filesort |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+---------------------------------------+1 row in set, 1 warning (0.00 sec)-- Êü•ÊâæÁî®Âà∞‰∫Ü‰∏Ä‰∏™Á¥¢ÂºïÔºåÊéíÂ∫èÁî®Âà∞‰∫Ü c2,c3, Ê≠§Êó∂Êó† Using filesortmysql&gt; explain select * from test03 where c1='c1' and c5='c5' order by c2,c3;+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+------------------------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 41 | const | 1 | 16.67 | Using index condition; Using where |+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+------------------------------------+1 row in set, 1 warning (0.01 sec)-- ‰ΩøÁî®Âà∞‰∫ÜÁªÑÂêàÁ¥¢ÂºïÁöÑc1, Áî±‰∫éorder by ÁöÑÈ°∫Â∫èÊ≤°ÊåâÁÖßÁªÑÂêàÁ¥¢ÂºïÈ°∫Â∫èÊù•ÔºåÂõ†Ê≠§Âá∫Áé∞‰∫Ü Using filesortmysql&gt; explain select * from test03 where c1='c1' and c5='c5' order by c3,c2;+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+----------------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+----------------------------------------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 41 | const | 1 | 16.67 | Using index condition; Using where; Using filesort |+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+----------------------------------------------------+1 row in set, 1 warning (0.00 sec)-- Á¥¢ÂºïÁî®Âà∞‰∫Ü c1Ôºåc2, ÊéíÂ∫èÁî®Âà∞‰∫Üc2,c3mysql&gt; explain select * from test03 where c1='c1' and c2='c2' order by c2,c3;+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 82 | const,const | 1 | 100.00 | Using index condition |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+1 row in set, 1 warning (0.00 sec)-- Êü•ÊâæÁî®Âà∞‰∫ÜÁªÑÂêàÁ¥¢ÂºïÁöÑc1,c2, Ê≠§Êó∂ÁöÑÊü•ËØ¢Êù°‰ª∂‰∏≠c2ÂÄºÊòØ‰∏Ä‰∏™Â∏∏ÈáèÔºåorder by ÂêéÁöÑc2 ‰∏∫‰∏Ä‰∏™Â∏∏ÈáèÔºàÂõ∫ÂÆöÂÄºÔºâÔºåÊ≠§Êó∂ÂØπc2ÊòØÂê¶ÊéíÂ∫èÂØπÊï¥‰∏™sqlÊó†ÂΩ±Âìç„ÄÇ mysql&gt; explain select * from test03 where c1='c1' and c2='c2' and c5='c5' order by c3,c2;+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+------------------------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 82 | const,const | 1 | 16.67 | Using index condition; Using where |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+------------------------------------+1 row in set, 1 warning (0.00 sec)-- Áî®Âà∞‰∫Ü‰∏Ä‰∏™Á¥¢Âºïmysql&gt; explain select c1,c2,c3 from test03 where c1='a1' and c4='a4' group by c2,c3;+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+--------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+--------------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 41 | const | 1 | 16.67 | Using where; Using index |+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+--------------------------+1 row in set, 1 warning (0.00 sec)-- Âá∫Áé∞‰∫ÜÊñá‰ª∂ÊéíÂ∫èÔºå‰ΩøÁî®Âà∞‰∫Ü‰∏¥Êó∂Ë°® ,mysql&gt; explain select c1,c2,c3 from test03 where c1='a1' and c4='a4' group by c3,c2;+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+-----------------------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+-----------------------------------------------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 41 | const | 1 | 16.67 | Using where; Using index; Using temporary; Using filesort |+----+-------------+--------+------------+------+------------------+------------------+---------+-------+------+----------+-----------------------------------------------------------+1 row in set, 1 warning (0.00 sec)-- ÈíàÂØπ‰∏ä‰∏Ä‰∏™ÊâßË°åËÆ°Âàí‰ºòÂåñÂ¶Ç‰∏ãÊñ∞Â¢û c2 = 'a2'mysql&gt; explain select c1,c2,c3 from test03 where c1='a1' and c2='a2' and c4='a4' group by c3,c2;+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+--------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+--------------------------+| 1 | SIMPLE | test03 | NULL | ref | idx_test03_c1234 | idx_test03_c1234 | 82 | const,const | 1 | 16.67 | Using where; Using index |+----+-------------+--------+------------+------+------------------+------------------+---------+-------------+------+----------+--------------------------+1 row in set, 1 warning (0.01 sec)-- group by Âü∫Êú¨‰∏äÈÉΩÈúÄË¶ÅÊéíÂ∫èÔºå‰ºöÊúâ‰∏¥Êó∂Ë°®‰∫ßÁîü„ÄÇ 3: Á¥¢Âºï‰ΩøÁî®ÁöÑ‰∏ÄËà¨ÊÄßÂª∫ËÆÆ ÂØπ‰∫éÂçïÂÄºÁ¥¢ÂºïÔºåÂ∞ΩÈáèÈÄâÊã©ÈíàÂØπÂΩìÂâçÊü•ËØ¢ ËøáÊª§ÊÄßÊõ¥Â•Ω ÁöÑÁ¥¢Âºï Âú®ÈÄâÁî®ÁªÑÂêàÁ¥¢ÂºïÁöÑÊó∂ÂÄôÔºåÂΩìÂâçÊü•ËØ¢‰∏≠ÔºåËøáÊª§ÊÄßÊúÄÂ•ΩÔºàË∂äÂ•ΩÔºâ ÁöÑÂ≠óÊÆµÂú®ÁªÑÂêàÁ¥¢ÂºïÂ≠óÊÆµÈ°∫Â∫è‰∏≠Ôºå‰ΩçÁΩÆË∂äÈù†ÂâçË∂äÂ•Ω Âú®ÈÄâÊã©ÁªÑÂêàÁ¥¢ÂºïÁöÑÊó∂ÂÄôÔºåÂ∞ΩÈáèÈÄâÊã©ËÉΩÂ§üÂåÖÂê´ÂΩìÂâçÊü•ËØ¢ÁöÑ where Â≠óÂè•‰∏≠Êõ¥Â§öÂ≠óÊÆµÁöÑÁ¥¢Âºï„ÄÇ Â∞ΩÂèØËÉΩÈÄöËøáÂàÜÊûêÁªüËÆ°‰ø°ÊÅØÂíåË∞ÉÊï¥ query ÁöÑÂÜôÊ≥ïÊù•ËææÂà∞ÈÄâÊã©ÈÄÇÂêàÁ¥¢ÂºïÁöÑÁõÆÁöÑ]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÊÄßËÉΩ‰ºòÂåñ‰πãExplainÁ¥¢Âºï‰ºòÂåñÂÆû‰æã]]></title>
    <url>%2F2019%2F08%2F24%2FMySQL%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8B%E9%80%9A%E8%BF%87Explain%E8%BF%9B%E8%A1%8C%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: ÂâçÈù¢‰∫ÜËß£ Explain ÁöÑÂü∫Á°ÄÁü•ËØÜÔºåÊé•‰∏ãÊù•Êàë‰ª¨ÈÄöËøáÂ•Ω‰∏Ä‰∫õÊ°àÂàóÊù•ÂÆûÊìç‰∏Ä‰∏ãÔºåÈÄöËøáÂÆûË∑µÂä†Ê∑±ÂØπÂâçÈù¢‰∏§ÁØáÁ¨îËÆ∞ÁöÑ‰∫ÜËß£„ÄÇ Ê°à‰æã‰∏Ä1234exlain select d1.name, (select id from t3) d2from (select id, name from t1 where other_colume = '') d1union(select name, id from t2); ‰æùÊçÆ explain ‰∏≠ idÂÄºÂèØÁü•ÊâßË°åÂÖàÂêéÈ°∫Â∫èÂàÜÂà´ÊòØ 4 &gt; 3 &gt; 2 &gt; 1 &gt; NULL„ÄÇËØ¥ÊòéÂ¶Ç‰∏ã ÊâßË°åÈ°∫Â∫è1Ôºàid‰∏∫4Ôºâ: select_type‰∏∫UNIONÔºåÊâßË°åÁöÑSQL‰∏∫select name, id from t2 ÊâßË°åÈ°∫Â∫è2Ôºàid‰∏∫3Ôºâ: select_type‰∏∫DERIVEDÔºåÁî±‰∫éSQLÊü•ËØ¢Ëß£ÊûêÊó∂ÊòØ‰ªéfromÂºÄÂßãÔºåÂêéÈù¢Á¥ßÊé•ÁùÄÁöÑsqlÊü•ËØ¢ËØ≠Âè•ÂèàÂåÖÂê´Âú®from‰∏≠ÔºåÂõ†Ê≠§select_type‰∏∫DERIVED„ÄÇÊâßË°åSQL‰∏∫select id, name from t1 where other_colume = &#39;&#39; ÊâßË°åÈ°∫Â∫è3Ôºàid‰∏∫2Ôºâ: select_type‰∏∫SUBQUERYÔºåÊâßË°åÁöÑSQL‰∏∫select id from t3 ÊâßË°åÈ°∫Â∫è4Ôºàid‰∏∫1Ôºâ: select_typeÂàóÂÄº‰∏∫PRIMARYË°®Á§∫ËØ•Êü•ËØ¢‰∏∫Â§ñÂ±ÇÊü•ËØ¢ÔºåtableÂàóÊ†áËØÜ‰∏∫&lt;derived3&gt;Ë°®Á§∫Êü•ËØ¢ÁöÑÁªìÊûúÊù•Ëá™‰∫é‰∏Ä‰∏™Ë°çÁîüË°®Ôºå&lt;derived3&gt;‰∏≠ÁöÑ3Ë°®Á§∫ËØ•Êü•ËØ¢Ë°çÁîüËá™Á¨¨id‰∏∫3ÁöÑÊü•ËØ¢„ÄÇ ÊâßË°åÈ°∫Â∫è4Ôºàid‰∏∫1Ôºâ: select_typeÂàóÂÄº‰∏∫UNION RESULTË°®Á§∫‰ªé‰∏¥Êó∂Êü•ËØ¢ÁªìÊûúÈõÜ‰∏≠ËØªÂèñË°åÔºåtableÂàóÂÄº‰∏∫&lt;union 1,4&gt; Ë°®Á§∫ÂØπid‰∏∫1Âíå4ÁöÑ‰∏§‰∏™selectÁªìÊûúËøõË°åUNIONÊìç‰Ωú„ÄÇ Ê°à‰æã‰∫å ‰πã ÂçïË°®‰ºòÂåñÊï∞ÊçÆÂáÜÂ§á 1234567891011121314151617181920-- Âª∫Ë°®ËØ≠Âè•create table article( id int(10) unsigned not null PRIMARY key auto_increment, author_id int(10) unsigned not null comment '‰ΩúËÄÖid', category_id int(10) unsigned not null comment 'ÂàÜÁ±ªid', views int(10) unsigned not null comment 'Êü•ÁúãÊ¨°Êï∞', comments int(10) unsigned not null comment 'ËØÑËÆ∫Ê¨°Êï∞', title varchar(255) not null comment 'ÊñáÁ´†Ê†áÈ¢ò', content text not null comment 'ÂÜÖÂÆπ')default character set utf8mb4;-- Êï∞ÊçÆÊèíÂÖ•insert into article(author_id, category_id, views, comments, title, content)values(1,1,1,1,'Ê†áÈ¢ò1','ÂÜÖÂÆπ1'),(2,2,2,2,'Ê†áÈ¢ò2','ÂÜÖÂÆπ2'),(3,3,3,3,'Ê†áÈ¢ò3','ÂÜÖÂÆπ3'),(4,4,4,4,'Ê†áÈ¢ò4','ÂÜÖÂÆπ4'),(5,5,5,5,'Ê†áÈ¢ò5','ÂÜÖÂÆπ5'),(6,6,6,6,'Ê†áÈ¢ò6','ÂÜÖÂÆπ6'); Êü•ËØ¢ category_id ‰∏∫1 ‰∏î comments Â§ß‰∫é1ÊÉÖÂÜµ‰∏ã, views ÊúÄÂ§öÁöÑarticle_id 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566-- Êü•ËØ¢sqlmysql&gt; select id,author_id from article where category_id=1 and comments&gt;1 order by views desc limit 1;+----+-----------+| id | author_id |+----+-----------+| 3 | 1 |+----+-----------+1 row in set (0.00 sec)--Êü•ÁúãÊâßË°åËÆ°ÂàíÔºåÂæóÂà∞Â¶Ç‰∏ãÂèØ‰ºòÂåñÁÇπ---- 1Ôºötype ‰∏∫ ALL ÂÖ®Ë°®Êâ´ÊèèÔºõ---- 2ÔºöExtra Âá∫Áé∞‰∫Ü Using filesortmysql&gt; explain select id,author_id from article where category_id=1 and comments&gt;1 order by views desc limit 1;+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-----------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-----------------------------+| 1 | SIMPLE | article | NULL | ALL | NULL | NULL | NULL | NULL | 6 | 16.67 | Using where; Using filesort |+----+-------------+---------+------------+------+---------------+------+---------+------+------+----------+-----------------------------+1 row in set, 1 warning (0.00 sec)-- Â∞ùËØï‰ºòÂåñ---- Ê†πÊçÆÊü•ËØ¢Êù°‰ª∂Âª∫Á´ãÁªÑÂêàÁ¥¢ÂºïÔºömysql&gt; create index idx_article_ccv on article(category_id,comments,views);-- Êü•ÁúãÂàöÂª∫ÁöÑÁ¥¢Âºïmysql&gt; show index from article;+---------+------------+-----------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |+---------+------------+-----------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+| article | 0 | PRIMARY | 1 | id | A | 6 | NULL | NULL | | BTREE | | || article | 1 | idx_article_ccv | 1 | category_id | A | 5 | NULL | NULL | | BTREE | | || article | 1 | idx_article_ccv | 2 | comments | A | 6 | NULL | NULL | | BTREE | | || article | 1 | idx_article_ccv | 3 | views | A | 6 | NULL | NULL | | BTREE | | |+---------+------------+-----------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+4 rows in set (0.02 sec)-- ÂÜçÊ¨°ÊâßË°åÂàöÊâçÁöÑÊü•ËØ¢SQL---- 1: type Áî± ALL ÂèòÊàê‰∫Ü range---- 2: Extra ËøòÊòØÂá∫Áé∞‰∫Ü Using filesort, //ÁúãÊù•ËøòÂæó‰ºòÂåñ---- 3: MySQL Êó†Ê≥ïÂÜçÂØπÂêéÈù¢ view ÈÉ®ÂàÜËøõË°åÊ£ÄÁ¥¢ÔºåÂç≥ÊòØrange Á±ªÂûãÊü•ËØ¢Â≠óÊÆµÂêéÈù¢ÁöÑÂ≠óÊÆµÊó†Êïàmysql&gt; explain select id,author_id from article where category_id=1 and comments&gt;1 order by views desc limit 1;+----+-------------+---------+------------+-------+-----------------+-----------------+---------+------+------+----------+---------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+---------+------------+-------+-----------------+-----------------+---------+------+------+----------+---------------------------------------+| 1 | SIMPLE | article | NULL | range | idx_article_ccv | idx_article_ccv | 8 | NULL | 1 | 100.00 | Using index condition; Using filesort |+----+-------------+---------+------------+-------+-----------------+-----------------+---------+------+------+----------+---------------------------------------+1 row in set, 1 warning (0.00 sec)-- Âà†Èô§‰πãÂâçÊâÄÂª∫Á´ãÁöÑÁ¥¢Âºïmysql&gt; drop index idx_article_ccv on article;-- ÂÜçÊ¨°Â∞ùËØïÂª∫Á´ãÁ¥¢Âºï---- Ê†πÊçÆÊü•ËØ¢Êù°‰ª∂Âª∫Á´ãÁªÑÂêàÁ¥¢ÂºïÔºåËøôÊ¨°ÂéªÊéâ commentsmysql&gt; create index idx_article_cv on article(category_id,views);-- ÂÜçÊ¨°Êü•ËØ¢ÊâßË°åËÆ°Âàí---- type Âèò‰∏∫‰∫Üref---- ref Âèò‰∏∫le const---- Extra Ê≤°Êúâ Using filesortmysql&gt; explain select id,author_id from article where category_id=1 and comments&gt;1 order by views desc limit 1;+----+-------------+---------+------------+------+----------------+----------------+---------+-------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+---------+------------+------+----------------+----------------+---------+-------+------+----------+-------------+| 1 | SIMPLE | article | NULL | ref | idx_article_cv | idx_article_cv | 4 | const | 2 | 33.33 | Using where |+----+-------------+---------+------------+------+----------------+----------------+---------+-------+------+----------+-------------+1 row in set, 1 warning (0.00 sec) Ê°à‰æã‰∏â ‰πã ÂèåË°®‰ºòÂåñÊï∞ÊçÆÂáÜÂ§á 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475-- Âª∫Ë°®ËØ≠Âè•create table class ( id int(10) unsigned not null PRIMARY key auto_increment, card int(10) unsigned not null comment 'ÂàÜÁ±ªid')default character set utf8mb4;create table book ( bookid int(10) unsigned not null PRIMARY key auto_increment, card int(10) unsigned not null comment 'ÂàÜÁ±ªid')default character set utf8mb4;-- Êï∞ÊçÆÊèíÂÖ•insert into class(id,card)values(1,10),(2,7),(3,3),(4,13),(5,17),(6,4),(7,9),(8,13),(9,19),(10,16),(11,20),(12,13),(13,3),(14,15),(15,5),(16,20),(17,6),(18,9),(19,6),(20,4);-- Êï∞ÊçÆÊèíÂÖ•insert into book(bookid,card)values(1,2),(2,18),(3,3),(4,2),(5,20),(6,15),(7,11),(8,13),(9,8),(10,4),(11,13),(12,14),(13,10),(14,7),(15,3),(16,16),(17,10),(18,3),(19,5),(20,14);mysql&gt; explain select * from class left join book on class.card=book.card;+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+| 1 | SIMPLE | class | NULL | ALL | NULL | NULL | NULL | NULL | 20 | 100.00 | NULL || 1 | SIMPLE | book | NULL | ALL | NULL | NULL | NULL | NULL | 20 | 100.00 | Using where; Using join buffer (Block Nested Loop) |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+2 rows in set, 1 warning (0.00 sec)-- ÂÖàÂÅáËÆæÁªôclass ÁöÑcardÂä†Á¥¢Âºïmysql&gt; create index idx_card on class(card);mysql&gt; explain select * from class left join book on class.card=book.card and class.id&gt;0;+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+----------------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+----------------------------------------------------+| 1 | SIMPLE | class | NULL | index | NULL | idx_card | 4 | NULL | 20 | 100.00 | Using index || 1 | SIMPLE | book | NULL | ALL | NULL | NULL | NULL | NULL | 20 | 100.00 | Using where; Using join buffer (Block Nested Loop) |+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+----------------------------------------------------+2 rows in set, 1 warning (0.00 sec)-- Âà†Èô§ idx_card ÁÑ∂ÂêéÂú® bookË°®‰∏äÂä†Á¥¢ÂºïËØïËØïmysql&gt; alter table class drop index idx_card;mysql&gt; create index idx_card on book(card);-- Êü•Áúã‰∏Ä‰∏ãÊâßË°åËÆ°Âàí-- ÂØπÊØî‰∏ä‰∏Ä‰∏™ÊâßË°åËÆ°ÂàíÔºåtype Áî± ALL Âèò‰∏∫‰∫Ü refÔºårefÂàóÂÄºÊåáÂêërunoob.class.cardÔºårows Áî± 20 + 20Âèò‰∏∫ 20+1mysql&gt; explain select * from class left join book on book.card=class.card;+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------+| 1 | SIMPLE | class | NULL | ALL | NULL | NULL | NULL | NULL | 20 | 100.00 | NULL || 1 | SIMPLE | book | NULL | ref | idx_card | idx_card | 4 | runoob.class.card | 1 | 100.00 | Using index |+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------+2 rows in set, 1 warning (0.00 sec)-- ‰ΩøÁî®Âè≥ÈìæÊé•Êü•ËØ¢Êó∂mysql&gt; create index idx_card on book(card);mysql&gt; explain select * from book right join class on book.card=class.card;+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------+| 1 | SIMPLE | class | NULL | ALL | NULL | NULL | NULL | NULL | 20 | 100.00 | NULL || 1 | SIMPLE | book | NULL | ref | idx_card | idx_card | 4 | runoob.class.card | 1 | 100.00 | Using index |+----+-------------+-------+------------+------+---------------+----------+---------+-------------------+------+----------+-------------+2 rows in set, 1 warning (0.00 sec) ÁªìËÆ∫ÔºöLeft join Êù°‰ª∂Áî®‰∫éÁ°ÆÂÆöÂ¶Ç‰Ωï‰ªé Âè≥Ë°® ÊêúÁ¥¢Ë°åÔºàÂõ†‰∏∫Â∑¶Ë°®ÈÉΩÊòØÂåπÈÖçÁöÑÔºâÔºåÊâÄ‰ª•Âè≥Ë°®‰∏ÄÂÆöË¶ÅÂª∫Á´ãÁ¥¢Âºï„ÄÇÊç¢Âè•ËØùËØ¥ ‚ÄúÂ∑¶ËøûÊé•Âõ†‰∏∫‰∏ªË°®ÂøÖÂÆöÂÖ®ÈÉ®Êâ´ÊèèÔºåÂ≠êË°®‰∏ç‰∏ÄÂÆöÂÖ®ÈÉ®ÂØπÂ∫îÔºåÊâÄ‰ª•Âä†Âú®Â≠êË°®Â•Ω‰∏Ä‰∫õ‚Äù„ÄÇ Ê°à‰æã‰∏â ‰πã ‰∏âË°®‰ºòÂåñ1234567891011121314151617181920212223242526272829303132333435363738394041424344-- Âª∫Ë°®ËØ≠Âè•create table phone ( phoneid int(10) unsigned not null PRIMARY key auto_increment, card int(10) unsigned not null comment 'ÂàÜÁ±ªid')default character set utf8mb4;-- Êï∞ÊçÆÊèíÂÖ•insert into phone(phoneid,card)values(1,16),(2,17),(3,17),(4,14),(5,16),(6,20),(7,11),(8,15),(9,3),(10,7),(11,5),(12,5),(13,7),(14,3),(15,11),(16,4),(17,9),(18,12),(19,13),(20,8);----------------------------------------- Êü•ÁúãÂéüÂßãÊâßË°åËÆ°Âàímysql&gt; explain select * from class left join book on class.card = book.card left join phone on class.card = phone.card;+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+| 1 | SIMPLE | class | NULL | ALL | NULL | NULL | NULL | NULL | 20 | 100.00 | NULL || 1 | SIMPLE | book | NULL | ALL | NULL | NULL | NULL | NULL | 20 | 100.00 | Using where; Using join buffer (Block Nested Loop) || 1 | SIMPLE | phone | NULL | ALL | NULL | NULL | NULL | NULL | 20 | 100.00 | Using where; Using join buffer (Block Nested Loop) |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------------------------------------------+-- Ê†πÊçÆÊ°à‰æã‰∫åÁöÑÁªèÈ™åÂ¢ûÂä†Â¶Ç‰∏ãÁ¥¢Âºïmysql&gt; create index idx_b_card on book(card);mysql&gt; create index idx_p_card on phone(card);-- Êü•ËØ¢Â¢ûÂä†Á¥¢ÂºïÂêéÁöÑÊâßË°åËÆ°Âàí---- ÊúÄÂêé‰∏§‰∏™type ÂùáÊòØ ref, rows = 20 + 1 + 1mysql&gt; explain select * from class left join book on class.card = book.card left join phone on class.card = phone.card;+----+-------------+-------+------------+------+---------------+------------+---------+-------------------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+------------+---------+-------------------+------+----------+-------------+| 1 | SIMPLE | class | NULL | ALL | NULL | NULL | NULL | NULL | 20 | 100.00 | NULL || 1 | SIMPLE | book | NULL | ref | idx_b_card | idx_b_card | 4 | runoob.class.card | 1 | 100.00 | Using index || 1 | SIMPLE | phone | NULL | ref | idx_p_card | idx_p_card | 4 | runoob.class.card | 1 | 100.00 | Using index |+----+-------------+-------+------------+------+---------------+------------+---------+-------------------+------+----------+-------------+3 rows in set, 1 warning (0.00 sec) „ÄêSQL ‰ºòÂåñÁªìËÆ∫„Äë Â∞ΩÂèØËÉΩÂáèÂ∞ë Join ËØ≠Âè•‰∏≠ÁöÑ Nested Loop (ÂµåÂ•óÂæ™ÁéØ)„ÄÇ ‰ºòÂÖà Nested Loop ‰∏≠ÁöÑÂÜÖÂ±ÇÂæ™ Ê∞∏ËøúÁî®Â∞èÁªìÊûúÈõÜÈ©±Âä®Â§ßÁöÑÁªìÊûúÈõÜ„ÄÇ ÂΩìÊó†Ê≥ï‰øùËØÅË¢´È©±Âä®Ë°®ÁöÑ Join Êù°‰ª∂Â≠óÊÆµË¢´Á¥¢Âºï‰∏îÂÜÖÂ≠òËµÑÊ∫êÂÖÖË∂≥ÁöÑÂâçÊèê‰∏ãÔºå‰∏çË¶ÅÂ§™ÂêùÂï¨ JoinBuffer ËÆæÁΩÆ ÂèÇËÄÉÊù•Ê∫êÔºöbilibili.MySQLÈ´òÁ∫ß_explain‰πãÁÉ≠Ë∫´Case]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÊÄßËÉΩ‰ºòÂåñ‰πãExplainÊµÖÊûêÔºà‰∏ãÔºâ]]></title>
    <url>%2F2019%2F08%2F20%2FMySQL%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8BExplain%E6%B5%85%E6%9E%90%EF%BC%88%E4%B8%8B%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: Êé•‰∏äÁØá MySQLÊÄßËÉΩ‰ºòÂåñ‰πãExplainÊµÖÊûêÔºà‰∏äÔºâ„ÄÇ 1: explain ÁöÑ‰ΩøÁî®ÂèäÂÖ∂Â≠óÊÆµËØ¥Êòé12345678-- ÂæóÂà∞ÁöÑÊâßË°åËÆ°ÂàíÂ¶Ç‰∏ãË°®mysql&gt; explain select * from employees;+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------+| 1 | SIMPLE | employees | NULL | ALL | NULL | NULL | NULL | NULL | 107 | 100.00 | NULL |+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------+1 row in set, 1 warning (0.01 sec) 1.1: possible_keys Â≠óÊÆµÂê´‰πâÊàñÁî®ÈÄî: ÊòæÁ§∫ÂèØËÉΩÂ∫îÁî®Âà∞ËøôÂº†Ë°®‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™Á¥¢Âºï„ÄÇÊü•ËØ¢Ê∂âÂèäÂà∞ÁöÑÂ≠óÊÆµ‰∏äËã•Â≠òÂú®Á¥¢ÂºïÔºåÂàôËØ•Á¥¢ÂºïÂàóË¢´ÂàóÂá∫Ôºå‰ΩÜÊòØËØ•Á¥¢ÂºïÂàó‰∏ç‰∏ÄÂÆöË¢´ÂÆûÈôÖ‰ΩøÁî®„ÄÇ 1.2: keys Â≠óÊÆµÂê´‰πâÊàñÁî®ÈÄî: ÂÆûÈôÖ‰ΩøÁî®ÁöÑÁ¥¢Âºï„ÄÇÂ¶ÇÊûú‰∏∫NullÔºåÂàôÊ≤°Êúâ‰ΩøÁî®Á¥¢Âºï„ÄÇËã•Êü•ËØ¢‰∏≠‰ΩøÁî®‰∫ÜË¶ÜÁõñÁ¥¢ÂºïÔºåÂàôËØ•Á¥¢Âºï‰ªÖÂá∫Áé∞Âú® key Âàó‰∏≠„ÄÇ 123456mysql&gt; explain select department_id,location_id from departments;+----+-------------+-------------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+| 1 | SIMPLE | departments | NULL | index | NULL | loc_id_fk | 5 | NULL | 27 | 100.00 | Using index |+----+-------------+-------------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+ 1.3: key_len Â≠óÊÆµÂê´‰πâÊàñÁî®ÈÄî: Ë°®Á§∫Á¥¢Âºï‰∏≠ÂÆûÈôÖÁî®Âà∞ÁöÑÂ≠óËäÇÊï∞ÔºåÂèØÈÄöËøáËØ•ÂàóËÆ°ÁÆóÊü•ËØ¢‰∏≠‰ΩøÁî®ÁöÑÁ¥¢ÂºïÈïøÂ∫¶„ÄÇÂú®‰∏çÊçüÂ§±Á≤æÂ∫¶ÁöÑÊÉÖÂÜµ‰∏ãÔºåÈïøÂ∫¶Ë∂äÁü≠Ë∂äÂ•Ω„ÄÇkey_len ÊòæÁ§∫ÁöÑÂÄº‰∏∫Á¥¢ÂºïÂ≠óÊÆµÁöÑÊúÄÂ§ßÂèØËÉΩÈïøÂ∫¶ÔºåÂπ∂ÈùûÂÆûÈôÖ‰ΩøÁî®ÈïøÂ∫¶ÔºåÂç≥ key_len ÊòØÊ†πÊçÆË°®ÂÆö‰πâËÆ°ÁÆóËÄåÂæóÔºå‰∏çÊòØÈÄöËøáË°®ÂÜÖÊ£ÄÁ¥¢ËÄåÂæó„ÄÇ 1234567891011121314151617-- ‰∏Ä‰∏™Êü•ËØ¢Êù°‰ª∂mysql&gt; explain select * from employees where job_id="IT_PROG";+----+-------------+-----------+------------+------+---------------+-----------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+------+---------------+-----------+---------+-------+------+----------+-------+| 1 | SIMPLE | employees | NULL | ref | job_id_fk | job_id_fk | 23 | const | 5 | 100.00 | NULL |+----+-------------+-----------+------------+------+---------------+-----------+---------+-------+------+----------+-------+1 row in set, 1 warning (0.02 sec)-- ‰∏§‰∏™Êü•ËØ¢Êù°‰ª∂mysql&gt; explain select * from employees where job_id="IT_PROG" and employee_id&gt;100;+----+-------------+-----------+------------+-------+-------------------+-----------+---------+------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+-------+-------------------+-----------+---------+------+------+----------+-----------------------+| 1 | SIMPLE | employees | NULL | range | PRIMARY,job_id_fk | job_id_fk | 27 | NULL | 5 | 100.00 | Using index condition |+----+-------------+-----------+------------+-------+-------------------+-----------+---------+------+------+----------+-----------------------+1 row in set, 1 warning (0.01 sec) 1.4: ref Â≠óÊÆµÂê´‰πâÊàñÁî®ÈÄî: ÊòæÁ§∫Á¥¢ÂºïÁöÑÈÇ£‰∏ÄÂàóË¢´‰ΩøÁî®‰∫ÜÔºåÂ¶ÇÊûúÂèØËÉΩÁöÑËØùÔºåÊòØ‰∏Ä‰∏™Â∏∏Êï∞Ôºå 12345678-- employees.job_id='AC_MGR'Ëß£Êûê‰∏∫‰∏Ä‰∏™Â∏∏Èáèconstmysql&gt; explain select * from employees,departments where employees.department_id = departments.department_id and employees.job_id='AC_MGR';+----+-------------+-------------+------------+--------+----------------------+-----------+---------+-------------------------------------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------------+------------+--------+----------------------+-----------+---------+-------------------------------------+------+----------+-------------+| 1 | SIMPLE | employees | NULL | ref | dept_id_fk,job_id_fk | job_id_fk | 23 | const | 1 | 100.00 | Using where || 1 | SIMPLE | departments | NULL | eq_ref | PRIMARY | PRIMARY | 4 | myemployees.employees.department_id | 1 | 100.00 | NULL |+----+-------------+-------------+------------+--------+----------------------+-----------+---------+-------------------------------------+------+----------+-------------+ 1.5: rows Â≠óÊÆµÂê´‰πâÊàñÁî®ÈÄî: ÊØèÂº†Ë°®ÊúâÂ§öÂ∞ëË°åË¢´‰ºòÂåñÂô®Êü•ËØ¢ÔºàÂÄºË∂äÂ∞ëË∂äÂ•ΩÔºâ„ÄÇÊ≠§Êï∞Â≠óÊòØ‰º∞ÁÆóÂÄºÔºåÂèØËÉΩÂπ∂‰∏çÊÄªÊòØÂáÜÁ°ÆÁöÑ 1.6: Extra Â≠óÊÆµ Using filesort: ËØ¥Êòé MySQL ‰ºöÂØπÊï∞ÊçÆ‰ΩøÁî®‰∏Ä‰∏™ Â§ñÈÉ®ÁöÑÁ¥¢ÂºïÊéíÂ∫èÔºåËÄå‰∏çÊòØÊåâÁÖßË°®ÂÜÖÁöÑÁ¥¢ÂºïÈ°∫Â∫èËøõË°åËØªÂèñ„ÄÇMySQL ‰∏≠Êó†Ê≥ïÂà©Áî®Á¥¢ÂºïÂÆåÊàêÁöÑÊéíÂ∫èÁß∞‰πã‰∏∫ Êñá‰ª∂ÊéíÂ∫è„ÄÇÂá∫Áé∞Êó∂Ë°®Á§∫ÈúÄË¶Å‰ºòÂåñ‰∫Ü 12345678910111213141516171819202122232425mysql&gt; show index from apps;+-------+------------+--------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |+-------+------------+--------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+| apps | 0 | PRIMARY | 1 | id | A | 5 | NULL | NULL | | BTREE | | || apps | 1 | idx_url_country_language | 1 | url | A | 5 | NULL | NULL | | BTREE | | || apps | 1 | idx_url_country_language | 2 | country | A | 5 | NULL | NULL | | BTREE | | || apps | 1 | idx_url_country_language | 3 | language | A | 5 | NULL | NULL | | BTREE | | |+-------+------------+--------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+---------------+4 rows in set (0.00 sec)-- ÁªÑÂêàÁ¥¢ÂºïÊòØ idx_url_country_languageÔºå ‰∏ãÈù¢ÁöÑSQL ‰∏≠Èó¥Èöî‰∫ÜÁªÑÂêàÁ¥¢ÂºïÁöÑ country Â≠óÊÆµmysql&gt; explain select * from apps where url="https://golang.org" order by language;+----+-------------+-------+------------+------+--------------------------+--------------------------+---------+-------+------+----------+---------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+------+--------------------------+--------------------------+---------+-------+------+----------+---------------------------------------+| 1 | SIMPLE | apps | NULL | ref | idx_url_country_language | idx_url_country_language | 767 | const | 1 | 100.00 | Using index condition; Using filesort |+----+-------------+-------+------------+------+--------------------------+--------------------------+---------+-------+------+----------+---------------------------------------+mysql&gt; explain select * from apps where url="https://golang.org" order by country,language;+----+-------------+-------+------------+------+--------------------------+--------------------------+---------+-------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+------+--------------------------+--------------------------+---------+-------+------+----------+-----------------------+| 1 | SIMPLE | apps | NULL | ref | idx_url_country_language | idx_url_country_language | 767 | const | 1 | 100.00 | Using index condition |+----+-------------+-------+------------+------+--------------------------+--------------------------+---------+-------+------+----------+-----------------------+ Using temporary: ‰ΩøÁî®‰∏¥Êó∂Ë°®‰øùÂ≠ò‰∏≠Èó¥Êü•ËØ¢ÁªìÊûúÔºåMySQL Âú®ÂØπÁªìÊûúÊéíÂ∫èÊó∂‰ΩøÁî®‰∏¥Êó∂Ë°®ÔºåÂ∏∏ËßÅ‰∫éÊéíÂ∫è order by Âíå ÂàÜÁªÑÊü•ËØ¢ group by„ÄÇÂá∫Áé∞Êó∂Ë°®Á§∫ ÊÄ•ÈúÄ‰ºòÂåñ ‰∫Ü 123456mysql&gt; explain select country from apps group by country;+----+-------------+-------+------------+-------+--------------------------+--------------------------+---------+------+------+----------+----------------------------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+-------+--------------------------+--------------------------+---------+------+------+----------+----------------------------------------------+| 1 | SIMPLE | apps | NULL | index | idx_url_country_language | idx_url_country_language | 895 | NULL | 5 | 100.00 | Using index; Using temporary; Using filesort |+----+-------------+-------+------------+-------+--------------------------+--------------------------+---------+------+------+----------+----------------------------------------------+ Using index: Ë°®Á§∫Áõ∏Â∫îÁöÑ select Êìç‰Ωú‰ΩøÁî®‰∫ÜË¶ÜÁõñÁ¥¢ÂºïÔºàCovering indexÔºâ,ÈÅøÂÖçËÆøÈóÆË°®ÁöÑÊï∞ÊçÆË°åÔºåÊïàÁéáËøòÈòî‰ª•„ÄÇÂ¶ÇÊûúËøòÂêåÊó∂Âá∫Áé∞‰∫Ü using whereÔºåË°®ÊòéÁ¥¢ÂºïËøòË¢´Áî®Êù•ÊâßË°åÁ¥¢ÂºïÂÄºÁöÑÊü•Êâæ„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂêåÊó∂Âá∫Áé∞ using whereÔºåË°®ÊòéÁ¥¢ÂºïÂè™ÊòØÁî®Êù•ËØªÂèñÊï∞ÊçÆËÄåÈùûÊâßË°åÊü•ËØ¢Êìç‰Ωú„ÄÇ 123456mysql&gt; explain select employee_id from employees where employee_id order by employee_id;+----+-------------+-----------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------+| 1 | SIMPLE | employees | NULL | index | NULL | PRIMARY | 4 | NULL | 107 | 90.00 | Using where; Using index |+----+-------------+-----------+------------+-------+---------------+---------+---------+------+------+----------+--------------------------+ Ë¶ÜÁõñÁ¥¢ÂºïÔºöMySQL ÂèØ‰ª•Âà©Áî®Á¥¢ÂºïËøîÂõû `select` Êü•ËØ¢ÁöÑÂ≠óÊÆµÔºåËÄå‰∏çÂøÖÊ†πÊçÆÁ¥¢ÂºïÂÜçÊ¨°ÂéªËØªÂèñÊï∞ÊçÆÊñá‰ª∂„ÄÇ‰πüÂ∞±ÊòØËØ¥Êü•ËØ¢ÁöÑÂàóÊòØÁ¥¢ÂºïÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÈÇ£‰πàÊü•ËØ¢Â∞±Âè™Âú®Á¥¢Âºï‰∏äËøõË°å„ÄÇ using join buffer: ‰ΩøÁî®‰∫ÜËøûÊé•ÁºìÂ≠ò impossible where: where Â≠óÂè•ÁöÑÂÄºÊÄªÊòØ falseÔºå‰∏çËÉΩÁî®Êù•Ëé∑Âèñ‰ªª‰ΩïÂÖÉÁ•ñ 123456mysql&gt; explain select * from employees where employee_id= 1 and employee_id=2;+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------------+| 1 | SIMPLE | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | NULL | Impossible WHERE |+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+------------------+]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÊÄßËÉΩ‰ºòÂåñ‰πãExplainÊµÖÊûêÔºà‰∏äÔºâ]]></title>
    <url>%2F2019%2F08%2F19%2FMySQL%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8BExplain%E6%B5%85%E6%9E%90%EF%BC%88%E4%B8%8A%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: Âú®ËΩØ‰ª∂ÂºÄÂèë‰∏≠ÔºåÈÅµÂæ™ÁùÄ first finish then perfect ÁöÑÂéüÂàô„ÄÇÂâçÊúüÊàë‰ª¨ÂæÄÂæÄ‰ºöÊõ¥Âä†ÂÖ≥Ê≥®Á®ãÂ∫èÂäüËÉΩÁöÑÂÆûÁé∞ÔºåÁºñÂÜôÁöÑ SQL ËØ≠Âè•‰πüÂ§ö‰∏∫Êª°Ë∂≥‰∏öÂä°ÊâÄÈúÄÁöÑÂ¢ûÂà†ÊîπÊü•„ÄÇÂ¶ÇÊûúËøêÊ∞îËøò‰∏çÈîôÔºå‰∏öÂä°ÂÅöËµ∑Êù•‰∫ÜÔºåÊï∞ÊçÆÈáèËææÂà∞‰∏ÄÂÆöÈáèÁ∫ßÊó∂ÔºåÊàë‰ª¨ÂèëÁé∞‰∏Ä‰∏™ËØ∑Ê±ÇÁöÑÂìçÂ∫îÊó∂Èó¥‰ºöË∂äÊù•Ë∂äÈöæ‰ª•Êé•ÂèóÔºåÂÖ∂‰∏≠Êüê‰∫õ‰∏çÂÜçÂêàÁêÜÁöÑ SQL ÂæÄÂæÄ‰ºöÊàê‰∏∫Êï¥‰∏™ËØ∑Ê±ÇÂìçÂ∫î‰∏≠ÊÄßËÉΩÊ∂àËÄóÂ§ßÊà∑ÔºåÁîöËá≥Êàê‰∏∫ÊÄßËÉΩÁì∂È¢àÔºåÈÇ£‰πàÊ≠§Êó∂ÂØπ SQL ËØ≠Âè•ÁöÑ‰ºòÂåñÂ∞±ÊòæÂæóÊ†ºÂ§ñÈáçË¶Å‰∫Ü„ÄÇË¶Å‰ºòÂåñ SQL Â∞±ÈúÄË¶ÅÂÆö‰Ωç SQL Â≠òÂú®ÁöÑÈóÆÈ¢ò„ÄÇMySQL Êèê‰æõ‰∫Ü explain + sql ÂëΩ‰ª§Êù•Ëé∑Âèñ SQL ËØ≠Âè•ÊâßË°åËÆ°ÂàíÁöÑ‰ø°ÊÅØÔºåÂåÖÊã¨ÊúâÂÖ≥Â¶Ç‰ΩïËøûÊé•Ë°®‰ª•Âèä‰ª•‰ΩïÁßçÈ°∫Â∫èËøûÊé•Ë°®„ÄÇ‰ª•‰∏ã‰∏∫ explain Â≠¶‰π†‰∏≠ÊâÄÂÅöÁ¨îËÆ∞ÔºåËÆ∞ÂΩï‰∫éÊ≠§üìù‰ª•‰æø‰ªäÂêéÁøªÈòÖ„ÄÇ Èâ¥‰∫éÁØáÂπÖ: ËøôÈáåËÆ∞ÂΩïÊà™Ëá≥ explain ‰∏≠ type ÂâçÁöÑÂ≠óÊÆµ Â§áÊ≥®: Êñá‰∏≠Áî®Âà∞ÁöÑsqlÊï∞ÊçÆÊù•Ëá™ employees.sql 1: explain ËÉΩËé∑ÂèñÂà∞ÈÇ£‰∫õ‰ø°ÊÅØÔºü Ë°®ÁöÑËØªÂèñÈ°∫Â∫è Ë°®Êï∞ÊçÆËØªÂèñÊìç‰ΩúÔºàselectÔºâÁöÑÁ±ªÂûã ÈÇ£‰∫õÊâÄÊúâÈòî‰ª•Ë¢´‰ΩøÁî® ÈÇ£‰∫õÁ¥¢ÂºïÂÆûÈôÖË¢´‰ΩøÁî® Ë°®‰πãÈó¥ÁöÑÂºïÁî® ÊØèÂº†Ë°®ÊúâÂ§öÂ∞ëË°åË¢´‰ºòÂåñÂô®Êü•ËØ¢ 2: explain ÁöÑ‰ΩøÁî®ÂèäÂÖ∂Â≠óÊÆµËØ¥Êòé12345678-- ÂæóÂà∞ÁöÑÊâßË°åËÆ°ÂàíÂ¶Ç‰∏ãË°®mysql&gt; explain select * from employees;+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------+| 1 | SIMPLE | employees | NULL | ALL | NULL | NULL | NULL | NULL | 107 | 100.00 | NULL |+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------+1 row in set, 1 warning (0.01 sec) 2.1: id Â≠óÊÆµÂê´‰πâÊàñÁî®ÈÄî: select Êü•ËØ¢ÁöÑÂ∫èÂàóÂè∑ÔºåÂåÖÂê´‰∏ÄÁªÑÊï∞Â≠óÔºåË°®Á§∫Êü•ËØ¢‰∏≠ÊâßË°å select Â≠óÂè•ÊàñÊòØÊìç‰ΩúË°®ÁöÑÈ°∫Â∫è id ÁöÑ‰∏âÁßçÊÉÖÂΩ¢ id Áõ∏ÂêåÔºåÊâßË°åÈ°∫Â∫èËá™‰∏äËÄå‰∏ã 123456789101112-- Êü•ËØ¢ÂëòÂ∑•ÂêçÔºåÈÉ®Èó®Âêçmysql&gt; explain SELECT employees.employee_id,employees.last_name, departments.department_name -&gt; from employees -&gt; inner join departments -&gt; on employees.department_id = departments.department_id;+----+-------------+-------------+------------+------+---------------+------------+---------+---------------------------------------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------------+------------+------+---------------+------------+---------+---------------------------------------+------+----------+-------+| 1 | SIMPLE | departments | NULL | ALL | PRIMARY | NULL | NULL | NULL | 27 | 100.00 | NULL || 1 | SIMPLE | employees | NULL | ref | dept_id_fk | dept_id_fk | 5 | myemployees.departments.department_id | 9 | 100.00 | NULL |+----+-------------+-------------+------------+------+---------------+------------+---------+---------------------------------------+------+----------+-------+2 rows in set, 1 warning (0.00 sec) ËØ¥Êòé: Ë°®ËØªÂèñÈ°∫Â∫èÊòØÂÖà departments Âêé departments„ÄÇ id ‰∏çÂêåÔºåÂ¶ÇÊûúÊòØÂ≠êÊü•ËØ¢Ôºåid ÁöÑÂ∫èÂè∑‰ºöÈÄíÂ¢ûÔºåid ÂÄºË∂äÂ§ßÂÖ∂‰ºòÂÖàÁ∫ßË∂äÈ´òÔºåÂ∞±Ë∂äÂÖàË¢´ÊâßË°å„ÄÇ 123456789mysql&gt; explain select * from employees where salary = (select max(salary) from employees);+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+| 1 | PRIMARY | employees | NULL | ALL | NULL | NULL | NULL | NULL | 107 | 10.00 | Using where || 2 | SUBQUERY | employees | NULL | ALL | NULL | NULL | NULL | NULL | 107 | 100.00 | NULL |+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+2 rows in set, 1 warning (0.00 sec) ËØ¥Êòé: Ë°®ÊâßË°åÈ°∫Â∫èÊòØÂÖàÊâßË°å id ‰∏∫ 2 ÁöÑÂ≠êÊü•ËØ¢ÂêéÊâßË°å id ‰∏∫ 1 ÁöÑ‰∏ªÊü•ËØ¢„ÄÇ id Áõ∏Âêå‰∏çÂêåÔºåÂêåÊó∂Â≠òÂú®Ôºà‚ùìËøôÊòØ‰ªÄ‰πàÈ¨ºüëªÔºâ 123456789mysql&gt; Ê≤°ÊâæÂà∞‰æãÂ≠êÔºå‰∏ãÈù¢Â∞±Âè™Ë°®Á§∫‰∏Ä‰∏ã‰∫ÜüòÇüòÇüòÇ(Âè™ÂÖ≥Ê≥® id Â∞±Ë°å)+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+| 1 | PRIMARY | employees | NULL | ALL | NULL | NULL | NULL | NULL | 107 | 10.00 | Using where || 1 | PRIMARY | employees | NULL | ALL | NULL | NULL | NULL | NULL | 107 | 100.00 | NULL || 2 | SUBQUERY | employees | NULL | ALL | NULL | NULL | NULL | NULL | 107 | 100.00 | NULL |+----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+2 rows in set, 1 warning (0.00 sec) ËØ¥Êòé: id Â≠óÊÆµ‰∏≠Êï∞Â≠óÂ§ßÁöÑÂÖàÊâßË°åÔºåÂç≥ÊòØ 2ÂÖàÊâßË°åÔºåÁÑ∂ÂêéÂ≠òÂú®‰∏§‰∏™ËØÑ‰ª∑ÁöÑ 1ÔºåÊåâ Ëá™‰∏äËÄå‰∏ãÁöÑÂÖàÂêéÈ°∫Â∫èÊâßË°å„ÄÇ 2.2: select_type Â≠óÊÆµÂê´‰πâÊàñÁî®ÈÄî: Ë°®Á§∫ SELECT ÁöÑÁ±ªÂûãÔºå‰∏ªË¶ÅÁî®‰∫éÂå∫Âà´ ÊôÆÈÄöÊü•ËØ¢„ÄÅËÅîÂêàÊü•ËØ¢„ÄÅÂ≠êÊü•ËØ¢Á≠âÂ§çÊùÇÊü•ËØ¢„ÄÇÂ∏∏ËßÅÁöÑÂèñÂÄºÂ¶Ç‰∏ã 1-SIMPLE: ÁÆÄÂçï select Êü•ËØ¢Ôºå‰∏çÂåÖÂê´Â≠êÊü•ËØ¢ÊàñËÄÖËøûÊé•Êü•ËØ¢ÔºàunionÔºâ 2-PRIMARY: ‰∏ªÊü•ËØ¢ÔºåÂç≥ÊòØÂ§ñÂ±ÇÁöÑÊü•ËØ¢ÔºàÊü•ËØ¢‰∏≠ÂåÖÂê´‰∫ÜÂ≠êÊü•ËØ¢ÔºâÔºåPRIMARY ÊòØÊúÄÂêéÂä†ËΩΩÁöÑÊü•ËØ¢ 3-SUBQUERY: Âú® SELECT Êàñ where Êü•ËØ¢ÂåÖÂê´‰∫Ü Â≠êÊü•ËØ¢ 4-DERIVED: Âú® From ÂàóË°®‰∏≠ÂåÖÂê´ÁöÑÂ≠êÊü•ËØ¢Ë¢´Ê†áËÆ∞‰∏∫ DEVIRED(Ë°çÁîü)„ÄÇMySQL‰ºöÈÄíÂΩíÊâßË°åËøô‰∫õÂ≠êÊü•ËØ¢ÔºåÊääÁªìÊûúÊîæÂú®‰∏¥Êó∂Ë°®‰∏≠Ôºà‰ºöÂ¢ûÂä†Á≥ªÁªüÊ∂àËÄóÔºâ 5-UNION: Ëã•Á¨¨‰∫å‰∏™ SELECT Âá∫Áé∞Âú® UNION ‰πãÂêéÔºåÂàôÊ†áËÆ∞‰∏∫ UNION; Ëã• UNION ÂåÖÂê´Âú® FROM Â≠óÂè•ÁöÑÂ≠êÊü•ËØ¢‰∏≠ÔºåÂ§ñÂ±ÇÁöÑ SELECT Ë¢´Ê†áËÆ∞ DEVIRED 6-UNION RESULT: ‰∏§Áßç UNION ÁªìÊûúÁöÑÂêàÂπ∂ 123456789mysql&gt; explain select * from employees where email like '%a%' union select * from employees where department_id&gt;90;+----+--------------+------------+------------+-------+---------------+------------+---------+------+------+----------+-----------------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+-----+--------------+------------+------------+-------+---------------+------------+---------+------+------+----------+-----------------------+| 1 | PRIMARY | employees | NULL | ALL | NULL | NULL | NULL | NULL | 107 | 11.11 | Using where || 2 | UNION | employees | NULL | range | dept_id_fk | dept_id_fk | 5 | NULL | 8 | 100.00 | Using index condition || NULL| UNION RESULT | &lt;union1,2&gt; | NULL | ALL | NULL | NULL | NULL | NULL | NULL | NULL | Using temporary |+----+--------------+------------+------------+-------+---------------+------------+---------+------+------+----------+-----------------------+3 rows in set, 1 warning (0.00 sec) 2.3: table Â≠óÊÆµÂê´‰πâÊàñÁî®ÈÄî: ËæìÂá∫ÁªìÊûúÈõÜÁöÑË°®ÔºàÊü•ËØ¢ÁªìÊûúÁöÑÊù•Ê∫êË°®Ôºâ 2.4: type Â≠óÊÆµÂê´‰πâÊàñÁî®ÈÄî: ÊòæÁ§∫Êü•ËØ¢‰ΩøÁî®‰∫Ü‰ΩïÁßçËøûÊé•Á±ªÂûã„ÄÇÁªìÊûúÂÄº‰ªéÊúÄÂ•ΩÂà∞ÊúÄÂùè‰æùÊ¨°Â¶Ç‰∏ãÔºåÈÄöÂ∏∏Êù•ËØ¥‰øùËØÅ type ÂÄºËÉΩËææÂà∞ Range„ÄÇ system &gt; const &gt; eq_ref &gt; ref &gt; range &gt; index &gt; all 1-system: ÂçïË°®Âè™Êúâ‰∏ÄË°åËÆ∞ÂΩïÔºàÁ≠â‰∫éÁ≥ªÁªüË°®ÔºâÔºåÊòØconstËøûÊé•Á±ªÂûãÁöÑÁâπ‰æã„ÄÇÂèØ‰ª•ÂøΩÁï•‰∏çËÆ° 2-const: ËØ•Ë°®ÊúÄÂ§öÂè™Êúâ‰∏Ä‰∏™ÂåπÈÖçË°åÔºåÂú®Êü•ËØ¢ÂºÄÂ§¥ËØªÂèñ„ÄÇÂõ†‰∏∫Âè™Êúâ‰∏ÄË°åÔºåÊâÄ‰ª•‰ºòÂåñÂô®ÁöÑÂÖ∂‰ΩôÈÉ®ÂàÜÂèØ‰ª•Â∞ÜÊ≠§Ë°å‰∏≠ÂàóÁöÑÂÄºËßÜ‰∏∫Â∏∏Èáè„ÄÇconstË°®ÈùûÂ∏∏Âø´ÔºåÂõ†‰∏∫ÂÆÉ‰ª¨Âè™ËØª‰∏ÄÊ¨°„ÄÇconst Â∞Ü PRIMARY KEYÊàñ UNIQUEÁ¥¢ÂºïÁöÑÊâÄÊúâÈÉ®ÂàÜ‰∏éÂ∏∏ÈáèÂÄºËøõË°åÊØîËæÉÊó∂‰ΩøÁî®„ÄÇ 1234567-- ‰∏ªÈîÆ employee_id = 100 ÊòØ‰∏Ä‰∏™Â∏∏ÈáèÔºåÂØπÂ∫î‰∏ÄÊù°ËÆ∞ÂΩïÔºå type ‰∏∫ constmysql&gt; explain select * from (select * from employees where employee_id = 100) as tmp;+----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+| 1 | SIMPLE | employees | NULL | const | PRIMARY | PRIMARY | 4 | const | 1 | 100.00 | NULL |+----+-------------+-----------+------------+-------+---------------+---------+---------+-------+------+----------+-------+ 3-eq_ref: ÂîØ‰∏ÄÊÄßÁ¥¢ÂºïÔºàPRIMARY KEY Êàñ UNIQUE NOT NULLÔºâÊâ´ÊèèÔºåÂØπ‰∫éÊØè‰∏™Á¥¢ÂºïÈîÆÔºåË°®‰∏≠Âè™Êúâ‰∏Ä‰∏™ËÆ∞ÂΩï‰∏é‰πãÂåπÈÖç„ÄÇÂ∏∏ËßÅ‰∫é‰∏ªÈîÆÊàñÂîØ‰∏ÄÁ¥¢Âºï 12345678-- job_id='AC_MGR' Âú®employeesË°®‰∏≠Âè™Êúâ‰∏ÄÊù°ËÆ∞ÂΩï;mysql&gt; explain select * from employees,departments where employees.job_id='AC_MGR' and departments.department_id = employees.department_id;+----+-------------+-------------+------------+--------+----------------------+-----------+---------+-------------------------------------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------------+------------+--------+----------------------+-----------+---------+-------------------------------------+------+----------+-------------+| 1 | SIMPLE | employees | NULL | ref | dept_id_fk,job_id_fk | job_id_fk | 23 | const | 1 | 100.00 | Using where || 1 | SIMPLE | departments | NULL | eq_ref | PRIMARY | PRIMARY | 4 | myemployees.employees.department_id | 1 | 100.00 | NULL |+----+-------------+-------------+------------+--------+----------------------+-----------+---------+-------------------------------------+------+----------+-------------+ 4-ref: ÈùûÂîØ‰∏ÄÊÄßÁ¥¢ÂºïÊâ´Êèè, ËøîÂõûÂåπÈÖçÊüê‰∏™ÂçïÁã¨ÂÄºÁöÑÊâÄÊúâË°åËÆ∞ÂΩï„ÄÇ 1234567-- job_id ÊòØ‰∏Ä‰∏™Á¥¢ÂºïÔºåÈÖçÁΩÆjob_id = 'SA_REP' ÁöÑÊâÄÊúâËÆ∞ÂΩïmysql&gt; explain select * from employees where job_id='SA_REP';+----+-------------+-----------+------------+------+---------------+-----------+---------+-------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+------+---------------+-----------+---------+-------+------+----------+-------+| 1 | SIMPLE | employees | NULL | ref | job_id_fk | job_id_fk | 23 | const | 30 | 100.00 | NULL |+----+-------------+-----------+------------+------+---------------+-----------+---------+-------+------+----------+-------+ 5-range: Á¥¢Âºï‰ªÖÊ£ÄÁ¥¢ÁªôÂÆöËåÉÂõ¥ÂÜÖÁöÑË°åÔºå‰ΩøÁî®Á¥¢ÂºïÈÄâÊã©Ë°å 1234567-- ‰ΩøÁî® =Ôºå &lt;&gt;Ôºå &gt;Ôºå &gt;=Ôºå &lt;Ôºå &lt;=Ôºå IS NULLÔºå &lt;=&gt;Ôºå BETWEENÔºå LIKEÔºåÊàñ IN()ËøêÁÆóÁ¨¶mysql&gt; explain select * from employees where employee_id&gt;100;+----+-------------+-----------+------------+-------+---------------+---------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-----------+------------+-------+---------------+---------+---------+------+------+----------+-------------+| 1 | SIMPLE | employees | NULL | range | PRIMARY | PRIMARY | 4 | NULL | 106 | 100.00 | Using where |+----+-------------+-----------+------------+-------+---------------+---------+---------+------+------+----------+-------------+ 6-index: index ‰∏é all ÁöÑÂå∫Âà´‰∏∫ index Á±ªÂûãÂè™ÈÅçÂéÜÁ¥¢ÂºïÊï∞üå≤ÔºåÊâÄ‰ª•ÊØî all Âø´„ÄÇÂõ†‰∏∫Á¥¢ÂºïÊñá‰ª∂ÈÄöÂ∏∏ÊØîÊï∞ÊçÆÊñá‰ª∂Â∞èÔºåËôΩÁÑ∂‰∏§ËÄÖÈÉΩÊòØÊâ´ÊèèÂÖ®Ë°®Ôºå‰ΩÜÊòØ index ‰ªéÁ¥¢Âºï‰∏≠ËØªÂèñÔºåËÄå all ÊòØ‰ªéÁ°¨Áõò‰∏≠ËØªÂèñ„ÄÇ 123456789101112131415161718192021222324-- Êü•ÁúãË°® departments ÁöÑÁ¥¢ÂºïÊÉÖÂÜµmysql&gt; show index from departments;+-------------+------------+-----------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+---------------+| Table | Non_unique | Key_name | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment | Index_comment |+-------------+------------+-----------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+---------------+| departments | 0 | PRIMARY | 1 | department_id | A | 27 | NULL | NULL | | BTREE | | || departments | 1 | loc_id_fk | 1 | location_id | A | 7 | NULL | NULL | YES | BTREE | | |+-------------+------------+-----------+--------------+---------------+-----------+-------------+----------+--------+------+------------+---------+---------------+-- Ë¶ÜÁõñÁ¥¢Âºïmysql&gt; explain select department_id, location_id from departments;+----+-------------+-------------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+| 1 | SIMPLE | departments | NULL | index | NULL | loc_id_fk | 5 | NULL | 27 | 100.00 | Using index |+----+-------------+-------------+------------+-------+---------------+-----------+---------+------+------+----------+-------------+-- manager_id‰∏çÊòØÁ¥¢ÂºïÂ≠óÊÆµmysql&gt; explain select department_id, location_id, manager_id from departments;+----+-------------+-------------+------------+------+---------------+------+---------+------+------+----------+-------+| id | select_type | table | partitions | type | possible_keys | key | key_len | ref | rows | filtered | Extra |+----+-------------+-------------+------------+------+---------------+------+---------+------+------+----------+-------+| 1 | SIMPLE | departments | NULL | ALL | NULL | NULL | NULL | NULL | 27 | 100.00 | NULL |+----+-------------+-------------+------------+------+---------------+------+---------+------+------+----------+-------+ 1explain select * from employees where salary=&apos;20000&apos;; Êú™ÂÆåÂæÖÁª≠]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞Â≠¶ÊÄùÁª¥‰øÆÁÇº‰∏Ä: Êï∞ÊçÆÁöÑË°®Á§∫]]></title>
    <url>%2F2019%2F08%2F18%2F%E6%95%B0%E5%AD%A6%E6%80%9D%E7%BB%B4%E4%BF%AE%E7%82%BC%E4%B8%80-%E6%95%B0%E6%8D%AE%E7%9A%84%E8%A1%A8%E7%A4%BA%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÂâçÈù¢: ‰ª•‰∏ã‰∏∫‰π¶Á±çüìö „ÄäÁ®ãÂ∫èÂëòÁöÑÊï∞Â≠¶ÊÄùÁª¥‰øÆÁÇº„Äã Á¨¨1Á´† &lt;Êï∞ÊçÆÁöÑË°®Á§∫&gt; ËØª‰π¶ËÆ∞ÂΩï„ÄÇ 1: 8 Âíå 8.0 Áõ∏Á≠âÂêóÔºüÂê´‰πâÁõ∏ÂêåÂêóÔºü ‰ªéÊï∞ÂÄºÂ§ßÂ∞èÊØîËæÉÊù•ËØ¥Ôºå8.0 Âíå 8 ÊòØÁõ∏Á≠âÁöÑ„ÄÇ Âú®Ëøë‰ººÊï∞ÁöÑË°®Á§∫‰∏≠ÔºåÊï∞Â≠ó 8 Ë°®Á§∫Êï∞ÊçÆÂÄºÁ≤æÁ°ÆÂà∞‰∏™‰ΩçÔºåÂ¶Ç 7.9„ÄÅ8.2 Á≠âÊï∞Á≤æÁ°ÆÂà∞‰∏™‰ΩçÈÉΩË°®Á§∫‰∏∫ 8„ÄÇËÄå 8.0 ÂàôË°®Á§∫Êï∞ÊçÆÁ≤æÁ°ÆÂà∞ÂçÅÂàÜ‰ΩçÔºàÂ∞èÊï∞ÁÇπÂêé‰∏Ä‰ΩçÔºâÔºåÂ¶Ç 8.02„ÄÅ7.99 Á≠âÁ≤æÁ°ÆÂà∞ÂçÅÂàÜ‰ΩçÈÉΩË°®Á§∫‰∏∫ 8.0„ÄÇÂõ†Ê≠§‰ªéËøô‰∏™ËßíÂ∫¶Áúã‰∏§ËÄÖÊòØ‰∏çÂêåÁöÑ ps: ÁúãÈóÆÈ¢òÂæóÂàÜÂú∫ÊôØ‚ùì‚ùì‚ùì 2: ËøõÂà∂ÁöÑË°®Á§∫2.1: ‰∫å‰∫∫Á±ª‰∏∫‰ªÄ‰πà‰π†ÊÉØÂçÅËøõÂà∂Ôºü ‰∫∫Á±ªÊúÄÂºÄÂßãËÆ°Êï∞Êó∂ÔºåÈ¶ñÂÖàÊÉ≥Âà∞ÁöÑÊòØÁî® Êï∞ÊâãÊåá ÁöÑÊñπÂºèÊù•ËÆ°Êï∞ÔºåÊª° 10 ‰∏™‰ª•ÂêéÂÜçÂÄü‰∏ÄÂèåÊâãÔºåËøôÁßç ‰æøÊç∑ÊÄß ‰ΩøÂæó‰∫∫Á±ª‰π†ÊÉØ‰∫é‰ΩøÁî®ÂçÅËøõÂà∂„ÄÇ ÂçÅËøõÂà∂ÂØπÊØîÂÖ∂‰ªñËøõÂà∂ÔºàÂ¶Ç‰∫åËøõÂà∂ÔºâÊõ¥ÁÆÄÊ¥ÅÔºåÊõ¥ÊòìËØÜÂà´„ÄÇ 2.2: ËÆ°ÁÆóÊú∫‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®‰∫åËøõÂà∂Ôºü Â¶ÇÊûúËÆ°ÁÆóÊú∫‰ΩøÁî® ÂçÅËøõÂà∂ÔºåÈÇ£‰πàÈúÄË¶ÅËÆ©ÁîµËÑëËÉΩËØÜÂà´ ÂçÅËøõÂà∂ ‰∏≠ÁöÑÂçÅ‰∏™Êï∞Â≠ó„ÄÇÂÅáËÆæÊúÄÈ´òÁîµÂéãÊòØ 12VÔºåÈÇ£‰πà10‰∏™Êï∞Â≠ó‰∏≠ÊØè‰∏™Êï∞Á†ÅÔºà0~9ÔºâÂàÜÈÖçÂà∞ÁöÑÁîµÂéãÂå∫Èó¥ÊòØ 12 / 9 ‚âà 1.3(v)„ÄÇËøôÊ†∑ÂØºËá¥Êï∞Á†Å‰πãÈó¥ÁöÑÁîµÂéãÈó¥ÈöîÂ∞èÔºåÂ¶ÇÊûúÂ§ñÁïåÂπ≤Êâ∞ÈÄ†ÊàêÁîµÂéãÂ§ßÂπÖÂèòÂåñÔºåÊï∞ÊçÆÊ†áËØÜÂ∞±‰∏çÂ§™ÂáÜÁ°Æ‰∫Ü„ÄÇÂè¶Â§ñÊúÄÂ§ßÁöÑÈóÆÈ¢òÊòØÁ°¨‰ª∂‰∏äË¶ÅÊ†áËØÜÂçÅÁßçÁä∂ÊÄÅÁöÑËØùÔºåÂÖ∂ÁîµË∑ØÊûÑÈÄ†ÁöÑÂ§çÊùÇÂ∫¶Â∞±ÈùûÂ∏∏Â§çÊùÇ‰∫Ü ‰∫åËøõÂà∂ÁöÑÊäÄÊúØÂÆûÁé∞ÊØîËæÉÁÆÄÂçï„ÄÇÈÄªËæëÁîµË∑ØÈÄöÂ∏∏Â∞±Âè™Êúâ‰∏§ÁßçÁä∂ÊÄÅ [ÂºÄ or ÂÖ≥] ËøêÁÆóËßÑÂàôÁÆÄÂçïÔºåÂà©‰∫éÁÆÄÂåñËÆ°ÁÆóÊú∫ÂÜÖÈÉ®ÁªìÊûÑÔºåÊèêÈ´òËøêÁÆóÈÄüÂ∫¶ ÈÄÇÂêà‰∫éÈÄªËæëËøêÁÆó ‰∫åËøõÂà∂Êòì‰∫éÂíåÂà´ÁöÑËøõÂà∂ËøõË°åËΩ¨Êç¢ ÊäóÂπ≤Êâ∞ËÉΩÂäõÂº∫üëç„ÄÇÂõ†‰∏∫ÊØè‰ΩçÊï∞Á†ÅÂè™ÊúâÈ´ò‰Ωé‰∏§ÁßçÁä∂ÊÄÅÔºåÂΩìÂèóÂà∞‰∏ÄÂÆöÁ®ãÂ∫¶ÁöÑÂπ≤Êâ∞Êó∂Ôºå‰ªçËÉΩÂèØÈù†ÁöÑÂàÜËæ®Âá∫ÊòØ È´òÁîµÂπ≥ËøòÊòØ ‰ΩéÁîµÂπ≥ 2.3: ‰∫åËøõÂà∂ÁöÑËøêÁÆó Âä†Ê≥ï 12340 + 0 = 00 + 1 = 11 + 0 = 11 + 1 = 10(ÈÄ¢2Ëøõ1) ÂáèÊ≥ï 12340 - 0 = 00 - 1 = 1ÔºàÂÄü1ÂΩì2Ôºâ1 - 0 = 11 - 1 = 0 ‰πòÊ≥ï 12340 * 0 = 00 * 1 = 01 * 0 = 01 * 1 = 1 Èô§Ê≥ï 12340 / 0 (Êó†ÊÑè‰πâ)0 / 1 = 01 / 0 (Êó†ÊÑè‰πâ)1 / 1 = 1]]></content>
      <categories>
        <category>Êï∞Â≠¶</category>
      </categories>
      <tags>
        <tag>Êï∞Â≠¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL Á¥¢ÂºïÈÇ£‰∫õ‰∫ãÂÑø‰∏Ä]]></title>
    <url>%2F2019%2F08%2F17%2FMySQL-%E7%B4%A2%E5%BC%95%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF%2F</url>
    <content type="text"><![CDATA[Á¥¢ÂºïÂÆö‰πâ: Á¥¢ÂºïÊòØÂ∏ÆÂä© MySQL È´òÊïàËé∑ÂèñÊï∞ÊçÆÁöÑ Êï∞ÊçÆÁªìÊûÑÔºàÂÆòÊñπÔºâ„ÄÇÁÆÄÂçïÁêÜËß£Â∞±ÊòØ ÊéíÂ•ΩÂ∫èÁöÑÂø´ÈÄüÊü•ÊâæÊï∞ÊçÆÁªìÊûÑ„ÄÇ Âú®Êï∞ÊçÆÂ∫ìÁ≥ªÁªü‰∏≠ÔºåÈô§‰∫Ü‰øùÂ≠òÊï∞ÊçÆ‰πãÂ§ñÔºåÊï∞ÊçÆÂ∫ìÁ≥ªÁªüËøòÁª¥Êä§ÁùÄ Êª°Ë∂≥ÁâπÂÆöÊü•ÊâæÁÆóÊ≥ï ÁöÑ Êï∞ÊçÆÁªìÊûÑÔºåËøô‰∫õÊï∞ÊçÆÁªìÊûÑ‰ª•ÊüêÁßçÊñπÂºèÂºïÁî®ÔºàÊåáÂêëÔºâÊï∞ÊçÆÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âú®Ëøô‰∫õÊï∞ÊçÆÁªìÊûÑ‰∏äÂÆûÁé∞È´òÁ∫ßÊü•ÊâæÁÆóÊ≥ïÔºåËøôÁßçÊï∞ÊçÆÁªìÊûÑÂ∞±Êàê‰∏∫Á¥¢Âºï„ÄÇ ÈÄöÂ∏∏Êù•ËØ¥Á¥¢ÂºïÊú¨Ë∫´‰πüÊòØ‰ºöÂç†Áî®ÂæàÂ§ßÁöÑÂ≠òÂÇ®Á©∫Èó¥Ôºå‰∏çÂèØËÉΩÂÖ®ÈÉ®Â≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠„ÄÇÂõ†Ê≠§Á¥¢ÂºïÂæÄÂæÄ‰ª•Á¥¢ÂºïÊñá‰ª∂ÂΩ¢ÂºèÂ≠òÂÇ®Âú®Á£ÅÁõò‰∏ä„ÄÇ ‰∏Ä: Á¥¢Âºï‰ºòÁº∫ÁÇπ ‰ºòÁÇπ: Á±ª‰ºº‰∫é‰π¶Á±çÁöÑÁõÆÂΩïÁ¥¢ÂºïÔºåÊèêÈ´ò‰∫ÜÊï∞ÊçÆÊ£ÄÁ¥¢ÁöÑÊïàÁéáÔºåÈôç‰ΩéÊï∞ÊçÆÂ∫ì IO ÊàêÊú¨ ÈÄöËøáÁ¥¢ÂºïÂàóÂØπÊï∞ÊçÆËøõË°åÊéíÂ∫èÔºåÈôç‰ΩéÊï∞ÊçÆÊéíÂ∫èÁöÑÊàêÊú¨Ôºå‰ªéËÄåÈôç‰Ωé CPU ËÆ°ÁÆóÁöÑÊ∂àËÄó Áº∫ÁÇπ: ÂÆûÈôÖ‰∏ä Á¥¢Âºï‰πüÊòØ‰∏ÄÂº†Ë°®ÔºåËØ•Ë°®‰øùÁïô‰∫Ü‰∏ªÈîÆÂíåÁ¥¢ÂºïÂ≠óÊÆµÔºåÂπ∂ÊåáÂêëÂÆû‰ΩìË°®ÁöÑËÆ∞ÂΩï„ÄÇ Á¥¢ÂºïËôΩÁÑ∂ÊèêÈ´ò‰∫ÜÊü•ËØ¢ÈÄüÂ∫¶Ôºå‰ΩÜÂêåÊó∂‰πüÈôç‰Ωé‰∫ÜÊõ¥Êñ∞Ë°®ÁöÑÈÄüÂ∫¶ÔºåÂ¶ÇÂΩìÂØπË°®ËøõË°å insert, update, delete Êìç‰ΩúÊó∂„ÄÇÂõ†‰∏∫Êõ¥Êñ∞Ë°®Êó∂ÔºåÈúÄË¶ÅÈáçÂª∫Á¥¢Âºï„ÄÇ ‰∫å: Á¥¢ÂºïÂàÜÁ±ª ÂçïÂÄºÁ¥¢Âºï: ‰∏Ä‰∏™Á¥¢ÂºïÂÄºÂåÖÂê´‰∏Ä‰∏™ÂàóÔºå‰∏Ä‰∏™Ë°®ÂèØ‰ª•ÊúâÂ§ö‰∏™ÂçïÂàóÁ¥¢Âºï ÂîØ‰∏ÄÁ¥¢Âºï: Á¥¢ÂºïÂàóÁöÑÂÄºÂøÖÈ°ªÂîØ‰∏ÄÔºåÂçïÂÖÅËÆ∏Á©∫ÂÄº Â§çÂêàÁ¥¢Âºï: ‰∏Ä‰∏™Á¥¢ÂºïÂåÖÂê´Â§ö‰∏™Âàó ‰∏â: Á¥¢ÂºïÂàõÂª∫„ÄÅÂà†Èô§ÂèäÊü•Áúã ÂàõÂª∫ create [unique] index indexName on tableName(colName(length)) alter table tableName add [unique] index indexName(colName1, ... , colNameN) Âà†Èô§ Drop index indexName on tableName Êü•Áúã show index from taleName Âõõ: Á¥¢ÂºïÁöÑ‰ΩøÁî®Âú∫ÊôØ ‰ΩøÁî®Á¥¢Âºï 1: ‰∏ªÈîÆËá™Âä®Âª∫Á´ãÂîØ‰∏ÄÁ¥¢Âºï 2: È¢ëÁπÅ‰Ωú‰∏∫Êü•ËØ¢Êù°‰ª∂ÁöÑÂ≠óÊÆµÂ∫îËØ•Âª∫Á´ãÁ¥¢Âºï 3: Êü•ËØ¢‰∏≠Â∑≤ÂÖ∂‰ªñË°®ÂÖ≥ËÅîÁöÑÂ≠óÊÆµÔºåÂ§ñÈîÆÂÖ≥Á≥ªÂª∫Á´ãÁ¥¢Âºï 4: È¢ëÁπÅÊõ¥Êñ∞ÁöÑ‰∏çÈÄÇÂêàÂª∫Á´ãÁ¥¢Âºï 5: Êü•ËØ¢‰∏≠ÊéíÂ∫èÁöÑÂ≠óÊÆµÂª∫Á´ãÁ¥¢ÂºïÂèØÊèêÈ´òÊéíÂ∫èÈÄüÂ∫¶ 6: Êü•ËØ¢‰∏≠ÁªüËÆ°ÊàñËÄÖÂàÜÁªÑÂ≠óÊÆµ ‰∏ç‰ΩøÁî®Á¥¢Âºï 1: Ë°®ËÆ∞ÂΩïÂ§™Â∞ë 2: ÁªèÂ∏∏Â¢ûÂà†ÊîπÁöÑÂ≠óÊÆµ 3: Êï∞ÊçÆÈáçÂ§ç‰∏îÂàÜÂ∏ÉÂπ≥ÂùáÁöÑË°®Â≠óÊÆµÔºàÂ¶ÇÊÄßÂà´ÔºâÔºåËøôÁßçÂú∫ÊôØ‰∏ãÂª∫Á´ãÁ¥¢ÂºïÊ≤°Êúâ‰ªª‰ΩïÊïàÊûú„ÄÇ Á¥¢ÂºïÁöÑÈÄâÊã©ÊÄß ÊòØÊåáÁ¥¢ÂºïÂàó‰∏≠ÁöÑ‰∏çÂêåÂÄºÁöÑÊï∞ÁõÆ‰∏éË°®‰∏≠ËÆ∞ÂΩïÊï∞ÁöÑÊØî„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Ë°®Êúâ 2000 Êù°ËÆ∞ÂΩïÔºåË°®Á¥¢ÂºïÂàóÊúâ 1980 ‰∏™‰∏çÂêåÁöÑÂÄº„ÄÇÁ¥¢ÂºïÁöÑÈÄâÊã©ÊÄß‰∏∫ 1980 / 2000 = 0.99ÔºõÁ¥¢ÂºïÁöÑÈÄâÊã©ÊÄßË∂äÊé•Ëøë1ÔºåËøô‰∏™Á¥¢ÂºïÁöÑÊïàÁéáË∂äÈ´ò„ÄÇ ‰∫î: B Tree Ê£ÄÁ¥¢ÂéüÁêÜ „ÄêÂàùÂßãÂåñ‰ªãÁªç„Äë ËøôÊòØ‰∏Ä‰∏™ B+Ê†ëüå≤ , ÁªøËâ≤ÁöÑËâ≤ÂùóÊòØ‰∏Ä‰∏™‰∏™ÁöÑÁ£ÅÁõòÂùóÔºåÊØè‰∏™Á£ÅÁõòÂùóÂåÖÊã¨Âá†‰∏™Êï∞ÊçÆÈ°πÔºàËìùËâ≤Ëâ≤ÂùóÔºâÂíåÊåáÈíàÔºàÊ©ôËâ≤Ëâ≤ÂùóÔºâ„ÄÇÂ¶ÇÁ£ÅÁõòÂùó1ÂåÖÂê´Êï∞ÊçÆÈ°π 17 Âíå 35ÔºåÂåÖÂê´ÊåáÈíà P1,P2,P3„ÄÇP1ÊåáÂêëÂ∞è‰∫é17ÁöÑÁ£ÅÁõòÂùóÔºåP2ÊåáÂêë17Âíå35‰πãÈó¥ÁöÑÁ£ÅÁõòÂùóÔºåP3Ë°®Á§∫Â§ß‰∫é35ÁöÑÁ£ÅÁõòÂùó„ÄÇ ÁúüÂÆûÁöÑÊï∞ÊçÆÂ≠òÂú®‰∫éÂè∂Â≠êüçÉËäÇÁÇπÔºåÂç≥ÊòØ 3, 5, 9, 10, 13, 15, 28, 29, 36, 60, 75, 79, 90, 99 ÈùûÂè∂Â≠êËäÇÁÇπ‰∏çÂ≠òÂÇ®ÁúüÂÆûÁöÑÊï∞ÊçÆÔºåÂè™Â≠òÂÇ®ÊåáÂêëÊêúÁ¥¢ÊñπÂêëÁöÑÊï∞ÊçÆÈ°π „ÄêÊü•ÊâæËøáÁ®ãÔºå‰ª•Êï∞Â≠ó29‰∏æ‰æã„Äë 1: È¶ñÂÖàÊääÁ£ÅÁõòÂùó1Áî±Á£ÅÁõòÂä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠ÔºåÊ≠§Êó∂ÂèëÁîü Á¨¨‰∏ÄÊ¨°IOÔºåÂú®ÂÜÖÂ≠ò‰∏≠‰ΩøÁî®‰∫åÂàÜÊü•ÊâæÁ°ÆÂÆö29Âú®17Âíå35‰πãÈó¥Ôºå‰ªéËÄåÁ°ÆÂÆö‰ΩøÁî®Á£ÅÁõòÂùó1ÁöÑP2ÊåáÈíà„ÄÇ 2: Áî±‰∫éP2ÊåáÂêëÁ£ÅÁõòÂùó3ÔºåÊ≠§Êó∂Â∞ÜÁ£ÅÁõòÂùó3Áî±Á£ÅÁõòÂä†ËΩΩËá≥ÂÜÖÂ≠ò‰∏≠ÔºåÂèëÁîü Á¨¨‰∫åÊ¨°IO„ÄÇ 3: 29Âú®26Âíå30‰πãÈó¥Ôºå‰ªéËÄåÁ°ÆÂÆö‰ΩøÁî®Á£ÅÁõòÂùó3ÁöÑP2ÊåáÈíàÔºåÈÄöËøáÊåáÈíàÂä†ËΩΩÁ£ÅÁõòÂùó8Âà∞ÂÜÖÂ≠ò‰∏≠ÔºåÂèëÁîü Á¨¨‰∏âÊ¨°IOÔºåÂêåÊó∂ÂÜÖÂ≠ò‰∏≠‰ΩøÁî®‰∫åÂàÜÊü•ÊâæÊâæÂà∞29„ÄÇ Q1: ‰∏∫‰ªÄ‰πàÊï∞ÊçÆË°®ËÆ∞ÂΩïÁöÑÂà†Èô§Â§ö‰ΩøÁî®ËΩØÂà†Èô§Ôºü ‰øùÁïôÊï∞ÊçÆËÆ∞ÂΩïÔºå‰∏∫‰∫ÜÊï∞ÊçÆÂàÜÊûê ‰∏∫‰∫Ü‰øùÁïôÂéüÊù•ÂéüÊù•Á¥¢ÂºïÔºåÂéüÂõ†Âà†Èô§ÂÖÉÁ¥†ÈúÄË¶ÅÈáçÂª∫Á¥¢Âºï]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQLÊû∂ÊûÑ‰ΩìÁ≥ªÂèäSQLÊü•ËØ¢ÊâßË°åÊµÅÁ®ãÂàùÊé¢]]></title>
    <url>%2F2019%2F08%2F17%2FMySQL%E6%9E%B6%E6%9E%84%E4%BD%93%E7%B3%BB%E5%8F%8ASQL%E6%9F%A5%E8%AF%A2%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%88%9D%E6%8E%A2%2F</url>
    <content type="text"><![CDATA[ÁÆÄËø∞: Ëá™Â∑•‰Ωú‰ª•Êù•ÔºåÂ§ßÈÉ®ÂàÜÁöÑÊó∂Èó¥Êé•Ëß¶ÁöÑÂÖ≥Á≥ªÂûãÈÉΩÊòØ MySQL Êï∞ÊçÆÂ∫ìÁ≥ªÁªüÔºå‰ΩÜ‰ΩøÁî®ÈÉΩÊØîËæÉÊµÖÊòæÂü∫Á°Ä(CRUD)„ÄÇÊúÄËøëÊâìÁÆóÈáçÊñ∞Ê∑±ÂÖ•Â≠¶‰π†‰∏ã MySQLÔºåÂÆâË£ÖÁöÑÁâàÊú¨ÊòØ 5.7.21ÔºåÂ≠¶‰π†ËÆ∞ÂΩï‰∫éÊ≠§Ôºå‰æøÊó•ÂêéÊ∏©‰π†Êü•Áúã„ÄÇ È¶ñÂÖàÊù•ÁúãÁúã MySQL ÁöÑÊû∂ÊûÑÂõæÔºåÁÑ∂Âêé‰æùÊ¨°Êù•ÁúãÁúãÊØè‰∏ÄÈÉ®ÂàÜÊòØÂÅö‰ªÄ‰πàÁöÑ„ÄÇ 1ÔºöClientËøûÊé•Âô®ÔºàConnectorsÔºâÔºå‰πüÂ∞±ÊòØÈÄöÂ∏∏ÊâÄËØ¥ÁöÑ MySQL ÂÆ¢Êà∑Á´Ø„ÄÇ‰∏çÂêåÁöÑÁºñÁ®ãËØ≠Ë®ÄÊèê‰æõ‰∫ÜÂØπÂ∫îÁöÑ API ‰∏é MySQL ÊúçÂä°Á≥ªÁªüËøõË°å‰∫§‰∫íÈÄöËÆØ„ÄÇ ÈÄöËøá show variables like &#39;%connection%; Êù•Êü•Áúã MySQl ÊúçÂä°Âô®ÁöÑËøûÊé•‰ø°ÊÅØ„ÄÇÈªòËÆ§ÊúÄÂ§ßËøûÊé•Êï∞ÊòØ151„ÄÇ 123456789mysql&gt; show variables like &apos;%connection%&apos;;+--------------------------+-----------------+| Variable_name | Value |+--------------------------+-----------------+| character_set_connection | utf8 || collation_connection | utf8_general_ci || max_connections | 151 || max_user_connections | 0 |+--------------------------+-----------------+ 2ÔºöMySQL ServerServer Â±ÇÊòØ MySQL Êèê‰æõÊúçÂä°ÁöÑÊ†∏ÂøÉ„ÄÇ‰∏ªË¶ÅÂàÜ‰∏∫‰ª•‰∏ãÂá†‰∏™Ê®°ÂùóÔºàÊü•ËØ¢ÁºìÂ≠ò MySQL8.0 ÁâàÊú¨Ë¢´Âà†Èô§ÔºåÊïÖÊ≠§‰∏çÂÅöËÆ∞ÂΩïüìùÔºâ 2.1ÔºöConnection PoolÔºàËøûÊé•Ê±†ÔºâËøûÊé•Ê±†‰∏ªË¶ÅÂÆûÁé∞‰ª•‰∏ãÂäüËÉΩ 2.1.1ÔºöAuthenticationÔºàËøõË°åË∫´‰ªΩÈ™åËØÅÔºâ**terminal ‰∏ãËøûÊé•ÂëΩ‰ª§Â¶Ç‰∏ã mysql -u root -h localhost - p„ÄÇÂ¶ÇÊûúÁî®Êà∑ÂêçÂØÜÁ†ÅËÆ§ËØÅÈÄöËøáÔºåËøûÊé•Âô®‰ºöÂà∞ ÊùÉÈôêË°® ÈáåÈù¢Êü•Âá∫Áî®Êà∑Êã•ÊúâÁöÑÊùÉÈôê„ÄÇ‰πãÂêéÔºåËøô‰∏™ËøûÊé•ÈáåÈù¢ÁöÑÊùÉÈôêÂà§Êñ≠ÈÄªËæëÔºåÈÉΩÂ∞Ü‰æùËµñ‰∫éÊ≠§Êó∂ËØªÂà∞ÁöÑÊùÉÈôê„ÄÇ ‰∏ÄÊó¶‰∏Ä‰∏™Áî®Êà∑ÊàêÂäüÂª∫Á´ãËøûÊé•ÂêéÔºåÂç≥‰Ωø‰Ω†Áî®ÁÆ°ÁêÜÂëòË¥¶Âè∑ÂØπËøô‰∏™Áî®Êà∑ÁöÑÊùÉÈôêÂÅö‰∫Ü‰øÆÊîπÔºå‰πü‰∏ç‰ºöÂΩ±ÂìçÂ∑≤ÁªèÂ≠òÂú®ËøûÊé•ÁöÑÊùÉÈôê„ÄÇ‰øÆÊîπÂÆåÊàêÂêéÔºåÂè™ÊúâÂÜçÊñ∞Âª∫ÁöÑËøûÊé•Êâç‰ºö‰ΩøÁî®Êñ∞ÁöÑÊùÉÈôêËÆæÁΩÆ„ÄÇ ËøûÊé•ÂÆåÊàêÂêéÂ¶ÇÊûúÊ≤°Êúâ‰ΩøÁî®ÔºåËØ•ËøûÊé•Â∞±Â§Ñ‰∫é Sleep Áä∂ÊÄÅ„ÄÇÂ¶ÇÊûúË∂ÖËøá MySQL ÊúçÂä°Âô®ÈÖçÁΩÆÁöÑ wait_time ÂÄºÔºåÂèØÈÄöËøá show variables like &#39;%wait%&#39;; Êü•ÁúãËØ•ÂÄºÔºåÈªòËÆ§ÊòØ 28800 ÁßíÔºåËØ•ËøûÊé•Â∞±‰ºöË¢´ÂõûÊî∂Ôºå‰ΩøÁî®Êó∂Â∞±ÈúÄË¶ÅÈáçÊñ∞Âª∫Á´ãËøûÊé•‰∫Ü„ÄÇ Â¶ÇÊûúÂÆ¢Êà∑Á´ØÊåÅÁª≠ÊúâËØ∑Ê±ÇÔºåÂàô‰∏ÄÁõ¥‰ΩøÁî®Âêå‰∏Ä‰∏™ËøûÊé•ÔºåÂàôÁß∞ËØ•ËøûÊé•‰∏∫ÈïøËøûÊé•„ÄÇÁü≠ËøûÊé•ÂàôÊòØÊåáÊØèÊ¨°ÊâßË°åÂÆåÂæàÂ∞ëÁöÑÂá†Ê¨°Êü•ËØ¢Â∞±Êñ≠ÂºÄËøûÊé•Ôºå‰∏ãÊ¨°Êü•ËØ¢ÂÜçÈáçÊñ∞Âª∫Á´ã‰∏Ä‰∏™„ÄÇÁî±‰∫éÂª∫Á´ãËøûÊé•ÊØîËæÉÂ§çÊùÇÔºåÂ∫îÂΩìÂáèÂ∞ëËøûÊé•ÁöÑÊìç‰ΩúËÄå‰ΩøÁî®ÈïøËøûÊé•„ÄÇ‰ΩÜÊòØËøáÂ§ö‰ΩøÁî®ÈïøËøûÊé•‰ºö‰ΩøÂæóÂÜÖÂ≠òÈ£ôÂçáÔºàÂõ†‰∏∫ MySQL Âú®ÊâßË°åËøáÁ®ã‰∏≠‰∏¥Êó∂‰ΩøÁî®ÁöÑÂÜÖÂ≠òÊòØÁÆ°ÁêÜÂú®ËøûÊé•ÂØπË±°ÈáåÈù¢ÁöÑ„ÄÇËøô‰∫õËµÑÊ∫ê‰ºöÂú®ËøûÊé•Êñ≠ÂºÄÁöÑÊó∂ÂÄôÊâçÈáäÊîæÔºâÂØºËá¥ MySQL ÂºÇÂ∏∏ÈáçÂêØ„ÄÇ Ëß£ÂÜ≥ÊñπÊ°à1 ÔºöÂÆöÊúüÊñ≠ÂºÄÈïøËøûÊé•„ÄÇ‰ΩøÁî®‰∏ÄÊÆµÊó∂Èó¥ÂêéÊàñËÄÖÁ®ãÂ∫èÈáåÈù¢Âà§Êñ≠ÊâßË°åËøá‰∏Ä‰∏™Âç†Áî®ÂÜÖÂ≠òÁöÑÂ§ßÊü•ËØ¢ÂêéÔºåÂÆöÊúüÊñ≠ÂºÄËøûÊé•Ôºå‰πãÂêéË¶ÅÊü•ËØ¢Êó∂ÂÜçÈáçÊñ∞Âª∫Á´ãËøûÊé•Ôºõ Ëß£ÂÜ≥ÊñπÊ°à2 ÔºöÂØπ‰∫é MySQL 5.7 ÂèäÂêéÁª≠ÁâàÊú¨ÔºåÂèØ‰ª•Âú®ÊØèÊ¨°ÊâßË°å‰∏Ä‰∏™ÊØîËæÉÂ§ßÁöÑÊìç‰ΩúÂêéÔºåÈÄöËøáÊâßË°å mysql_reset_connection Êù•ÈáçÊñ∞ÂàùÂßãÂåñËøûÊé•ËµÑÊ∫ê„ÄÇËøô‰∏™ËøáÁ®ã‰∏çÈúÄË¶ÅÈáçËøûÂíåÈáçÊñ∞ÂÅöÊùÉÈôêÈ™åËØÅÔºå‰ΩÜÊòØ‰ºöÂ∞ÜËøûÊé•ÊÅ¢Â§çÂà∞ÂàöÂàöÂàõÂª∫ÂÆåÊó∂ÁöÑÁä∂ÊÄÅ„ÄÇ 2.1.2ÔºöThread ReuseÔºàÁ∫øÁ®ãÈáçÁî®Ôºâ2.1.3ÔºöConnection LimitsÔºàËøûÊé•ÈôêÂà∂)2.1.4ÔºöCheck Memory (ÂÜÖÂ≠òÊ£ÄÊµã)2.1.5ÔºöÁºìÂ≠òÊØè‰∏™ÂÆ¢Êà∑Á´ØËøûÊé•ÈÉΩ‰ºöÂú®ÊúçÂä°Âô®ËøõÁ®ã‰∏≠Êã•Êúâ‰∏Ä‰∏™Á∫øÁ®ãÔºåËøô‰∏™ËøûÊé•ÁöÑÊü•ËØ¢Âè™‰ºöÂú®Ëøô‰∏™ÂçïÁã¨ÁöÑÁ∫øÁ®ã‰∏≠ÊâßË°åÔºåËØ•Á∫øÁ®ãÂè™ËÉΩËΩÆÊµÅÂú®Êüê‰∏™ cpu ‰∏äËøêË°åÔºåÊúçÂä°Âô®‰ºöË¥üË¥£ÁºìÂ≠òÁ∫øÁ®ã„ÄÇÂõ†Ê≠§Ôºå‰∏çÈúÄË¶Å‰∏∫ÊØè‰∏Ä‰∏™Êñ∞Âª∫ÁöÑËøûÊé•ÂàõÂª∫ÊàñÈîÄÊØÅÁ∫øÁ®ãÔºåÊàñËÄÖÁõ¥Êé•‰ΩøÁî®Á∫øÁ®ãÊ±†ÂäüËÉΩÔºåÊù•Áª¥Êä§Â§ßÈáèÁöÑÂèØÁî®ËøûÊé•„ÄÇ 2.2ÔºöSQL InterfaceÔºàSQL Êé•Âè£ÔºâÁî®‰∫éÊâßË°å DML, DDL, Â≠òÂÇ®ËøáÁ®ã, ËßÜÂõæ, Ëß¶ÂèëÂô®Á≠â„ÄÇÊé•Êî∂ÂÆ¢Êà∑Á´ØÂèëÊù•ÁöÑsqlËØ∑Ê±ÇÊü•ËØ¢ÔºåÂπ∂ËøîÂõûÈúÄË¶ÅÊü•ËØ¢ÁöÑÁªìÊûÑ„ÄÇ 2.3ÔºöParserÔºàËß£ÊûêÂô®ÔºâËß£ÊûêÂô®ÈÄöËøáÂÖ≥ÈîÆÂ≠óÂ∞ÜSQLËØ≠Âè•ËøõË°åËß£ÊûêÔºàËØçÊ≥ïÂàÜÊûê + È¢ÑÂèëÂàÜÊûêÔºâÔºåÂπ∂ÁîüÊàêÂØπÂ∫îÁöÑÊï∞ÊçÆÁªìÊûÑÔºàËß£ÊûêÊ†ëÔºâ„ÄÇÁÑ∂ÂêéÂØπÂÖ∂ËøõË°åÂêÑÁßç‰ºòÂåñÔºåÂåÖÊã¨ÈáçÂÜôÊü•ËØ¢ÔºåÂÜ≥ÂÆöÊü•ËØ¢ÁöÑËØªÂÜôÈ°∫Â∫èÔºå‰ª•ÂèäÈÄâÊã©È°ª‰ΩøÁî®ÁöÑÁ¥¢ÂºïÁ≠â„ÄÇMySQLËß£ÊûêÂô®Â∞Ü‰ΩøÁî®MySQLËØ≠Ê≥ïËßÑÂàôÈ™åËØÅÂíåËß£ÊûêÊü•ËØ¢„ÄÇ È¢ÑÂ§ÑÁêÜÂô®ÂàôÊ†πÊçÆ‰∏Ä‰∫õMySQLËßÑÂàôËøõË°åËøõ‰∏ÄÊ≠•Ê£ÄÊü•Ëß£Êûê‰π¶ÊòØÂê¶ÂêàÊ≥ïÔºå‰æãÂ¶ÇÊ£ÄÊü•Êï∞ÊçÆË°®ÂíåÊï∞ÊçÆÂàóÊòØÂê¶Â≠òÂú®ÔºåËøò‰ºöËß£ÊûêÂêçÂ≠óÂíåÂà´ÂêçÔºåÁúãÁúãÂÆÉ‰ª¨ÊòØÂê¶ÊúâÊ≠ß‰πâ„ÄÇ 2.4ÔºöOptimizerÔºà‰ºòÂåñÂô®Ôºâ‰ºòÂåñÂô®‰ºöÂ∞Ü Ëß£ÊûêÊ†ë ËΩ¨ÂåñÊàê ÊâßË°åËÆ°Âàí„ÄÇ‰∏ÄÊù°Êü•ËØ¢ÂèØ‰ª•ÊúâÂ§öÁßçÊâßË°åÊñπÊ≥ïÔºåÊúÄÂêéÈÉΩÊòØËøîÂõûÁõ∏ÂêåÁªìÊûú„ÄÇ‰ºòÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØ ÊâæÂà∞ËøôÂÖ∂‰∏≠ÊúÄÂ•ΩÁöÑÊâßË°åËÆ°Âàí„ÄÇÁîüÊàêÊâßË°åËÆ°ÂàíÁöÑËøáÁ®ã‰ºöÊ∂àËÄóËæÉÂ§öÁöÑÊó∂Èó¥ÔºåÁâπÂà´ÊòØÂ≠òÂú®ËÆ∏Â§öÂèØÈÄâÁöÑÊâßË°åËÆ°ÂàíÊó∂„ÄÇ Â¶ÇÊûúÂú®‰∏ÄÊù°SQLËØ≠Âè•ÊâßË°åÁöÑËøáÁ®ã‰∏≠Â∞ÜËØ•ËØ≠Âè•ÂØπÂ∫îÁöÑÊúÄÁªàÊâßË°åËÆ°ÂàíËøõË°åÁºìÂ≠òÔºåÂΩìÁõ∏‰ººÁöÑËØ≠Âè•ÂÜçÊ¨°Ë¢´ËæìÂÖ•ÊúçÂä°Âô®Êó∂ÔºåÂ∞±ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®Â∑≤ÁºìÂ≠òÁöÑÊâßË°åËÆ°ÂàíÔºå‰ªéËÄåË∑≥ËøáSQLËØ≠Âè•ÁîüÊàêÊâßË°åËÆ°ÂàíÁöÑÊï¥‰∏™ËøáÁ®ãÔºåËøõËÄåÂèØ‰ª•ÊèêÈ´òËØ≠Âè•ÁöÑÊâßË°åÈÄüÂ∫¶„ÄÇ egÔºöÊÄé‰πà‰ΩøÁî®Á¥¢ÂºïÔºåÊÄé‰πàÂ§ÑÁêÜË°®ÁöÑ Join ‰ºòÂåñÂô®Â§ÑÁêÜ ‰æãÂ¶Ç‰∏Ä‰∏™Êï∞ÊçÆË°®Âª∫Á´ãÁöÑÁªÑÂêàÁ¥¢Âºï idx_table_c1c2c3c4, ÂΩìÊü•ËØ¢Êù°‰ª∂‰∏∫ where c3=&#39;c3&#39; and c2=&#39;c2&#39; and c4=&#39;c4&#39; and c1=&#39;c1&#39;; Êó∂Êü•ËØ¢‰ºòÂåñÂô®‰ºöËá™Âä®Ë∞ÉÊï¥Âíå‰ºòÂåñÔºåÊ≠§Êó∂Á≠â‰ª∑‰∫é where c1=&#39;c1&#39; and c2=&#39;c2&#39; and c4=&#39;c4&#39; and c3=&#39;c3&#39;;„ÄÇ‰ΩÜÊòØÊúÄ‰Ω≥ÂÆûË∑µÊòØÊåâÁÖßÁ¥¢ÂºïÂª∫Á´ãÁöÑÈ°∫Â∫èÊù•‰ΩøÁî®Ôºå‰ª•Ê≠§Êù•ÂáèÂ∞ëÂ∫ïÂ±Ç‰ºòÂåñÂô®ÁöÑÂ∑•‰ΩúÈáè„ÄÇ Ëß£ÊûêÂô®ÔºåÈ¢ÑÂ§ÑÁêÜÂô®Ôºå‰ºòÂåñÂô®Â§ÑÁêÜÊµÅÁ®ã Â¶Ç‰∏ãÂõæ ÂõæÁâáÂºïÁî®Ëá™ Á®ãÂ∫èÂëòÂéÜÂ∞èÂÜ∞ 2.5ÔºöExecutorÔºàÊâßË°åÂô®ÔºâÊ†πÊçÆ ‰ºòÂåñÂô® ÁöÑÊâßË°åËÆ°ÂàíÂéªË∞ÉÁî®Â≠òÂÇ®ÂºïÊìé API Êé•Âè£Ëé∑ÂèñÊï∞ÊçÆ 3ÔºöManagement Serveices &amp; UtilitiesÔºàÁ≥ªÁªüÁÆ°ÁêÜÂíåÊéßÂà∂Â∑•ÂÖ∑ÔºâÂ§á‰ªΩÔºåÂÆâÂÖ®ÊÅ¢Â§çÔºåÂ§çÂà∂ÔºåÈõÜÁæ§ÔºåÁÆ°ÁêÜÔºåÈÖçÁΩÆÔºåËøÅÁßªÂíåÂÖÉÊï∞ÊçÆ„ÄÇ 4ÔºöPluggable Storage EnginesÔºàÂèØÊèíÊãîÁöÑÂ≠òÂÇ®ÂºïÊìéÔºâ Â≠òÂÇ®ÂºïÊìéÈíàÂØπÊï∞ÊçÆË°® 5ÔºöÊñá‰ª∂Á≥ªÁªüÔºåÊñá‰ª∂ÔºåÊó•ÂøóË°•ÂÖÖ: ‰∏ÄÊù° SQL Êü•ËØ¢ËØ≠Âè•ÂêÑ‰∏™ÂÖ≥ÈîÆÂ≠óËß£ÊûêÁöÑÈ°∫Â∫èËøáÁ®ã Ë°•ÂÖÖ: ‰ΩøÁî®show profile ÂàÜÊûê SQL ËØ≠Âè•ÊâßË°åÊµÅÁ®ãÂèäÂÖ∂ËÄóÊó∂ÊÉÖÂÜµ 12345678910111213141516171819202122232425262728293031mysql&gt; show profiles;+----------+------------+------------------------------------------------------------+| Query_ID | Duration | Query |+----------+------------+------------------------------------------------------------+| 36 | 6.57003650 | select * from employee || 37 | 0.02818325 | select * from employee limit 1 || 38 | 0.00047475 | select * from employee limit 1 |+----------+------------+------------------------------------------------------------+15 rows in set, 1 warning (0.00 sec)mysql&gt; show profile cpu,block io for query 37;+----------------------+----------+----------+------------+--------------+---------------+| Status | Duration | CPU_user | CPU_system | Block_ops_in | Block_ops_out |+----------------------+----------+----------+------------+--------------+---------------+| starting | 0.015488 | 0.000507 | 0.000047 | 512 | 0 || checking permissions | 0.000019 | 0.000015 | 0.000002 | 0 | 0 || Opening tables | 0.000606 | 0.000166 | 0.000015 | 112 | 0 || init | 0.006238 | 0.000140 | 0.000000 | 136 | 0 || System lock | 0.000083 | 0.000083 | 0.000000 | 0 | 0 || optimizing | 0.000007 | 0.000006 | 0.000000 | 0 | 0 || statistics | 0.000188 | 0.000189 | 0.000000 | 240 | 0 || preparing | 0.000018 | 0.000017 | 0.000000 | 0 | 0 || executing | 0.000003 | 0.000003 | 0.000000 | 0 | 0 || Sending data | 0.005445 | 0.000000 | 0.001869 | 1480 | 0 || end | 0.000012 | 0.000000 | 0.000010 | 0 | 0 || query end | 0.000009 | 0.000000 | 0.000009 | 0 | 0 || closing tables | 0.000007 | 0.000000 | 0.000007 | 0 | 0 || freeing items | 0.000046 | 0.000000 | 0.000047 | 0 | 0 || cleaning up | 0.000014 | 0.000000 | 0.000013 | 0 | 0 |+----------------------+----------+----------+------------+--------------+---------------+15 rows in set, 1 warning (0.00 sec) ÂÜôÁùÄÂÜôÁùÄÂèëÁé∞ÊèêÂèäÂæàÂ§öÁü•ËØÜÁÇπËøòÊòØÊú™Áü•ÔºåË∑ØÊº´Êº´ÂÖ∂‰øÆËøúÂÖÆÔºåÈúÄË¶ÅÂ≠¶ÁöÑ‰∏úË•øËøòÂ§öÔºåÊÑøÊØèÊó•ÈÉΩÊØîÊò®Êó•ËøõÊ≠•ÔºåÂç≥‰ΩøËøõÊ≠•ÂæàÂæÆÂ∞è„ÄÇÈÇ£ÂÖàÂêÉÈ•≠Âéª‰∫Üüçö todo Êï∞ÊçÆÂ∫ìÂÆû‰æã‰∫ÜËß£ ÂèÇËÄÉ MySQLÂÆûÊàò45ËÆ≤ ‰∏ÄÊù°SQLËØ≠Âè•Âú®MySQL‰∏≠ÊòØÂ¶Ç‰ΩïÊâßË°åÁöÑ Êú¨Êù•‰ª•‰∏∫mysqlÂç≥Â∞ÜÊ∂à‰∫°ÔºåÊ≤°ÊÉ≥Âà∞ÂÆÉÂç¥Ë∂äÊù•Ë∂äÂº∫Â§ß MySQL‰ΩìÁ≥ªÊû∂ÊûÑ mysql‰ΩìÁ≥ªÊû∂ÊûÑÂõæ‰ª•Âèä‰∫åËøõÂà∂ÂÆâË£Ömariadb MySQL‰∏≠ÁöÑÂÆû‰æã„ÄÅÊï∞ÊçÆÂ∫ìÂÖ≥Á≥ªÁÆÄ‰ªã]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MySQL 5.7.21-1ÈÖçÁΩÆÊñá‰ª∂my.cnf]]></title>
    <url>%2F2019%2F08%2F15%2FMySQL-5-7-21-1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6my-cnf%2F</url>
    <content type="text"><![CDATA[ÁÆÄËø∞ÔºöMySQL 5.7.21-1 ÂéüÂßãÈÖçÁΩÆÊñá‰ª∂ my.cnfÔºå‰∏∫‰ª•ÂêéÊü•ËØ¢Êñπ‰æøÁâπÊ≠§ËÆ∞ÂΩï MySQL ÂÆâË£ÖÂêéÁöÑ‰∏Ä‰∫õÊ≥®ÊÑèÁÇπ 1ÔºöÂÆâË£ÖÂêéÂÖàËÆæÁΩÆÂ≠óÁ¨¶ÁºñÁ†Å„ÄÇÂ¶ÇÊûú‰∏Ä‰∏™Â∫ìÔºàeg:DB1ÔºâÂú®‰ΩøÁî®ÊúüÈó¥ÊîπÂèò‰∫Ü my.cnf ÁöÑÂ≠óÁ¨¶ÁºñÁ†ÅÈÖçÁΩÆÔºåÊ≠§Êó∂ DB1 ÁöÑÂéüÊúâÁöÑÂ≠óÁ¨¶‰∏≤ÁºñÁ†Å‰∏çÂèóÂΩ±ÂìçÔºåÂ¶ÇÊûúÂÜçÊñ∞Âª∫‰∏Ä‰∏™ DB2 Â∫ìÔºåÂàô DB2 ‰ΩøÁî®ÂøÉÂæóÂ≠óÁ¨¶ÁºñÁ†Å„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112## The MySQL database server configuration file.## You can copy this to one of:# - "/etc/mysql/my.cnf" to set global options,# - "~/.my.cnf" to set user-specific options.## One can use all long options that the program supports.# Run program with --help to get a list of available options and with# --print-defaults to see which it would actually understand and use.## For explanations see# http://dev.mysql.com/doc/mysql/en/server-system-variables.html# This will be passed to all mysql clients# It has been reported that passwords should be enclosed with ticks/quotes# escpecially if they contain "#" chars...# Remember to edit /etc/mysql/debian.cnf when changing the socket location.# Here is entries for some specific programs# The following values assume you have at least 32M ram[mysqld_safe]socket = /var/run/mysqld/mysqld.socknice = 0[mysqld]## * Basic Settings#user = mysqlpid-file = /var/run/mysqld/mysqld.pidsocket = /var/run/mysqld/mysqld.sockport = 3306basedir = /usrdatadir = /var/lib/mysqltmpdir = /tmplc-messages-dir = /usr/share/mysql# set server charactercharacter-set-server = utf8collation-server = utf8_general_ciinit_connect = 'SET NAMES utf8'skip-external-locking## Instead of skip-networking the default is now to listen only on# localhost which is more compatible and is not less secure.bind-address = 127.0.0.1## * Fine Tuning#key_buffer_size = 16Mmax_allowed_packet = 16Mthread_stack = 192Kthread_cache_size = 8# This replaces the startup script and checks MyISAM tables if needed# the first time they are touchedmyisam-recover-options = BACKUP#max_connections = 100#table_open_cache = 64#thread_concurrency = 10## * Query Cache Configuration#query_cache_limit = 1Mquery_cache_size = 16M## * Logging and Replication## Both location gets rotated by the cronjob.# Be aware that this log type is a performance killer.# As of 5.1 you can enable the log at runtime!#general_log_file = /var/log/mysql/mysql.log#general_log = 1## Error log - should be very few entries.#log_error = /var/log/mysql/error.log## Here you can see queries with especially long duration#slow_query_log = 1#slow_query_log_file = /var/log/mysql/mysql-slow.log#long_query_time = 2#log-queries-not-using-indexes## The following can be used as easy to replay backup logs or for replication.# note: if you are setting up a replication slave, see README.Debian about# other settings you may need to change.#server-id = 1#log_bin = /var/log/mysql/mysql-bin.logexpire_logs_days = 10max_binlog_size = 100M#binlog_do_db = include_database_name#binlog_ignore_db = include_database_name## * InnoDB## InnoDB is enabled by default with a 10MB datafile in /var/lib/mysql/.# Read the manual for more InnoDB related options. There are many!## * Security Features## Read the manual, too, if you want chroot!# Êï∞ÊçÆÊñá‰ª∂ÁöÑÂ≠òÊîæË∑ØÂæÑ„ÄêÊØè‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊòØÁõÆÂΩï„Äë# chroot = /var/lib/mysql/## For generating SSL certificates I recommend the OpenSSL GUI "tinyca".## ssl-ca=/etc/mysql/cacert.pem# ssl-cert=/etc/mysql/server-cert.pem# ssl-key=/etc/mysql/server-key.pem]]></content>
      <categories>
        <category>Êï∞ÊçÆÂ∫ì</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GolangÁà¨Ëô´Á≥ªÂàó‰∏âÔºö‰∏ãËΩΩÂéªÂì™ÂÑøÊ∏∏ËÆ∞ÂõæÁâáÂà∞Êú¨Âú∞]]></title>
    <url>%2F2019%2F08%2F14%2FGolang%E4%B8%8B%E8%BD%BD%E5%8E%BB%E5%93%AA%E5%84%BF%E6%B8%B8%E8%AE%B0%E5%9B%BE%E7%89%87%E5%88%B0%E6%9C%AC%E5%9C%B0%2F</url>
    <content type="text"><![CDATA[Â£∞ÊòéÔºö‰ª•‰∏ãÂÜÖÂÆπ‰ªÖ‰æõÊäÄÊúØÂ≠¶‰π†ÁÆÄËø∞Ôºö Ëé∑ÂèñÂéªÂì™ÂÑøÁΩë ‰∏≠ÁöÑÁöÑÊ∏∏ËÆ∞Ôºàeg: ÁæéÂú®‚ÄúÂçÅ‰∫åËÉåÂêé‚Äù ÔºâÈ°µÈù¢‰∏≠ÁöÑÂõæÁâáÂú∞ÂùÄÂπ∂Â∞ÜÂõæÁâá‰øùÂ≠òÂà∞Êú¨Âú∞ Ê≠•È™§Â¶Ç‰∏ã1: ‰ΩøÁî®Ê≠£ÂàôËé∑ÂèñÂõæÁâáÁöÑÈìæÊé•Âπ∂Â≠òÂÇ®Âà∞‰∏Ä‰∏™ slice ‰∏≠ 2: ÈÅçÂéÜ slice ‰∏≠ÁöÑ ÂõæÁâáÂú∞ÂùÄÔºåËØªÂèñÊï∞ÊçÆ‰øùÂ≠òÂà∞Êú¨Âú∞ ‰ª£Á†ÅÂ¶Ç‰∏ã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116package mainimport ( "fmt" "strconv" "net/http" "io" "regexp" "os")func main() &#123; var articleId int fmt.Print("ËØ∑ËæìÂÖ•Ê∏∏ËÆ∞id: ") fmt.Scan(&amp;articleId) spiderArticleImageUrls(articleId)&#125;func spiderArticleImageUrls(articleId int) &#123; //https://travel.qunar.com/youji/5908435 articleUrl := "https://travel.qunar.com/youji/" + strconv.Itoa(articleId) resp, err1 := http.Get(articleUrl) //fmt.Println(resp.StatusCode) //os.Exit(1) if err1 != nil &#123; fmt.Println("http get err:", nil) return &#125; if resp.StatusCode != 200 &#123; fmt.Println("404 not found") return &#125; defer resp.Body.Close() var pageContent string buffer := make([]byte, 8192) for &#123; n, err2 := resp.Body.Read(buffer) if n == 0 &#123; fmt.Println("ËØªÂèñÁΩëÈ°µÂÆåÊàê") break &#125; if err2 != nil &amp;&amp; err2 != io.EOF &#123; fmt.Println("err2:", err2) &#125; pageContent += string(buffer[:n]) &#125; osDir, _ := os.Getwd() dir := osDir + "/qunar/" os.Mkdir(dir, os.ModePerm) fileName := dir + strconv.Itoa(articleId) + ".txt" file, err3 := os.Create(fileName) if err3 != nil &#123; fmt.Println("Êñá‰ª∂ÂàõÂª∫Â§±Ë¥•: ", err3) &#125; /* ÂÜôÂÖ•ÂÜÖÂÆπÂà∞Êñá‰ª∂*/ image_pat := regexp.MustCompile(`data-retina="(.*?)" class="box_img js_box_img js_lazyimg ajaxloading"`) image_urls := image_pat.FindAllStringSubmatch(pageContent, -1) //var saveImages []string imgDir := osDir + "/qunar/" + strconv.Itoa(articleId) + "/" os.Mkdir(imgDir, os.ModePerm) fileSaveChan := make(chan int) for key, image := range image_urls &#123; key++ go saveImageUrlToFile(key, image[1], imgDir, fileSaveChan) file.WriteString(string(key) + "--" + image[1] + "\n") //saveImages = append(saveImages, image[1]) &#125; imgCount := (len(image_urls)) for i := 0; i &lt; imgCount; i++ &#123; fmt.Printf("ÂõæÁâá%d.jpg ‰øùÂ≠òÊàêÂäü\n", &lt;-fileSaveChan) &#125;&#125;//‰øùÂ≠òÊñá‰ª∂‰ª∂func saveImageUrlToFile(i int, imgUrl, dir string, fileSaveChan chan int) &#123; fileName := dir + strconv.Itoa(i) + ".jpg" file, _ := os.Create(fileName) resp, err1 := http.Get(imgUrl) if err1 != nil &#123; fmt.Println("saveImageUrlToFile err:", err1) return &#125; defer resp.Body.Close() buffer := make([]byte, 8192) for &#123; n, err2 := resp.Body.Read(buffer) if n == 0 &#123; //fmt.Println("saveImageUrlToFile ËØªÂèñÁΩëÈ°µÂÆåÊàê:", i) break &#125; if err2 != nil &amp;&amp; err2 != io.EOF &#123; fmt.Println("err2:", err2) &#125; //Êï∞ÊçÆÂÜôÂÖ•Êñá‰ª∂ file.Write(buffer[:n]) &#125; fileSaveChan &lt;- i&#125;]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>Áà¨Ëô´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GolangÁà¨Ëô´Á≥ªÂàó‰∫åÔºöÁà¨ÂèñÊçßËÖπÁΩëÊÆµÂ≠êÂèäÂÖ∂Á¨ëËØùËØ¶ÊÉÖ]]></title>
    <url>%2F2019%2F08%2F12%2Fgolang%E7%88%AC%E5%8F%96%E5%86%85%E6%B6%B5%E6%AE%B5%E5%AD%90%E7%AC%91%E8%AF%9D%E5%8F%8A%E4%BA%8C%E7%BA%A7%E9%A1%B5%E9%9D%A2%2F</url>
    <content type="text"><![CDATA[Â£∞ÊòéÔºö‰ª•‰∏ãÂÜÖÂÆπ‰ªÖ‰æõÊäÄÊúØÂ≠¶‰π†ÁÆÄËø∞ÔºöÁà¨Âèñ ÊçßËÖπÁΩë ‰∏≠ÁöÑ ÊÆµÂ≠êÈ°µÈù¢Êï∞ÊçÆÂèäÊØè‰∏ÄÊù°Êï∞ÊçÆÊâÄÈìæÊé•ÁöÑ Á¨ëËØùËØ¶ÊÉÖÈ°µ„ÄÇ Ê≠•È™§Â¶Ç‰∏ã‰ª•Á¨¨‰∏ÄÈ°µÔºàhttps://www.pengfu.com/xiaohua_1.htmlÔºâ ‰∏æ‰æã 1: Áà¨ÂèñÁ¨¨‰∏ÄÈ°µÁöÑÂÜÖÂÆπÔºåËé∑ÂèñÈáåÈù¢ÊØè‰∏Ä‰∏™Á¨ëËØùÁöÑÈìæÊé•; 2: Áà¨ÂèñÊ≠•È™§1Ëé∑ÂèñÂà∞ÁöÑÁ¨ëËØùÈìæÊé•ÁöÑÂÜÖÂÆπÔºåËß£ÊûêÁ¨ëËØùÊ†áÈ¢òÂíåÂÜÖÂÆπ 3: Â∞ÜÊØè‰∏ÄÈ°µÁà¨ÂèñÂà∞ÁöÑÊ†áÈ¢òÂíåÂÜÖÂÆπÂÜôÂÖ•Âà∞Êñá‰ª∂‰∏≠ ‰ª£‰π∞Á§∫‰æãÂ¶Ç‰∏ã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140package mainimport ( "fmt" "strconv" "net/http" "io" "regexp" "strings" "os")func main() &#123; var start int var end int fmt.Print("ËØ∑ËæìÂÖ•Áà¨ÂèñÁöÑËµ∑ÂßãÈ°µ: ") fmt.Scan(&amp;start) fmt.Print("ËØ∑ËæìÂÖ•Áà¨ÂèñÁöÑÁªìÊùüÈ°µ: ") fmt.Scan(&amp;end) //Áà¨Âèñ‰∏öÂä°ÈÄªËæë pengfuWorking(start, end)&#125;func pengfuWorking(start, end int) &#123; fmt.Println(start, ":", end) pageChan := make(chan int) for i := start; i &lt;= end; i++ &#123; //ÂºÄÂêØÂçèÁ®ã go pengfuSpider(i, pageChan) &#125; for i := start; i &lt;= end; i++ &#123; //ËØªÂèñÁÆ°ÈÅìÊ†áËØÜ fmt.Printf("Á¨¨ %d È°µ Áà¨ÂèñÂÆåÊàê\n", &lt;-pageChan) &#125;&#125;//ÊäìÂèñÂ∏¶Êúâ10‰∏™ÊÆµÂ≠êÁöÑurlfunc pengfuSpider(i int, pageChan chan int) &#123; //https://www.pengfu.com/xiaohua_1.html url := "https://www.pengfu.com/xiaohua_" + strconv.Itoa(i) + ".html" //ÊäìÂèñurl‰∏≠ÁöÑÂÜÖÂÆπ result, err := spiderUrlContent(url) if err != nil &#123; fmt.Println("err messageÔºö", err) return &#125; //Áà¨ÂèñÊØè‰∏ÄÈ°µÁöÑÊÆµÂ≠ê urlPat := regexp.MustCompile(`&lt;h1 class="dp-b"&gt;&lt;a href="(?s:(.*?))"`) urls := urlPat.FindAllStringSubmatch(result, -1) //ÂàõÂª∫Â≠òÂÇ®title,content ÁöÑÂàáÁâá titleSlice := make([]string, 0) contentSlice := make([]string, 0) for _, value := range urls &#123; url := value[1] title, content, err := spiderDetailContent(url) if err != nil &#123; fmt.Println("spiderDetailContent error:", err) continue &#125; titleSlice = append(titleSlice, title) contentSlice = append(contentSlice, content) &#125; saveJokeToFile(i, titleSlice, contentSlice) pageChan &lt;- i&#125;func spiderUrlContent(url string) (result string, err error) &#123; resp, err1 := http.Get(url) if err1 != nil &#123; err = err1 return &#125; defer resp.Body.Close() buffer := make([]byte, 8196) for &#123; n, err2 := resp.Body.Read(buffer) if n == 0 &#123; fmt.Println("ËØªÂèñÁΩëÈ°µÂÆåÊàê:", url) break &#125; if err2 != nil &amp;&amp; err2 != io.EOF &#123; err = err2 return &#125; result += string(buffer[:n]) &#125; return&#125;//Áà¨Âèñ‰∏Ä‰∏™Á¨ëËØùËØ¶ÊÉÖÈ°µÁöÑÊ†áÈ¢òÂíåÂÜÖÂÆπfunc spiderDetailContent(url string) (title, content string, err error) &#123; result, err1 := spiderUrlContent(url) if err1 != nil &#123; err = err1 return &#125; //ÂåπÈÖçÊ†áÈ¢ò titlePat := regexp.MustCompile(`&lt;h1&gt;(?s:(.*?))\t*&lt;/h1&gt;`) titles := titlePat.FindAllStringSubmatch(result, 1) title = titles[0][1] title = strings.Trim(title, "") title = strings.Replace(title, "&amp;nbsp; ", "", -1) //ÂåπÈÖçÂÜÖÂÆπ contentPat := regexp.MustCompile(`&lt;div class="content-txt pt10"&gt;\n*\t*(?s:(.*?))&lt;a`) contents := contentPat.FindAllStringSubmatch(result, 1) content = contents[0][1] content = strings.Trim(content, "\t") content = strings.Replace(content, "\t", "", -1) return&#125;func saveJokeToFile(idx int, titleSlice, contentSlice []string) &#123; //Â∞ÜËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Â≠òÂÇ®‰∏∫Êñá‰ª∂ dir, _ := os.Getwd() filePath := dir + "/pengfu_" + strconv.Itoa(idx) + ".txt" file, err := os.Create(filePath) if err != err &#123; fmt.Println("os Create errÔºö", err.Error()) return &#125; defer file.Close() //‰øùÂ≠òÂ•Ω‰∏Ä‰∏™Êñá‰ª∂Â∞±ÂÖ≥Èó≠‰∏Ä‰∏™Êñá‰ª∂ for i := 0; i &lt; len(titleSlice); i++ &#123; file.WriteString(titleSlice[i] + ":\t\t" + contentSlice[i] + "\n") &#125;&#125; Áà¨ÂèñÂà∞ÁöÑÊñáÊú¨Êñá‰ª∂Á§∫‰æã 12345678910‰ºöÊîæÂùè: Â•≥Ôºö‚ÄúÊàëË¥≠Áâ©ËΩ¶ÈáåÁöÑÈÇ£‰∫õÊ∞¥ÊûúÁâõÂ•∂È•ÆÊñôÈõ∂È£ü‰Ω†Ëµ∂Á¥ßÁªôÊàë‰π∞ÔºÅ‚Äù Áî∑Ôºö‚ÄúÁùÄ‰ªÄ‰πàÊÄ•ÂëÄÔºü‚Äù Â•≥Ôºö‚ÄúÂ§©Ë∂äÊù•Ë∂äÁÉ≠‰∫ÜÔºå‰ºöÊîæÂùèÁöÑ„ÄÇ‚ÄùËÇâÂ§öËàíÊúç: Ê•º‰∏ªÂ§ßÂõõÂ•≥ÁîüÔºåËøôÂá†Â§©ÂíåÂêå‰∏ÄÂÆøËàçÁöÑÂ•≥Áîü‰∏ÄËµ∑ÂéªÊâæÂ∑•‰ΩúÔºåÂú®ÁÅ´ËΩ¶Á´ôÔºåÁ¢∞Âà∞‰∏Ä‰∏™Â§ßÂßêÔºåÂ∏¶ÁùÄ‰∏Ä‰∏™Âõõ‰∫îÂ≤ÅÁöÑÂ∞èÁî∑Â≠©‰æØËΩ¶ÔºåÂ∞èÁî∑Â≠©ÊÄªÊòØÁ≤òÁùÄÊàëÔºåË¶ÅÂùêÊàëËÖø‰∏äÔºåÂêåÂÆøËàçÁöÑÂ•≥ÁîüÂæàÊòØÁæ°ÊÖïÊàëÊúâ‰∫∫ÁºòÔºåÊàëÂæóÊÑèÁöÑÈóÆÂ∞èÁî∑Â≠©Ôºö‚Äú‰Ω†‰∏∫‰ªÄ‰πàËÄÅÊòØÂñúÊ¨¢ÂùêÂßêÂßêËÖø‰∏äÔºü‚Äù Â∞èÁî∑Â≠©Áî®Á®öÂ´©ÁöÑÂè£Ê∞îÂõûÁ≠îÔºö‚ÄúÂßêÂßêËÖø‰∏äËÇâÂ§öÔºåÂùêÁùÄËàíÊúç‚Äù ÊàëÔºö‚ÄúÂ∞ºÁéõÔºåËøôÊòØË∞ÅÂÆ∂Â∞èÂìîÂ¥ΩÂ≠êÔºåÂø´ÁÇπÈ¢ÜËµ∞ÔºÅ‚ÄùÂç∏Â¶Ü: ‰∏ÄÂ•≥‰∫∫ÈóÆÂ§ßÂ∏àÔºöÂ§ßÂ∏àÔºåÂú®Ëøô‰πàÂ§çÊùÇÈô©ÊÅ∂ÁöÑ‰∏ñÁïåÔºåÊàë‰∏Ä‰∏™Âº±Â•≥Â≠êÂ¶Ç‰Ωï‰øùÊä§Ëá™Â∑±ÔºüÂ§ßÂ∏àËØ¥Ôºö‰Ω†ÊääÂ¶ÜÂç∏‰∫ÜÔºÅÂà∫ÂçÅÂ≠óÁª£: ÂÆ∂ÈïøÂØπÂ≠©Â≠êÁöÑÊïôËÇ≤ÁúüÁöÑÈùûÂ∏∏ÈáçË¶Å„ÄÇÊúâ‰∫õÁî∑Â≠©ÔºåÂ∞èÊó∂ÂÄôË∞ÉÁöÆÁöÑÂæàÔºåÂÅ∑‰∫ÜÈÇªÂ±ÖÂÆ∂‰∏ÄÊ†πÈíàÔºåÂÆ∂Èïø‰πü‰∏çÁÆ°Ôºå‰∏ÄÊ†πÈíàÂòõÔºåÊ≤°‰∫ã„ÄÇÁªìÊûúÂ≠©Â≠êÈïøÂ§ß‰∫ÜÔºå‰∏çÂ•ΩÂ•ΩÂ≠¶‰π†ÊØèÂ§©ÂëÜÂú®ÂÆ∂ÈáåÂà∫ÂçÅÂ≠óÁª£„ÄÇÁ∫¶‰ºö: ÁΩë‰∏äËÅä‰∫Ü‰∏ÄÂ¶πÂ≠êÔºå‰ªäÂ§©ËßÅÈù¢„ÄÇÈóÆËÄÅÂ¶àË¶Å‰∫Ü‰∫åÁôæÂùóÈí±ÔºåËÄÅÂ¶àÈóÆÊàëÂπ≤ÂòõÁî®ÔºåÊàëËØ¥Á∫¶‰ºöÔºåÂ•πÈ´òÈ´òÂÖ¥ÂÖ¥ÁöÑÂ∞±Áªô‰∫Ü„ÄÇÂàöÂá∫ÂÆ∂Èó®ÔºåËÄÅÁà∏Â∞±ÊääÊàëÊãΩÂà∞‰∏ÄËæπËØ¥‚ÄúÂ∞èÂ≠êÔºå‰∫åÁôæÂùóÈí±ÁªôÊàë‰∏ÄÁôæÔºåÂçä‰∏™Êúà‰∏çÁü•ÈÅìÁÉüÁöÑÊªãÂë≥‰∫Ü„ÄÇ‚ÄùÊàëËØ¥‚ÄúÁà∏ÔºåËøôÊòØÊàëÂíåÂ•≥ÊúãÂèãÁöÑÁ∫¶‰ºöÈí±Ôºå‰∏çËÉΩÁªô‰Ω†„ÄÇ‚ÄùËÄÅÁà∏ËØ¥‰∫Ü„ÄÇ‚Äú‰Ω†Á∫¶‰ªÄ‰πà‰ºöÔºåÈÇ£ÊòØÊàëÂàöÂª∫ÁöÑÂ∞èÂè∑Ôºå‰∏∫‰∫ÜÊäΩÈ¢óÁÉüÊàëÂíå‰Ω†ËÅä‰∫ÜÂçä‰∏™Êúà‰∫ÜÔºåÂø´ÊãøÊù•„ÄÇ‚Äò‚ÄôÊîπÈÖçÊñπ‰∫Ü: 70Âπ¥‰ª£Êó∂ÔºåÊúâ‰∏ÄÈïøËæàÁªÉÈìÅÊ≤ôÊéåÔºåÂäüÂ§´Êàê‰∫Ü‰πãÂêéÔºåÂèØ‰ª•ÊéåÊñ≠‰∫îÁ†ñÔºåÂáåÁ©∫Á¢éÁ†ñÔºåÂ®ÅÈ£éÁöÑ‰∏çÂæó‰∫Ü„ÄÇ Âà∞80Âπ¥‰ª£ÔºåÂè™ËÉΩÊéåÊñ≠‰∏âÁ†ñ„ÄÇ Âà∞90Âπ¥‰ª£Âè™ËÉΩ‰∏ÄÁ†ñ‰∏ÄÁ†ñÁöÑÊñ≠‰∫Ü„ÄÇ ‰ªñËØ¥Ôºå‰∏ÄÁõ¥‰ª•‰∏∫ÂäüÂäõÈÄÄÊ≠•‰∫ÜÔºåÂêéÊù•ÊâçÁü•ÈÅìÁÉßÁ†ñÁöÑÈÖçÊñπÊîπ‰∫Ü„ÄÇ„ÄÇ„ÄÇÊä•ÊÅ©: ‰∏∫‰ªÄ‰πàÂè§Ë£ÖÂâßÈáåÊÄªÊòØÊúâÂ•≥‰∫∫‰ºöÂØπÊÅ©‰∫∫ËØ¥ÔºöÂ∞èÂ•≥Â≠êÊó†‰ª•‰∏∫Êä•ÔºåÂîØÊúâ‰ª•Ë∫´Áõ∏ËÆ∏ÔºåÂè§‰ª£ÁúüÁöÑÂ≠òÂú®ËøôÁßçÁé∞Ë±°ÂêóÔºü ÊâØÊ∑°ÔºåÈÇ£ÊòØÂõ†‰∏∫Â•πÂñúÊ¨¢‰ªñÔºåË¶ÅÊòØ‰∏çÂñúÊ¨¢ÔºåÂ•πÂ∞±‰ºöËØ¥ÔºöÂ∞èÂ•≥Â≠êÊó†‰ª•‰∏∫Êä•ÔºåÂîØÊúâÊù•ÁîüÂÜçÊä•‰∫Ü„ÄÇÈóÆË∑Ø: Êò•ËäÇÂõûËÄÅÂÆ∂Êó∂ÔºåÁúãÂà∞‰∏Ä‰∏™ËÄÅÂ§ñÂú®Âêë‰∏Ä‰∏™ÂÜúÊ∞ë‰ºØ‰ºØÈóÆË∑Ø„ÄÇÂè™ËßÅÈÇ£‰∏™ËÄÅÂ§ñ‰∏ÄËæπËØ¥ÁùÄÁîüÁ°¨ÁöÑ‰∏≠ÊñáÔºå‰∏ÄËæπÁî®ÊâãÁ¨îÂàíÔºå‰ΩÜÈÇ£‰∏™ÂÜúÊ∞ë‰ºØ‰ºØÂç¥ËøòÊòØ‰∏çÊòéÁôΩ„ÄÇÊúÄÂêéÔºåÈÇ£‰∏™ÂÜúÊ∞ë‰ºØ‰ºØËØ¥‰∫Ü‰∏ÄÂè•ËÆ©ÊàëËá≥‰ªäÈöæÂøòÁöÑËØùÔºö‚ÄúCan you speak English?‚ÄùËÄÅÁéã: Èó∫ËúúÊòØ‰∏™Èü©ÂâßËø∑ÔºåÂ•πËÄÅÂÖ¨ÊòØ‰∏™ÁêÉËø∑„ÄÇÊüêÂ§©Êôö‰∏äÊúâÁêÉËµõÔºå‰ªñ‰ø©Âõ†‰∏∫Êä¢ÁîµËßÜÊú∫ÈÅ•ÊéßÂô®Êâì‰∫ÜËµ∑Êù•„ÄÇÂ•π‰∏ÄÊ∞î‰πã‰∏ãÊâæÊàëÂì≠ËØâÔºåÊàëÈóÆÂ•πÔºö‚ÄúÁîµËßÜÈÅ•ÊéßÂô®ÊúÄÂêéÂΩíË∞Å‰∫Ü?‚ÄùÂ•πËæπÂì≠ËæπËØ¥Ôºö‚ÄúËÄÅÁéã„ÄÇ‚ÄùÊàëÁñëÊÉëÈÅìÔºö‚ÄúËøô‰∏™ËÄÅÁéãÊòØË∞ÅÂëÄ?ÊàëÊÄé‰πàÊ≤°Âê¨ËØ¥Ëøá„ÄÇ‚ÄùÂ•πÂì≠ÁöÑÂ£∞Èü≥Êõ¥Â§ß‰∫ÜÔºö‚Äú‰∏Ä‰∏™‰øÆÁîµËßÜÊú∫ÁöÑ‚Ä¶‚Ä¶‚Äù‰∏ëÁöÑÂÖàËØ¥: ‰∏§‰∏™Â•≥‰∫∫Âú®Â§ßË°ó‰∏äÂêµÊû∂ÔºåÈÇ£‰∏™È™ÇÁöÑÂêêÊ≤´Ê®™È£ûÂïä„ÄÇ‰∏ÄÂ§ßÂ¶àÁúã‰∏ç‰∏ãÂéª‰∫ÜÔºåÂèØË∞Å‰πü‰∏çÂê¨ÔºåÈÉΩËØ¥Ëá™Â∑±ÂØπÔºåÂØπÊñπÈîô„ÄÇÂ§ßÂ¶àÊ∑°Ê∑°Âú∞Êù•‰∫Ü‰∏ÄÂè•Ôºö‚ÄúÈÇ£‰πàËøôÊ†∑Ôºå‰∏ëÁöÑÂÖàËØ¥!‚ÄùÁû¨Èó¥ÔºåÊï¥‰∏™‰∏ñÁïåÈÉΩÂÆâÈùô‰∫Ü„ÄÇ„ÄÇ„ÄÇ]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>Áà¨Ëô´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GolangÁà¨Ëô´Á≥ªÂàó‰∏ÄÔºöÁà¨ÂèñË±ÜÁì£ÁîµÂΩ±top250Êï∞ÊçÆ‰ø°ÊÅØ]]></title>
    <url>%2F2019%2F08%2F10%2F%E8%B1%86%E7%93%A3%E7%94%B5%E5%BD%B1top250%E6%95%B0%E6%8D%AE%E7%88%AC%E5%8F%96%2F</url>
    <content type="text"><![CDATA[Â£∞ÊòéÔºö‰ª•‰∏ãÂÜÖÂÆπ‰ªÖ‰æõÊäÄÊúØÂ≠¶‰π†ÁÆÄËø∞ÔºöÁà¨ÂèñË±ÜÁì£ÁîµÂΩ± top 250 ÁöÑÂü∫Á°Ä‰ø°ÊÅØÔºåÂåÖÊã¨ÁîµÂΩ±üé¨ÂêçÔºåËØÑÂàÜÔºåËØÑ‰ª∑‰∫∫Êï∞ÔºåÁîµÂΩ±ÈìæÊé•„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131package mainimport ( "fmt" "strconv" "net/http" "io" "regexp" "os")func main() &#123; var start int //Ëµ∑ÂßãÈ°µ var end int //ÁªìÊùüÈ°µ fmt.Print("ËØ∑ËæìÂÖ•Áà¨ÂèñÁöÑËµ∑ÂßãÈ°µ:") fmt.Scanln(&amp;start) fmt.Print("ËØ∑ËæìÂÖ•Áà¨ÂèñÁöÑÁªìÊùüÈ°µ:") fmt.Scanln(&amp;end) toWorking(start, end)&#125;func toWorking(start, end int) &#123; fmt.Printf("Ëµ∑ÂßãÁªìÊùüÈ°µÊòØ%d : %d\n", start, end) pageChan := make(chan int) for i := start; i &lt;= end; i++ &#123; go SpiderDoubanPage(i, pageChan) &#125; for i := start; i &lt;= end; i++ &#123; //ÂºÄÂêØÂçèÁ®ã fmt.Printf("Á¨¨ %d È°µ Áà¨ÂèñÂÆåÊàê\n", &lt;-pageChan) &#125;&#125;func SpiderDoubanPage(i int, pageChan chan int) &#123; //https://movie.douban.com/top250?start=0&amp;filter= //https://movie.douban.com/top250?start=25&amp;filter= //https://movie.douban.com/top250?start=50&amp;filter= url := "https://movie.douban.com/top250?start=" + strconv.Itoa((i-1)*25) //Áà¨ÂèñurlÈ°µÈù¢ÂÜÖÂÆπ„ÄêÊ®™ÂêëÁà¨Âèñ„Äë result, err := httpGetDoubanUrlContent(url) if err != nil &#123; fmt.Println("err messageÔºö", err) return &#125; //fmt.Println(result) //‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèËß£ÊûêÂÜÖÂÆπ---ÁîµÂΩ±ÂêçÁß∞ film_pat := regexp.MustCompile(`width="100" alt="(.*?)"`) FilmNames := film_pat.FindAllStringSubmatch(result, -1) //‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèËß£ÊûêÂÜÖÂÆπ---ÁîµÂΩ±ÂàÜÊï∞ score_pat := regexp.MustCompile(`v:average"&gt;(?s:(.*?))&lt;`) filmScores := score_pat.FindAllStringSubmatch(result, -1) //‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèËß£ÊûêÂÜÖÂÆπ---ËØÑ‰ª∑‰∫∫Êï∞ people_pat := regexp.MustCompile(`&lt;span&gt;(?s:(\d*?))‰∫∫ËØÑ‰ª∑&lt;/span&gt;`) peopleNum := people_pat.FindAllStringSubmatch(result, -1) //‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèËß£ÊûêÂÜÖÂÆπ---ÁîµÂΩ±ËØ¶ÊÉÖÈ°µurl film_url_pat := regexp.MustCompile(`&lt;a href="(.*?)" class=""&gt;`) filmUrls := film_url_pat.FindAllStringSubmatch(result, -1) //‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèËß£ÊûêÂÜÖÂÆπ---ÁîµÂΩ±Â∫èÂè∑ film_order_pat := regexp.MustCompile(`&lt;em class=""&gt;(\d*)&lt;/em&gt;`) filmOrders := film_order_pat.FindAllStringSubmatch(result, -1) saveToFile(i, filmOrders, FilmNames, filmScores, peopleNum, filmUrls) pageChan &lt;- i&#125;func httpGetDoubanUrlContent(url string) (result string, err error) &#123; resp, err1 := http.Get(url) if err1 != nil &#123; err = err1 return &#125; defer resp.Body.Close() buffer := make([]byte, 8192) for &#123; n, err2 := resp.Body.Read(buffer) if n == 0 &#123; fmt.Println("ËØªÂèñÁΩëÈ°µÂÆåÊàê") break &#125; if err2 != nil &amp;&amp; err2 != io.EOF &#123; err = err2 return &#125; result += string(buffer[:n]) &#125; return&#125;func saveToFile(idx int, filmOrders, filmNames, filmScores, peopleNum, filmUrls [][]string) &#123; //Â∞ÜËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Â≠òÂÇ®‰∏∫Êñá‰ª∂ dir, _ := os.Getwd() filePath := dir + "douban_top_" + strconv.Itoa(idx) + ".txt" file, err := os.Create(filePath) if err != err &#123; fmt.Println("os Create errÔºö", err.Error()) return &#125; defer file.Close() //‰øùÂ≠òÂ•Ω‰∏Ä‰∏™Êñá‰ª∂Â∞±ÂÖ≥Èó≠‰∏Ä‰∏™Êñá‰ª∂ file.WriteString( "Â∫èÂè∑" + "\t" + "ÁîµÂΩ±ÂêçÁß∞" + "\t" + "ÁîµÂΩ±ËØÑÂàÜ" + "\t" + "ËØÑ‰ª∑‰∫∫Êï∞" + "\t" + "ÈìæÊé•Âú∞ÂùÄ" + "\n") for i := 0; i &lt; len(filmNames); i++ &#123; file.WriteString( filmOrders[i][1] + "\t" + filmNames[i][1] + "\t" + filmScores[i][1] + "\t" + peopleNum[i][1] + "\t" + filmUrls[i][1] + "\n") &#125;&#125; ‰ΩøÁî® linux ÂëΩ‰ª§ÂêàÂπ∂Áà¨ÂèñÁöÑÊñá‰ª∂ cat crawlerdouban_top_*.txt&gt;top250.txt //Êñá‰ª∂ÂêàÂπ∂ cat top250.txt |grep -v &#39;Â∫èÂè∑&#39;&gt;douban_top250_movie_list.txt //ÂéªÂèñÊåáÂÆöÂÜÖÂÆπ sort -k 1 -n douban_top250_movie_list.txt&gt;douban_top250_movie_list_ordered.txt //ÊéíÂ∫è ÁúãÂøÉÊÉÖÂú®Êñá‰ª∂Â§¥ÈÉ®Âä†‰∏ä Â∫èÂè∑ ÁîµÂΩ±ÂêçÁß∞ ÁîµÂΩ±ËØÑÂàÜ ËØÑ‰ª∑‰∫∫Êï∞ ÈìæÊé•Âú∞ÂùÄ ÁªìÊûúÂ¶Ç‰∏ã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251Â∫èÂè∑ ÁîµÂΩ±ÂêçÁß∞ ÁîµÂΩ±ËØÑÂàÜ ËØÑ‰ª∑‰∫∫Êï∞ ÈìæÊé•Âú∞ÂùÄ1 ËÇñÁî≥ÂÖãÁöÑÊïëËµé 9.7 1535695 https://movie.douban.com/subject/1292052/2 Èú∏ÁéãÂà´Âß¨ 9.6 1136522 https://movie.douban.com/subject/1291546/3 Ëøô‰∏™ÊùÄÊâã‰∏çÂ§™ÂÜ∑ 9.4 1388824 https://movie.douban.com/subject/1295644/4 ÈòøÁîòÊ≠£‰º† 9.4 1199279 https://movie.douban.com/subject/1292720/5 Áæé‰∏Ω‰∫∫Áîü 9.5 702825 https://movie.douban.com/subject/1292063/6 ÂçÉ‰∏éÂçÉÂØª 9.3 1231099 https://movie.douban.com/subject/1291561/7 Ê≥∞Âù¶Â∞ºÂÖãÂè∑ 9.4 1140842 https://movie.douban.com/subject/1292722/8 ËæõÂæ∑ÂãíÁöÑÂêçÂçï 9.5 623915 https://movie.douban.com/subject/1295124/9 ÁõóÊ¢¶Á©∫Èó¥ 9.3 1189561 https://movie.douban.com/subject/3541415/10 Âø†Áä¨ÂÖ´ÂÖ¨ÁöÑÊïÖ‰∫ã 9.3 795328 https://movie.douban.com/subject/3011091/11 Êú∫Âô®‰∫∫ÊÄªÂä®Âëò 9.3 788458 https://movie.douban.com/subject/2131459/12 ‰∏âÂÇªÂ§ßÈóπÂÆùËé±Âùû 9.2 1075170 https://movie.douban.com/subject/3793023/13 ÊîæÁâõÁè≠ÁöÑÊò•Â§© 9.3 748223 https://movie.douban.com/subject/1291549/14 Êµ∑‰∏äÈí¢Áê¥Â∏à 9.2 872907 https://movie.douban.com/subject/1292001/15 Ê•öÈó®ÁöÑ‰∏ñÁïå 9.2 832134 https://movie.douban.com/subject/1292064/16 Â§ßËØùË•øÊ∏∏‰πãÂ§ßÂú£Â®∂‰∫≤ 9.2 835440 https://movie.douban.com/subject/1292213/17 ÊòüÈôÖÁ©øË∂ä 9.3 854952 https://movie.douban.com/subject/1889243/18 ÈæôÁå´ 9.2 739493 https://movie.douban.com/subject/1291560/19 ÁÜîÁÇâ 9.3 492270 https://movie.douban.com/subject/5912992/20 ÊïôÁà∂ 9.3 536821 https://movie.douban.com/subject/1291841/21 Êó†Èó¥ÈÅì 9.2 686756 https://movie.douban.com/subject/1307914/22 ÁñØÁãÇÂä®Áâ©Âüé 9.2 961506 https://movie.douban.com/subject/25662329/23 ÂΩìÂπ∏Á¶èÊù•Êï≤Èó® 9.1 870538 https://movie.douban.com/subject/1849031/24 ÊÄ¶ÁÑ∂ÂøÉÂä® 9.0 971877 https://movie.douban.com/subject/3319755/25 Ëß¶‰∏çÂèØÂèä 9.2 569502 https://movie.douban.com/subject/6786002/26 ËùôËù†‰æ†ÔºöÈªëÊöóÈ™ëÂ£´ 9.1 561534 https://movie.douban.com/subject/1851857/27 ‰π±‰∏ñ‰Ω≥‰∫∫ 9.3 394279 https://movie.douban.com/subject/1300267/28 Ê¥ªÁùÄ 9.2 444310 https://movie.douban.com/subject/1292365/29 ÊéßÊñπËØÅ‰∫∫ 9.6 199996 https://movie.douban.com/subject/1296141/30 Â∞ëÂπ¥Ê¥æÁöÑÂ•áÂπªÊºÇÊµÅ 9.0 854147 https://movie.douban.com/subject/1929463/31 ÊåáÁéØÁéã3ÔºöÁéãËÄÖÊó†Êïå 9.2 432241 https://movie.douban.com/subject/1291552/32 ÊëîË∑§ÂêßÔºÅÁà∏Áà∏ 9.0 848439 https://movie.douban.com/subject/26387939/33 Â§©Á©∫‰πãÂüé 9.1 507243 https://movie.douban.com/subject/1291583/34 È¨ºÂ≠êÊù•‰∫Ü 9.2 361061 https://movie.douban.com/subject/1291858/35 ÂçÅ‰∫åÊÄíÊ±â 9.4 257052 https://movie.douban.com/subject/1293182/36 Â§©Â†ÇÁîµÂΩ±Èô¢ 9.2 416891 https://movie.douban.com/subject/1291828/37 È£ûÂ±ãÁéØÊ∏∏ËÆ∞ 9.0 773645 https://movie.douban.com/subject/2129039/38 Â§ßËØùË•øÊ∏∏‰πãÊúàÂÖâÂÆùÁõí 9.0 675104 https://movie.douban.com/subject/1299398/39 ÂìàÂ∞îÁöÑÁßªÂä®ÂüéÂ†° 9.0 570115 https://movie.douban.com/subject/1308807/40 ÊêèÂáª‰ø±‰πêÈÉ® 9.0 543030 https://movie.douban.com/subject/1292000/41 ÁΩóÈ©¨ÂÅáÊó• 9.0 576438 https://movie.douban.com/subject/1293839/42 Êú´‰ª£ÁöáÂ∏ù 9.2 354693 https://movie.douban.com/subject/1293172/43 ÂØªÊ¢¶ÁéØÊ∏∏ËÆ∞ 9.0 811262 https://movie.douban.com/subject/20495023/44 ÈóªÈ¶ôËØÜÂ•≥‰∫∫ 9.0 493633 https://movie.douban.com/subject/1298624/45 Ëæ©Êä§‰∫∫ 9.2 340911 https://movie.douban.com/subject/21937445/46 Á¥†Â™õ 9.2 322715 https://movie.douban.com/subject/21937452/47 Á™ÉÂê¨È£éÊö¥ 9.1 340301 https://movie.douban.com/subject/1900841/48 Ê≠ª‰∫°ËØóÁ§æ 9.0 414748 https://movie.douban.com/subject/1291548/49 ‰∏§ÊùÜÂ§ßÁÉüÊû™ 9.1 369786 https://movie.douban.com/subject/1293350/50 È£ûË∂äÁñØ‰∫∫Èô¢ 9.1 373765 https://movie.douban.com/subject/1292224/51 ÊåáÁéØÁéã2ÔºöÂèåÂ°îÂ•áÂÖµ 9.0 405233 https://movie.douban.com/subject/1291572/52 ÊïôÁà∂2 9.2 291589 https://movie.douban.com/subject/1299131/53 ÊåáÁéØÁéã1ÔºöÈ≠îÊàíÂÜçÁé∞ 9.0 454776 https://movie.douban.com/subject/1291571/54 ÁãÆÂ≠êÁéã 9.0 441123 https://movie.douban.com/subject/1301753/55 VÂ≠ó‰ªáÊùÄÈòü 8.9 634942 https://movie.douban.com/subject/1309046/56 Áæé‰∏ΩÂøÉÁÅµ 9.0 442940 https://movie.douban.com/subject/1306029/57 È•ÆÈ£üÁî∑Â•≥ 9.1 312944 https://movie.douban.com/subject/1291818/58 Êµ∑Ë±öÊπæ 9.3 246512 https://movie.douban.com/subject/3442220/59 ÊÉÖ‰π¶ 8.9 544709 https://movie.douban.com/subject/1292220/60 ‰Ωï‰ª•‰∏∫ÂÆ∂ 9.1 353458 https://movie.douban.com/subject/30170448/61 Èí¢Áê¥ÂÆ∂ 9.1 293055 https://movie.douban.com/subject/1296736/62 Â§ßÈóπÂ§©ÂÆ´ 9.3 190080 https://movie.douban.com/subject/1418019/63 Êú¨Êù∞Êòé¬∑Â∑¥È°øÂ•á‰∫ã 8.9 577017 https://movie.douban.com/subject/1485260/64 ÂìàÂà©¬∑Ê≥¢Áâπ‰∏éÈ≠îÊ≥ïÁü≥ 8.9 466720 https://movie.douban.com/subject/1295038/65 Áúã‰∏çËßÅÁöÑÂÆ¢‰∫∫ 8.8 635451 https://movie.douban.com/subject/26580232/66 ÈªëÂÆ¢Â∏ùÂõΩ 8.9 434713 https://movie.douban.com/subject/1291843/67 Ë•øË•øÈáåÁöÑÁæé‰∏Ω‰º†ËØ¥ 8.8 552815 https://movie.douban.com/subject/1292402/68 Â∞èÈûãÂ≠ê 9.2 218270 https://movie.douban.com/subject/1303021/69 ÁæéÂõΩÂæÄ‰∫ã 9.2 248262 https://movie.douban.com/subject/1292262/70 ÊãØÊïëÂ§ßÂÖµÁëûÊÅ© 9.0 370031 https://movie.douban.com/subject/1292849/71 ËÆ©Â≠êÂºπÈ£û 8.8 937467 https://movie.douban.com/subject/3742360/72 Èü≥‰πê‰πãÂ£∞ 9.0 340645 https://movie.douban.com/subject/1294408/73 Ëá¥ÂëΩÈ≠îÊúØ 8.8 497893 https://movie.douban.com/subject/1780330/74 Áå´Èº†Ê∏∏Êàè 8.9 404409 https://movie.douban.com/subject/1305487/75 ‰∏ÉÂÆóÁΩ™ 8.8 593674 https://movie.douban.com/subject/1292223/76 Ë¢´Â´åÂºÉÁöÑÊùæÂ≠êÁöÑ‰∏ÄÁîü 8.9 445775 https://movie.douban.com/subject/1787291/77 ‰Ωé‰øóÂ∞èËØ¥ 8.8 494334 https://movie.douban.com/subject/1291832/78 Ê≤âÈªòÁöÑÁæîÁæä 8.8 497708 https://movie.douban.com/subject/1293544/79 Ëù¥Ëù∂ÊïàÂ∫î 8.8 548478 https://movie.douban.com/subject/1292343/80 Êò•ÂÖâ‰πçÊ≥Ñ 8.9 367593 https://movie.douban.com/subject/1292679/81 ÂãáÊï¢ÁöÑÂøÉ 8.9 388081 https://movie.douban.com/subject/1294639/82 Â§©‰ΩøÁà±Áæé‰∏Ω 8.7 657882 https://movie.douban.com/subject/1292215/83 Á©øÊù°Á∫πÁù°Ë°£ÁöÑÁî∑Â≠© 9.0 256883 https://movie.douban.com/subject/3008247/84 Ââ™ÂàÄÊâãÁà±Âæ∑Âçé 8.7 675841 https://movie.douban.com/subject/1292370/85 ÂøÉÁÅµÊçïÊâã 8.8 402941 https://movie.douban.com/subject/1292656/86 Á¶ÅÈó≠Â≤õ 8.8 537386 https://movie.douban.com/subject/2334904/87 Â∏ÉËææ‰Ω©ÊñØÂ§ßÈ•≠Â∫ó 8.8 500379 https://movie.douban.com/subject/11525673/88 ÈòøÂá°Ëææ 8.7 787025 https://movie.douban.com/subject/1652587/89 ÂÖ•ÊÆìÂ∏à 8.8 401708 https://movie.douban.com/subject/2149806/90 ÂπΩÁÅµÂÖ¨‰∏ª 8.9 336781 https://movie.douban.com/subject/1297359/91 Âä†ÂãíÊØîÊµ∑Áõó 8.7 519035 https://movie.douban.com/subject/1298070/92 Êë©ÁôªÊó∂‰ª£ 9.3 148862 https://movie.douban.com/subject/1294371/93 Ëá¥ÂëΩID 8.7 455343 https://movie.douban.com/subject/1297192/94 Êñ≠ËÉåÂ±± 8.7 448806 https://movie.douban.com/subject/1418834/95 Èò≥ÂÖâÁÅøÁÉÇÁöÑÊó•Â≠ê 8.8 379539 https://movie.douban.com/subject/1291875/96 ÈáçÂ∫ÜÊ£ÆÊûó 8.7 471704 https://movie.douban.com/subject/1291999/97 Á¨¨ÂÖ≠ÊÑü 8.8 326415 https://movie.douban.com/subject/1297630/98 Áã©Áåé 9.1 196797 https://movie.douban.com/subject/6985810/99 ÂñúÂâß‰πãÁéã 8.7 513460 https://movie.douban.com/subject/1302425/100 Áéõ‰∏ΩÂíåÈ©¨ÂÖãÊÄù 8.9 290154 https://movie.douban.com/subject/3072124/101 Ê∂àÂ§±ÁöÑÁà±‰∫∫ 8.7 525034 https://movie.douban.com/subject/21318488/102 ÂëäÁôΩ 8.7 467513 https://movie.douban.com/subject/4268598/103 Â∞èÊ£ÆÊûó Â§èÁßãÁØá 9.0 226137 https://movie.douban.com/subject/25814705/104 Â§ßÈ±º 8.8 347484 https://movie.douban.com/subject/1291545/105 ‰∏Ä‰∏Ä 9.0 210191 https://movie.douban.com/subject/1292434/106 Èò≥ÂÖâÂßêÂ¶πÊ∑ò 8.8 378032 https://movie.douban.com/subject/4917726/107 Áà±Âú®ÈªéÊòéÁ†¥ÊôìÂâç 8.8 326958 https://movie.douban.com/subject/1296339/108 ËØ∑‰ª•‰Ω†ÁöÑÂêçÂ≠óÂëºÂî§Êàë 8.8 327024 https://movie.douban.com/subject/26799731/109 Â∞ÑÈõïËã±ÈõÑ‰º†‰πã‰∏úÊàêË•øÂ∞± 8.7 384745 https://movie.douban.com/subject/1316510/110 ÁîúËúúËúú 8.8 307227 https://movie.douban.com/subject/1305164/111 ‰æßËÄ≥ÂÄæÂê¨ 8.9 256439 https://movie.douban.com/subject/1297052/112 Á∫¢Ëæ£Ê§í 8.9 210659 https://movie.douban.com/subject/1865703/113 È©ØÈæôÈ´òÊâã 8.7 438648 https://movie.douban.com/subject/2353023/114 ÂÄ©Â•≥ÂπΩÈ≠Ç 8.7 399855 https://movie.douban.com/subject/1297447/115 Ë∂ÖËÑ± 8.8 256836 https://movie.douban.com/subject/5322596/116 ÊùÄ‰∫∫ÂõûÂøÜ 8.8 314334 https://movie.douban.com/subject/1300299/117 Êµ∑ËíÇÂíåÁà∑Áà∑ 9.1 142601 https://movie.douban.com/subject/25958717/118 ÊÅêÊÄñÁõ¥Êí≠ 8.7 349058 https://movie.douban.com/subject/21360417/119 ËèäÊ¨°ÈÉéÁöÑÂ§èÂ§© 8.8 284490 https://movie.douban.com/subject/1293359/120 Áà±Âú®Êó•ËêΩÈªÑÊòèÊó∂ 8.8 285141 https://movie.douban.com/subject/1291990/121 7Âè∑ÊàøÁöÑÁ§ºÁâ© 8.8 276596 https://movie.douban.com/subject/10777687/122 Â∞èÊ£ÆÊûó ÂÜ¨Êò•ÁØá 9.0 196346 https://movie.douban.com/subject/25814707/123 È£é‰πãË∞∑ 8.8 246043 https://movie.douban.com/subject/1291585/124 ÂìàÂà©¬∑Ê≥¢Áâπ‰∏éÊ≠ª‰∫°Âú£Âô®(‰∏ã) 8.7 408422 https://movie.douban.com/subject/3011235/125 Êàë‰∏çÊòØËçØÁ•û 9.0 1181641 https://movie.douban.com/subject/26752088/126 Âπ∏Á¶èÁªàÁÇπÁ´ô 8.7 310524 https://movie.douban.com/subject/1292274/127 ËùôËù†‰æ†ÔºöÈªëÊöóÈ™ëÂ£´Â¥õËµ∑ 8.7 415939 https://movie.douban.com/subject/3395373/128 ‰∏äÂ∏ù‰πãÂüé 8.9 200345 https://movie.douban.com/subject/1292208/129 Ëê§ÁÅ´‰πãÊ£Æ 8.8 261708 https://movie.douban.com/subject/5989818/130 ÂÄü‰∏úË•øÁöÑÂ∞è‰∫∫ÈòøËéâÂüÉËíÇ 8.8 308863 https://movie.douban.com/subject/4202302/131 Ë∂ÖËÉΩÈôÜÊàòÈòü 8.6 565299 https://movie.douban.com/subject/11026735/132 Âîê‰ºØËôéÁÇπÁßãÈ¶ô 8.5 545655 https://movie.douban.com/subject/1306249/133 Á•ûÂÅ∑Â•∂Áà∏ 8.5 572719 https://movie.douban.com/subject/3287562/134 Êó†‰∫∫Áü•Êôì 9.1 133082 https://movie.douban.com/subject/1292337/135 ÊÄ™ÂÖΩÁîµÂäõÂÖ¨Âè∏ 8.7 363701 https://movie.douban.com/subject/1291579/136 ÁîµÈîØÊÉäÈ≠Ç 8.7 287704 https://movie.douban.com/subject/1417598/137 Â≤ÅÊúàÁ•ûÂÅ∑ 8.7 394423 https://movie.douban.com/subject/3792799/138 Áé©ÂÖ∑ÊÄªÂä®Âëò3 8.8 278994 https://movie.douban.com/subject/1858711/139 Ë°ÄÊàòÈí¢ÈîØÂ≤≠ 8.7 472814 https://movie.douban.com/subject/26325320/140 Ë∞çÂΩ±ÈáçÈáç3 8.8 254835 https://movie.douban.com/subject/1578507/141 ÁñØÁãÇÂéüÂßã‰∫∫ 8.7 518689 https://movie.douban.com/subject/1907966/142 ‰∏ÉÊ≠¶Â£´ 9.2 108944 https://movie.douban.com/subject/1295399/143 Ëã±ÈõÑÊú¨Ëâ≤ 8.7 276917 https://movie.douban.com/subject/1297574/144 ÂñúÂÆ¥ 8.9 195228 https://movie.douban.com/subject/1303037/145 ÁúüÁà±Ëá≥‰∏ä 8.6 430547 https://movie.douban.com/subject/1292401/146 Ëê§ÁÅ´Ëô´‰πãÂ¢ì 8.7 272296 https://movie.douban.com/subject/1293318/147 ‰∏úÈÇ™Ë•øÊØí 8.6 362487 https://movie.douban.com/subject/1292328/148 ÂÇ≤ÊÖ¢‰∏éÂÅèËßÅ 8.5 430151 https://movie.douban.com/subject/1418200/149 Êó∂Á©∫ÊÅãÊóÖ‰∫∫ 8.7 302907 https://movie.douban.com/subject/10577869/150 Ë¥´Ê∞ëÁ™üÁöÑÁôæ‰∏áÂØåÁøÅ 8.6 497991 https://movie.douban.com/subject/2209573/151 ÈªëÂ§©ÈπÖ 8.5 549429 https://movie.douban.com/subject/1978709/152 ËÆ∞ÂøÜÁ¢éÁâá 8.6 373474 https://movie.douban.com/subject/1304447/153 ÂøÉËø∑ÂÆ´ 8.7 274327 https://movie.douban.com/subject/25917973/154 Á∫µÊ®™ÂõõÊµ∑ 8.8 226602 https://movie.douban.com/subject/1295409/155 ÊïôÁà∂3 8.8 191865 https://movie.douban.com/subject/1294240/156 ËçíËõÆÊïÖ‰∫ã 8.8 223635 https://movie.douban.com/subject/24750126/157 ÂÆåÁæéÁöÑ‰∏ñÁïå 9.1 123076 https://movie.douban.com/subject/1300992/158 ËææÊãâÊñØ‰π∞ÂÆ∂‰ø±‰πêÈÉ® 8.7 264828 https://movie.douban.com/subject/1793929/159 Èõ®‰∫∫ 8.7 267637 https://movie.douban.com/subject/1291870/160 ‰∏âÂùóÂπøÂëäÁâå 8.7 493952 https://movie.douban.com/subject/26611804/161 Ëä±Ê†∑Âπ¥Âçé 8.6 337477 https://movie.douban.com/subject/1291557/162 Ë¢´Ëß£ÊïëÁöÑÂßúÊàà 8.7 357721 https://movie.douban.com/subject/6307447/163 Âç¢Êó∫ËææÈ•≠Â∫ó 8.9 161524 https://movie.douban.com/subject/1291822/164 ‰Ω†ÁöÑÂêçÂ≠ó„ÄÇ 8.4 757251 https://movie.douban.com/subject/26683290/165 Êµ∑ËæπÁöÑÊõºÂΩªÊñØÁâπ 8.6 294826 https://movie.douban.com/subject/25980443/166 ÊàëÊòØÂ±±ÂßÜ 8.9 155512 https://movie.douban.com/subject/1306861/167 Â§¥ËÑëÁâπÂ∑•Èòü 8.7 340013 https://movie.douban.com/subject/10533913/168 ‰Ω†ÁúãËµ∑Êù•Â•ΩÂÉèÂæàÂ•ΩÂêÉ 8.8 202385 https://movie.douban.com/subject/4848115/169 ÊÅãÊÅãÁ¨îËÆ∞Êú¨ 8.5 385616 https://movie.douban.com/subject/1309163/170 Âì™ÂêíÈóπÊµ∑ 9.0 129640 https://movie.douban.com/subject/1307315/171 Êó†ÊïåÁ†¥ÂùèÁéã 8.7 306834 https://movie.douban.com/subject/6534248/172 ËôéÂè£ËÑ±Èô© 8.9 141090 https://movie.douban.com/subject/1296909/173 ÂÜ∞Â∑ùÊó∂‰ª£ 8.5 379209 https://movie.douban.com/subject/1291578/174 ‰∫åÂçÅ‰∫å 8.7 168873 https://movie.douban.com/subject/26430107/175 Êµ∑Ê¥ã 9.0 116507 https://movie.douban.com/subject/3443389/176 Èõ®‰∏≠Êõ≤ 9.0 125013 https://movie.douban.com/subject/1293460/177 ÁàÜË£ÇÈºìÊâã 8.7 324492 https://movie.douban.com/subject/25773932/178 Êú™È∫ªÁöÑÈÉ®Â±ã 8.9 147477 https://movie.douban.com/subject/1395091/179 Ê®°‰ªøÊ∏∏Êàè 8.6 355368 https://movie.douban.com/subject/10463953/180 ‰∏Ä‰∏™Âè´Ê¨ßÁª¥ÁöÑÁî∑‰∫∫ÂÜ≥ÂÆöÂéªÊ≠ª 8.8 195643 https://movie.douban.com/subject/26628357/181 Âø†Áä¨ÂÖ´ÂÖ¨Áâ©ËØ≠ 9.1 96747 https://movie.douban.com/subject/1959195/182 ÁáÉÊÉÖÂ≤ÅÊúà 8.8 185142 https://movie.douban.com/subject/1295865/183 ‰∫∫Â∑•Êô∫ËÉΩ 8.6 258634 https://movie.douban.com/subject/1302827/184 È≠îÂ•≥ÂÆÖÊÄ•‰æø 8.6 281054 https://movie.douban.com/subject/1307811/185 ÊàøÈó¥ 8.8 229618 https://movie.douban.com/subject/25724855/186 Á©øË∂äÊó∂Á©∫ÁöÑÂ∞ëÂ•≥ 8.6 250139 https://movie.douban.com/subject/1937946/187 Â§©‰π¶Â•áË∞≠ 9.1 91667 https://movie.douban.com/subject/1428581/188 ÊÅêÊÄñÊ∏∏ËΩÆ 8.4 459129 https://movie.douban.com/subject/3011051/189 È≠ÇÊñ≠ËìùÊ°• 8.8 164770 https://movie.douban.com/subject/1293964/190 ÈªëÂÆ¢Â∏ùÂõΩ3ÔºöÁü©ÈòµÈù©ÂëΩ 8.7 225709 https://movie.douban.com/subject/1302467/191 Êµ∑Ë°óÊó•ËÆ∞ 8.7 214152 https://movie.douban.com/subject/25895901/192 ÁåúÁÅ´ËΩ¶ 8.5 306564 https://movie.douban.com/subject/1292528/193 ÁΩóÁîüÈó® 8.8 175470 https://movie.douban.com/subject/1291879/194 ÂÆåÁæéÈôåÁîü‰∫∫ 8.5 333893 https://movie.douban.com/subject/26614893/195 ÈòøÈ£ûÊ≠£‰º† 8.5 295833 https://movie.douban.com/subject/1305690/196 Â§¥Âè∑Áé©ÂÆ∂ 8.7 823877 https://movie.douban.com/subject/4920389/197 È¶ôÊ∞¥ 8.5 362383 https://movie.douban.com/subject/1760622/198 ÂäüÂ§´ 8.4 465611 https://movie.douban.com/subject/1291543/199 ÂèØÂèØË•øÈáå 8.7 171199 https://movie.douban.com/subject/1308857/200 ÊúóËØªËÄÖ 8.5 333438 https://movie.douban.com/subject/2213597/201 Ë∞çÂΩ±ÈáçÈáç2 8.6 219036 https://movie.douban.com/subject/1308767/202 Êµ™ÊΩÆ 8.7 173378 https://movie.douban.com/subject/2297265/203 ÁâØÂ≤≠Ë°óÂ∞ëÂπ¥ÊùÄ‰∫∫‰∫ã‰ª∂ 8.8 149429 https://movie.douban.com/subject/1292329/204 Ë∞çÂΩ±ÈáçÈáç 8.6 261073 https://movie.douban.com/subject/1304102/205 Êàò‰∫â‰πãÁéã 8.6 224942 https://movie.douban.com/subject/1419936/206 Âú∞ÁêÉ‰∏äÁöÑÊòüÊòü 8.9 120790 https://movie.douban.com/subject/2363506/207 ÁñØÁãÇÁöÑÁü≥Â§¥ 8.4 452026 https://movie.douban.com/subject/1862151/208 ÂàùÊÅãËøô‰ª∂Â∞è‰∫ã 8.3 633902 https://movie.douban.com/subject/4739952/209 ÈùíËõá 8.5 303900 https://movie.douban.com/subject/1303394/210 ÊÉäÈ≠ÇËÆ∞ 8.9 120359 https://movie.douban.com/subject/1293181/211 ÁªàÁªìËÄÖ2ÔºöÂÆ°Âà§Êó• 8.6 198690 https://movie.douban.com/subject/1291844/212 Ê∫ê‰ª£Á†Å 8.4 520617 https://movie.douban.com/subject/3075287/213 Áà±Âú®ÂçàÂ§úÈôç‰∏¥Ââç 8.8 167120 https://movie.douban.com/subject/10808442/214 Ê≠•Â±•‰∏çÂÅú 8.8 139427 https://movie.douban.com/subject/2222996/215 Êñ∞ÈæôÈó®ÂÆ¢Ê†à 8.5 258004 https://movie.douban.com/subject/1292287/216 Â•áËøπÁî∑Â≠© 8.6 323039 https://movie.douban.com/subject/26787574/217 Â∞èËêùËéâÁöÑÁå¥Á•ûÂ§ßÂèî 8.5 271364 https://movie.douban.com/subject/26393561/218 ËøΩÈöè 8.9 108391 https://movie.douban.com/subject/1397546/219 ‰∏ÄÊ¨°Âà´Á¶ª 8.7 168140 https://movie.douban.com/subject/5964718/220 Êó†ËÄªÊ∑∑Ëõã 8.5 294062 https://movie.douban.com/subject/1438652/221 ÂÜçÊ¨°Âá∫Âèë‰πãÁ∫ΩÁ∫¶ÈÅáËßÅ‰Ω† 8.5 245335 https://movie.douban.com/subject/6874403/222 ÈáúÂ±±Ë°å 8.4 561902 https://movie.douban.com/subject/25986180/223 Ë°ÄÈíª 8.6 196331 https://movie.douban.com/subject/1428175/224 ‰∏ú‰∫¨Áâ©ËØ≠ 9.2 72955 https://movie.douban.com/subject/1291568/225 ÊíûËΩ¶ 8.6 219372 https://movie.douban.com/subject/1388216/226 ÂΩóÊòüÊù•ÁöÑÈÇ£‰∏ÄÂ§ú 8.5 276087 https://movie.douban.com/subject/25807345/227 ÂüéÂ∏Ç‰πãÂÖâ 9.3 65047 https://movie.douban.com/subject/1293908/228 2001Â§™Á©∫Êº´Ê∏∏ 8.7 149476 https://movie.douban.com/subject/1292226/229 Ê¢¶‰πãÂÆâÈ≠ÇÊõ≤ 8.7 144757 https://movie.douban.com/subject/1292270/230 Êñ∞‰∏ñÁïå 8.7 149430 https://movie.douban.com/subject/10437779/231 ÁªøÈáåÂ•áËøπ 8.7 145109 https://movie.douban.com/subject/1300374/232 ÁñØÁãÇÁöÑÈ∫¶ÂÖãÊñØ4ÔºöÁãÇÊö¥‰πãË∑Ø 8.6 296326 https://movie.douban.com/subject/3592854/233 ËÅöÁÑ¶ 8.8 172697 https://movie.douban.com/subject/25954475/234 E.T. Â§ñÊòü‰∫∫ 8.5 211210 https://movie.douban.com/subject/1294638/235 Ëøô‰∏™Áî∑‰∫∫Êù•Ëá™Âú∞ÁêÉ 8.5 244977 https://movie.douban.com/subject/2300586/236 Êú´Ë∑ØÁãÇËä± 8.7 138086 https://movie.douban.com/subject/1291992/237 ÈªëÈπ∞Âù†ËêΩ 8.6 169479 https://movie.douban.com/subject/1291824/238 ÂèëÊù°Ê©ô 8.5 237973 https://movie.douban.com/subject/1292233/239 ÈÅóÊÑøÊ∏ÖÂçï 8.6 191251 https://movie.douban.com/subject/1867345/240 ÂèòËÑ∏ 8.4 272586 https://movie.douban.com/subject/1292659/241 ÂãáÈóØÂ§∫ÂëΩÂ≤õ 8.6 182137 https://movie.douban.com/subject/1292728/242 ÂõΩÁéãÁöÑÊºîËÆ≤ 8.4 435891 https://movie.douban.com/subject/4023638/243 ÊàëÁà±‰Ω† 9.0 84663 https://movie.douban.com/subject/5908478/244 ÈªÑÈáë‰∏âÈïñÂÆ¢ 9.1 71082 https://movie.douban.com/subject/1401118/245 ÂçÉÈíß‰∏ÄÂèë 8.7 131207 https://movie.douban.com/subject/1300117/246 ÈùûÂ∏∏Â´åÁñëÁäØ 8.6 163295 https://movie.douban.com/subject/1292214/247 ÁßíÈÄü5ÂéòÁ±≥ 8.3 412652 https://movie.douban.com/subject/2043546/248 È©¥ÂæóÊ∞¥ 8.3 502838 https://movie.douban.com/subject/25921812/249 Âç°Ëê®Â∏ÉÂÖ∞Âç° 8.6 160541 https://movie.douban.com/subject/1296753/250 Âõõ‰∏™Êò•Â§© 8.9 87331 https://movie.douban.com/subject/27191492/]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>Áà¨Ëô´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PHP foreachÂæ™ÁéØ‰ΩøÁî®&ÂºïÁî®ÁöÑÂ∞èÂùë]]></title>
    <url>%2F2019%2F08%2F07%2FPHP-foreach%E5%BE%AA%E7%8E%AF%E4%BD%BF%E7%94%A8-%E5%BC%95%E7%94%A8%E7%9A%84%E5%B0%8F%E5%9D%91%2F</url>
    <content type="text"><![CDATA[Ê∫êËµ∑Ôºö‰ªäÂ§©ÊúâÂ∞èüî•‰º¥Âèë‰∫Ü‰∏ÄÊÆµ PHP ‰ª£Á†ÅÈóÆÊâßË°åÁªìÊûúÂíåÂ∏∏ËßÑÈÄªËæëÊÄùËÄÉü§îÁªìÊûú‰∏∫Âï•‰πà‰∏ç‰∏ÄÊ†∑„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºåÂΩìÊó∂Âè™ÊòØËØ¥Âíå foreach ‰ΩøÁî® &amp; ÊúâÂÖ≥„ÄÇ‰πüÊ≤°Ê∑±ÂÖ•ÊÄùËÄÉÂà∞Â∫ïÊòØ‰ªÄ‰πàÂÖ≥Á≥ªÔºåÂçàÁù°ËøáÂêéÔºåÂøÉË°ÄÊù•ÊΩÆÁöÑÊÉ≥ÊêûÊêûËøô‰∏™ÈóÆÈ¢òÔºåÊïÖÂÅöÂ¶Ç‰∏ãËÆ∞ÂΩï„ÄÇ Â∞è‰ºô‰º¥ÁªôÁöÑÂéüÂßã‰ª£Á†ÅÂ¶Ç‰∏ã 123456789101112131415161718&lt;?php $arr = [1, 2, 4, 8]; foreach ($arr as &amp;$val) &#123; //ÂõõÊ¨°Âæ™ÁéØËø≠‰ª£Âêé‰æùÊ¨°ËæìÂá∫ 1, 2, 4, 8; Ê≤°‰ªª‰ΩïÊØõÁóÖ echo $val . PHP_EOL; &#125; print_r($arr); echo "************************" . PHP_EOL; foreach ($arr as $val) &#123; print_r($arr); echo $val . PHP_EOL; echo "###################" . PHP_EOL; &#125; //echo ‰æùÊ¨°ÊâìÂç∞ÁöÑÊòØÔºö 1Ôºå2Ôºå4Ôºå4 [(O_O)]? ‰ª£Á†ÅÊâßË°åÁªìÊûúÂ¶Ç‰∏ãÂõæ ÈÇ£‰πàÈóÆÈ¢òÊù•‰∫ÜÔºåÁ¨¨‰∏ÄÊ¨°ËæìÂá∫ 1Ôºå2Ôºå4Ôºå8 Ê≤°Êúâ‰ªª‰ΩïÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØÔºå‰ΩÜÊòØÔºå‰ΩÜÊòØ‰∏∫‰ªÄ‰πàÁ¨¨‰∫åÊ¨°ËæìÂá∫ÁöÑÊòØ 1, 2, 4, 4 ËÄå‰∏çÊòØ 1„ÄÅ2 4„ÄÅ8 Âë¢ÔºüÊü•ËØ¢ PHP foreach ÊñáÊ°£ ÊúâËæ£‰πà‰∏ÄÂè•ÁâπÂà´ÊèêÈÜí Warning Êï∞ÁªÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑ $value ÂºïÁî®Âú® foreach Âæ™ÁéØ‰πãÂêé‰ªç‰ºö‰øùÁïô„ÄÇÂª∫ËÆÆ‰ΩøÁî® unset() Êù•Â∞ÜÂÖ∂ÈîÄÊØÅ„ÄÇÁúãÊ≠§ÊèêÁ§∫ÔºåÂÜ•ÂÜ•‰πã‰∏≠Â•ΩÂÉèÁü•ÈÅì‰∫ÜÁ≠îÊ°à„ÄÇ Á¨¨‰∏ÄÊ¨° foreach Áî±‰∫é‰ΩøÁî®ÁöÑÊòØ &amp; ÂºïÁî®ËµãÂÄºÔºåÂú®Âæ™ÁéØÂÆåÊàêÂêéÂ¶ÇÊûúÊ≤°Êúâ unset($val) ‰ºö‰øùÁïôÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑ $valÂºïÁî® Á¨¨‰∫åÊ¨° foreach Áî±‰∫é‰ΩøÁî®ÁöÑÂíåÁ¨¨‰∏ÄÊ¨°ÂêåÊ†∑ÁöÑËø≠‰ª£ÂèòÈáè $val, Êï∞ÁªÑÁöÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† $arr[3] ÂíåÂΩìÂâçÂæ™ÁéØËø≠‰ª£ÂÄº $val ÊåáÂêëÂêå‰∏Ä‰∏™ÂèòÈáèÂú∞ÂùÄÔºåÊ≠§Êó∂ $val ÂÄºÊîπÂèòÊó∂ $arr[3] ÁöÑÂÄº‰πüË∑üÁùÄÊîπÂèò‰∫Ü„ÄÇ Áî®‰∏äÂõæËØ¥Êòé ÂéüÂßãÊï∞ÁªÑ‰∏∫Âõæ‰∏≠ AÂå∫Âüü Êï∞ÁªÑ Á¨¨ 0 Ê¨°Âæ™ÁéØËø≠‰ª£ÔºöÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† $arr[3] Âíå $val Âç≥($arr[0]) ÂÄºÁõ∏Âêå„ÄÇ$arr[3] = $val = 1ÔºåÂ¶ÇÂõæ‰∏≠ 0Âå∫Âüü 12345678Array( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 4 [3] =&gt; 1)Á¨¨0Ê¨°Âæ™ÁéØÁªìÊûúÔºö1 Á¨¨ 1 Ê¨°Âæ™ÁéØËø≠‰ª£ÔºöÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† $arr[3] Âíå $val Âç≥($arr[1]) ÂÄºÁõ∏Âêå„ÄÇ$arr[3] = $val = 2ÔºåÂ¶ÇÂõæ‰∏≠ 1Âå∫Âüü 12345678Array( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 4 [3] =&gt; 2)Á¨¨1Ê¨°Âæ™ÁéØÁªìÊûúÔºö2 Á¨¨ 2 Ê¨°Âæ™ÁéØËø≠‰ª£ÔºöÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† $arr[3] Âíå $val Âç≥($arr[2]) ÂÄºÁõ∏Âêå„ÄÇ$arr[3] = $val = 4ÔºåÂ¶ÇÂõæ‰∏≠ 2Âå∫Âüü 12345678Array( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 4 [3] =&gt; 4)Á¨¨2Ê¨°Âæ™ÁéØÁªìÊûúÔºö4 Á¨¨ 3 Ê¨°Âæ™ÁéØËø≠‰ª£ÔºöÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥† $arr[3] Âíå $val Âç≥($arr[3]) ÂÄºÁõ∏Âêå„ÄÇ$arr[3] = $val = 4ÔºåÂ¶ÇÂõæ‰∏≠ 3Âå∫Âüü 12345678Array( [0] =&gt; 1 [1] =&gt; 2 [2] =&gt; 4 [3] =&gt; 4)Á¨¨2Ê¨°Âæ™ÁéØÁªìÊûúÔºö4 Áªº‰∏äÔºåÁ¨¨‰∫åÊ¨°Âæ™ÁéØ 1, 2, 4, 4 Â∞±ÊòØËøô‰πàÊù•ÁöÑ üòú]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>ÁºñÁ®ã</tag>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GolangÁà¨Ëô´Á≥ªÂàóÈõ∂ÔºöÁà¨ÂèñÁôæÂ∫¶Ë¥¥ÂêßÂÜÖÂÆπ]]></title>
    <url>%2F2019%2F08%2F04%2Fgolang%E7%88%AC%E5%8F%96%E7%99%BE%E5%BA%A6%E8%B4%B4%E5%90%A7%E5%86%85%E5%AE%B9%2F</url>
    <content type="text"><![CDATA[Â£∞ÊòéÔºö‰ª•‰∏ãÂÜÖÂÆπ‰ªÖ‰æõÊäÄÊúØÂ≠¶‰π†Áà¨Ëô´ÂÆûÁé∞Ê≠•È™§1ÔºöËé∑ÂèñÈúÄË¶ÅÁà¨ÂèñURLÁöÑÂú∞ÂùÄÔºà‰ª• JavaScriptÂêß ‰∏æ‰æãÔºâ http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=0 http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=50 http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=1502Ôºö‰ΩøÁî® http.Get(url) Ëé∑ÂèñÂà∞ÊØè‰∏Ä‰∏™URLÁöÑÂÜÖÂÆπ 3ÔºöÂ∞ÜÊàñÂæóÂà∞URLÁöÑÂÜÖÂÆπÂÜôÂÖ•Êñá‰ª∂ Ê≥®ÊÑèÊñá‰ª∂ÂëΩÂêç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102package mainimport ( "fmt" "net/http" "io" "strconv" "os" "time")//Ë¥¥ÂêßÁöÑURL//http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=0//http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=50func main() &#123; start := time.Now() //Á°ÆËÆ§Ëµ∑ÂßãÈ°µÂíåÁªàÊ≠¢È°µ var startPage int var endPage int fmt.Print("ËØ∑ËæìÂÖ•Ëµ∑ÂßãÈ°µ:") fmt.Scanln(&amp;startPage) if startPage &lt;= 1 &#123; startPage = 1 &#125; fmt.Print("ËØ∑ËæìÂÖ•ÁªàÊ≠¢È°µ:") fmt.Scanln(&amp;endPage) if endPage &lt;= 1 &#123; endPage = 1 &#125; working(startPage, endPage) cost := time.Since(start) fmt.Printf("ËÄóÊó∂ = [%s] ", cost)&#125;func working(startPage, endPage int) &#123; fmt.Printf("Ê≠£Âú®Áà¨ÂèñÁ¨¨%dÈ°µÂà∞%dÈ°µÁöÑ‰ø°ÊÅØ...\n", startPage, endPage) pageChan := make(chan int) //Âæ™ÁéØÁà¨ÂèñÊØè‰∏ÄÈ°µ for i := startPage; i &lt;= endPage; i++ &#123; //ÂºÄÂêØÂçèÁ®ã go SpiderPage(i, pageChan) //SpiderPage(i, pageChan) &#125; for i := startPage; i &lt;= endPage; i++ &#123; //ÂºÄÂêØÂçèÁ®ã fmt.Printf("Á¨¨ %d È°µ Áà¨ÂèñÂÆåÊàê\n", &lt;-pageChan) &#125;&#125;//Áà¨ÂèñÂçï‰∏™È°µÈù¢ÁöÑÂáΩÊï∞func SpiderPage(i int, pageChan chan int) &#123; baseUrl := "http://tieba.baidu.com/f?kw=javascript&amp;ie=utf-8&amp;pn=" + strconv.Itoa((i-1)*50) fmt.Println("Ê≠£Âú®Ëé∑ÂèñÁ¨¨", i, "È°µÁöÑÂÜÖÂÆπ") result, err := httpGetUrl(baseUrl) if err != nil &#123; fmt.Println("http get error, Msg", err.Error()) return &#125; //Â∞ÜËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Â≠òÂÇ®‰∏∫Êñá‰ª∂ file, err := os.Create("JavaScript_" + strconv.Itoa(i) + ".html") if err != err &#123; fmt.Println("os Create errÔºö", err.Error()) return &#125; file.WriteString(result) file.Close() //‰øùÂ≠òÂ•Ω‰∏Ä‰∏™Êñá‰ª∂Â∞±ÂÖ≥Èó≠‰∏Ä‰∏™Êñá‰ª∂ pageChan &lt;- i&#125;//Áà¨ÂèñÂÜÖÂÆπfunc httpGetUrl(url string) (result string, err error) &#123; resp, err1 := http.Get(url) if err1 != nil &#123; err = err1 return &#125; //ÂÖ≥Èó≠ defer resp.Body.Close() //ËØªÂèñÊï∞ÊçÆ buffer := make([]byte, 8196) for &#123; //ËØªÂèñÁöÑÂÜÖÂÆπËá≥‰∫ébufferÂÆπÂô® n, err2 := resp.Body.Read(buffer) if n == 0 &#123; fmt.Println("ËØªÂèñÁΩëÈ°µÂÆåÊàê") break &#125; if err2 != nil &amp;&amp; err2 != io.EOF &#123; err = err2 return &#125; //Á¥ØÊ¨°Áõ∏Âä†ÊØè‰∏ÄÊ¨°ËØªÂà∞ÁöÑBufferÊï∞ÊçÆÔºåÂ≠òÂÖ•result, ‰∏ÄÊ¨°ÊÄßËøîÂõû result += string(buffer[:n]) &#125; return`]]></content>
      <categories>
        <category>Golang</category>
      </categories>
      <tags>
        <tag>Go</tag>
        <tag>Áà¨Ëô´</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Á®ãÂ∫èÂëòÊï∞Â≠¶Âü∫Á°Ä ‰πã Áü©Èòµ]]></title>
    <url>%2F2019%2F08%2F03%2F%E7%A8%8B%E5%BA%8F%E5%91%98%E6%95%B0%E5%AD%A6%E4%B9%8B%E7%9F%A9%E9%98%B5%2F</url>
    <content type="text"><![CDATA[1ÔºöÁü©ÈòµÁõ∏Âä† 2ÔºöÁü©ÈòµÁõ∏‰πòÔºà‰∏çÁ¨¶Âêà‰∫§Êç¢ÂæãÔºâ Ê†áÈáè * Áü©Èòµ ÂèòÈáè * Áü©ÈòµÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂæóÂà∞‰∏Ä‰∏™Êñ∞Áü©Èòµ Áü©Èòµ * Áü©Èòµ Áî®Áü©ÈòµÁöÑ Á¨¨1Ë°å ÂàÜÂà´Âéª ‰πò‰ª• Áü©ÈòµÁöÑÊØè‰∏ÄÂàó Áî®Áü©ÈòµÁöÑ Á¨¨NË°å ÂàÜÂà´Âéª ‰πò‰ª• Áü©ÈòµÁöÑÊØè‰∏ÄÂàó Áü©ÈòµA * Áü©ÈòµB != Áü©ÈòµB * Áü©ÈòµA Áü©ÈòµÁõ∏‰πòÁöÑÊù°‰ª∂ÔºöÂâçÈù¢Áü©ÈòµÁöÑÂàóÊï∞ Á≠â‰∫é ÂêéÈù¢Áü©ÈòµÁöÑË°åÊï∞]]></content>
      <categories>
        <category>Êï∞Â≠¶</category>
      </categories>
      <tags>
        <tag>Êï∞Â≠¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo ÈÉ®ÁΩ≤ÊµãËØï]]></title>
    <url>%2F2019%2F08%2F02%2Fhexo-test-deploy%2F</url>
    <content type="text"><![CDATA[Hexo ÈÉ®ÁΩ≤ÊµãËØï1ÔºöÈÄöËøáÊó•ÂøóÊñπÂºèÁªüËÆ° 1234567file_put_contents("loc.log", microtime(true).'_end'."-----$lat@2".PHP_EOL, FILE_APPEND);file_put_contents('exelog/'.time().'.log', var_export(Yii::$app-&gt;request-&gt;post(), true));$postdata = file_get_contents("php://input");$postdata = json_decode($postdata,true); 2Ôºö‰∫åÁª¥Êï∞ÁªÑÊåáÂÆöÂ≠óÊÆµÊéíÂ∫è12345array_multisort (array_column($citiesMddBaseInfo, ‚Äòhot‚Äô), SORT_DESC, $citiesMddBaseInfo);array_multisort(array_column($hotelList, 'price'), SORT_ASC, $hotelList);array_multisort($hotelList,SORT_ASC, array_column($hotelList, 'price'));]]></content>
      <categories>
        <category>ÊµãËØï</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
</search>
